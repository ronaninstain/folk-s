if (self.CavalryLogger) { CavalryLogger.start_js(["dLt7kdu"]); }

__d("EntPhotoCollageItemContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"id"},b={defaultValue:null,kind:"LocalArgument",name:"scale"},c=[{kind:"Variable",name:"id",variableName:"id"}];return{fragment:{argumentDefinitions:[a,b],kind:"Fragment",metadata:null,name:"EntPhotoCollageItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"EntPhotoCollageItem_media"}],type:"Photo",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[b,a],kind:"Operation",name:"EntPhotoCollageItemContainerQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"3825262914227511",metadata:{},name:"EntPhotoCollageItemContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("EntPhotoCollageItem_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"EntPhotoCollageItem_media",selections:[{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"focus",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("useComposerVideoUploaderConfigQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"actorID"},{defaultValue:null,kind:"LocalArgument",name:"entryPoint"},{defaultValue:null,kind:"LocalArgument",name:"targetID"}],b=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"actor_id",variableName:"actorID"},{kind:"Variable",name:"entry_point",variableName:"entryPoint"},{kind:"Variable",name:"target_id",variableName:"targetID"}],kind:"ScalarField",name:"comet_composer_video_uploader_config",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useComposerVideoUploaderConfigQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useComposerVideoUploaderConfigQuery",selections:b},params:{id:"4001962293179986",metadata:{},name:"useComposerVideoUploaderConfigQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("SphericalPhotoGenerateMetadataQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"SphericalPhotoEncodingGenerateSphericalMetadataResponsePayload",kind:"LinkedField",name:"spherical_photo_generate_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_horizontal_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"SphericalPhotoGenerateMetadataQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"SphericalPhotoGenerateMetadataQuery",selections:b},params:{id:"2438216362969319",metadata:{},name:"SphericalPhotoGenerateMetadataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("parseDocForSphericalMetadata",["Comet360PhotoTypes"],(function(a,b,c,d,e,f){"use strict";f.parseDocForSphericalMetadata=a;f.docContainsAnyGPanoTags=c;f.setDefaultEquirectangularMetadataValues=i;f.createSphericalPhotoEncodingFromMetadata=k;var g=["GPano:CroppedAreaImageHeightPixels","GPano:CroppedAreaImageWidthPixels","GPano:CroppedAreaLeftPixels","GPano:CroppedAreaTopPixels","GPano:FullPanoHeightPixels","GPano:FullPanoWidthPixels","GPano:InitialHorizontalFOVDegrees","GPano:InitialVerticalFOVDegrees","GPano:InitialViewHeadingDegrees","GPano:InitialViewPitchDegrees","GPano:ProjectionType","GPano:UsePanoramaViewer"];function a(a){var b;if(!h(a,"GPano:ProjectionType"))return null;b=(b=a.getElementsByTagName("GPano:ProjectionType")[0].firstChild)==null?void 0:b.nodeValue;if(b!=="equirectangular"&&b!=="cylindrical")return null;b=i();for(var c=0;c<g.length;c++){var d,e=g[c];if(!h(a,e))continue;d=(d=a.getElementsByTagName(e)[0].firstChild)==null?void 0:d.nodeValue;e=e.substr("GPano:".length);isNaN(d)?b[e]=d:b[e]=Number(d)}return k(b)}function h(a,b){a=a.getElementsByTagName(b);return a.length!==0}function c(a){for(var b=0;b<g.length;b++){var c=g[b];if(!h(a,c))continue;return!0}return!1}function i(){return{CroppedAreaImageHeightPixels:0,CroppedAreaImageWidthPixels:0,CroppedAreaLeftPixels:0,CroppedAreaTopPixels:0,FullPanoHeightPixels:0,FullPanoWidthPixels:0,InitialHorizontalFOVDegrees:0,InitialVerticalFOVDegrees:0,InitialViewHeadingDegrees:0,InitialViewPitchDegrees:0,ProjectionType:"equirectangular",UsePanoramaViewer:!0}}function j(a){return a/180*Math.PI}function k(a){var c=a.CroppedAreaImageWidthPixels/a.CroppedAreaImageHeightPixels,d=a.CroppedAreaImageWidthPixels/a.FullPanoWidthPixels*Math.PI*2,e=a.CroppedAreaImageHeightPixels/a.FullPanoHeightPixels*Math.PI*2;(isNaN(c)||c===0)&&(c=2);(isNaN(d)||d===0)&&(d=Math.PI*2);(isNaN(e)||e===0)&&(e=Math.PI);var f=a.InitialViewHeadingDegrees,g=a.InitialViewPitchDegrees,h=a.InitialHorizontalFOVDegrees,i=a.InitialVerticalFOVDegrees,k=b("Comet360PhotoTypes").Comet360PhotoProjection.Equirectangular;switch(a.ProjectionType){case"equirectangular":k=b("Comet360PhotoTypes").Comet360PhotoProjection.Equirectangular;break;case"cylindrical":k=b("Comet360PhotoTypes").Comet360PhotoProjection.Cylindrical;break}a={aspectRatio:c,horizontalFov:d,projectionType:k,startingView:{heading:j(f),horizontalFov:h!==0?j(h):null,pitch:j(g),verticalFov:i!==0?j(i):null},verticalFov:e};return a}}),null);
__d("SphericalPhotoGenerateMetadataQuery.react",["CometRelay","SphericalPhotoGenerateMetadataQuery.graphql","parseDocForSphericalMetadata"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("SphericalPhotoGenerateMetadataQuery.graphql");function a(a,c){return b("CometRelay").fetchQuery(a,h,{input:c}).toPromise().then(function(a){var c=b("parseDocForSphericalMetadata").setDefaultEquirectangularMetadataValues();if(a!=null){a=a.spherical_photo_generate_metadata;c.CroppedAreaImageHeightPixels=a.cropped_area_image_height_pixels;c.CroppedAreaImageWidthPixels=a.cropped_area_image_width_pixels;c.FullPanoWidthPixels=a.full_pano_width_pixels;c.FullPanoHeightPixels=a.full_pano_height_pixels;c.InitialHorizontalFOVDegrees=a.initial_horizontal_fov_degrees;c.InitialVerticalFOVDegrees=a.initial_vertical_fov_degrees;c.InitialViewPitchDegrees=a.initial_view_pitch_degrees;c.InitialViewHeadingDegrees=a.initial_view_heading_degrees;c.ProjectionType=a.projection_type}return b("parseDocForSphericalMetadata").createSphericalPhotoEncodingFromMetadata(c)})}}),null);
__d("genArrayBufferFromFile",["Promise"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){return"arrayBuffer"in a&&typeof a.arrayBuffer==="function"?a.arrayBuffer():new(b("Promise"))(function(b,c){var d=new FileReader();d.onload=function(){var a=d.result;a instanceof ArrayBuffer?b(a):c()};d.onerror=function(){c(d.error)};d.readAsArrayBuffer(a)})}}),null);
__d("extractXMPMetadata",["extractUTF8StringFromBuffer","genArrayBufferFromFile"],(function(a,b,c,d,e,f){"use strict";f.extractXMPMetadata=a;f.extractXMPMetadataFromArrayBuffer=k;var g=65496,h=65498,i="http://ns.adobe.com/xap/1.0/\0";function j(a,b){for(var c=0;c<i.length;c++){var d=i.charCodeAt(c);if(a.getUint8(b+c)!==d)return!1}return!0}function a(a){return b("genArrayBufferFromFile")(a).then(function(a){return k(a)})}function k(a){var c=new DataView(a);if(c.getUint16(0,!1)!==g)return null;var d=2;while(d<a.byteLength-2&&c.getUint16(d)!==h){var e=c.getUint16(d),f=e&65280;e=e&255;if(f===65280)if(e===225){if(j(c,d+4)){f=c.getUint16(d+2)-i.length-2;f=b("extractUTF8StringFromBuffer")(c.buffer,d+4+i.length,f);f.charCodeAt(f.length-1)===0&&(f=f.substr(0,f.length-1));try{var k=new DOMParser();k=k.parseFromString(f,"application/xml");return k.getElementsByTagName("parsererror").length>0?null:k}catch(a){return null}}f=c.getUint16(d+2,!1);d+=f+2}else if(e!==0&&(e<208||e>217)){k=c.getUint16(d+2,!1);d+=k+2}}return null}}),null);
__d("CometSphericalPhotoUtils",["SphericalPhotoGenerateMetadataQuery.react","exif-js","extractXMPMetadata","genArrayBufferFromFile","parseDocForSphericalMetadata","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.maybeGenSphericalMetadata=a;function g(a){var c=b("exif-js").readFromBinaryFile(a);a=b("extractXMPMetadata").extractXMPMetadataFromArrayBuffer(a);return{exifData:c,xmpData:a}}function h(a,b){a=a.getElementsByTagName(b)[0];if(a==null)return null;a=(b=a.firstChild)==null?void 0:b.nodeValue;if(a==null)return null;if(isNaN(a))return a;else return Number(a)}function i(a){var b=h(a,"GPano:ProjectionType");if(b!=null&&typeof b==="string"&&b.toLowerCase()==="equirectangular")return!0;b=h(a,"GPano:FullPanoWidthPixels");var c=h(a,"GPano:FullPanoHeightPixels"),d=h(a,"GPano:CroppedAreaImageHeightPixels");a=h(a,"GPano:CroppedAreaImageWidthPixels");return typeof b==="number"&&typeof c==="number"&&typeof a==="number"&&typeof d==="number"?b!==0&&c!==0&&a!==0&&d!==0:!1}function a(a,c,d,e){return b("genArrayBufferFromFile")(a).then(function(f){f=g(f);var h=!1,j=!1,k=!1,l=f.xmpData;if(l!=null&&b("parseDocForSphericalMetadata").docContainsAnyGPanoTags(l)){k=!0;if(i(l)){a=b("parseDocForSphericalMetadata").parseDocForSphericalMetadata(l);return a}}l=JSON.stringify(f.exifData,function(a,b){if(b!=null)if(a==="Make")h=!0;else if(a==="Model")j=!0;else if(a==="FocalLength")return b.numerator+"/"+b.denominator;return b});return!k&&(!j||!h)?null:b("SphericalPhotoGenerateMetadataQuery.react")(c,{exif_string:l,height:e,width:d,xmp_string:null}).then(function(a){return a})})["catch"](function(a){b("recoverableViolation")("An error occurred when parsing an uploaded image","comet_composer",{error:a});return null})}}),null);
__d("parseIFDEntry",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var b=a.readU16(),c=a.readU16(),d=a.readU32(),e=Object.freeze({offset:a.peekU32(),type:"offset"});switch(c){case 1:case 2:case 7:if(d<5){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readU8())}break;case 6:if(d<5){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readI8())}break;case 3:if(d<3){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readU16())}break;case 8:if(d<3){e={type:"data",values:[]};for(var f=0;f<d;f++)e.values.push(a.readI16())}break;case 4:d<2&&(e={type:"data",values:[a.readU32()]});break;case 9:d<2&&(e={type:"data",values:[a.readI32()]});break;case 11:d<2&&(e={type:"data",values:[a.readF32()]});break;case 5:case 10:case 12:a.seekRelative(4);break}return{format:c,tag:b,value:e}}}),null);
__d("parseIFDTable",["parseIFDEntry"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=a.readU16(),d=[];for(var e=0;e<c;e++)d.push(b("parseIFDEntry")(a));c=a.readU32();return{entries:d,nextTableOffset:c}}}),null);
__d("parseTIFFHeader",["EndianAwareDataReader","parseIFDTable"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){c===void 0&&(c=0);var d=new Uint8Array(a,c),e=!0;if(d[0]===77&&d[1]===77)e=!1;else if(d[0]!==73||d[1]!==73)return null;d=new(b("EndianAwareDataReader"))(a,e);d.seekTo(c+2);if(d.readU16()!==42)return null;a=d.readU32();d.seekRelative(a-8);e=b("parseIFDTable")(d);return[e]}}),null);
__d("extractJPEGOrientationData",["genArrayBufferFromFile","parseTIFFHeader"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=65496,h=65498,i=1165519206;function a(a){return b("genArrayBufferFromFile")(a).then(function(a){var c=new DataView(a);if(c.getUint16(0,!1)!==g)return null;var d=2;while(d<a.byteLength-2&&c.getUint16(d)!==h){var e=c.getUint16(d),f=e&65280;e=e&255;if(f===65280)if(e===225){if(c.getUint32(d+4)!==i||c.getUint16(d+8)!==0)return null;f=b("parseTIFFHeader")(a,d+10);if(f!=null){f=f[0];for(var f=f.entries,j=Array.isArray(f),k=0,f=j?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=f.length)break;l=f[k++]}else{k=f.next();if(k.done)break;l=k.value}l=l;if(l.tag===274){l=l.value;if(l.type==="data"){l=l.values[0];if(l==null)return null;return l===0||l===1||l===2||l===3||l===4||l===5||l===6||l===7||l===8?l:null}return null}}}return null}else if(e!==0&&(e<208||e>217)){l=c.getUint16(d+2,!1);d+=l+2}}return null})}}),null);
__d("genDimensionsFromImageFile",["Promise"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=new Image(),d=new(b("Promise"))(function(a,b){c.onload=function(){a({height:c.height,width:c.width})},c.onerror=function(){b()}});a instanceof File?c.src=URL.createObjectURL(a):c.src=a;return d}}),null);
__d("genDimensionsFromVideoFile",["Promise"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=document.createElement("video"),d=new(b("Promise"))(function(a,b){c.onloadedmetadata=function(){a({height:c.videoHeight,width:c.videoWidth})},c.onerror=function(){b()}});a instanceof File?c.src=URL.createObjectURL(a):c.src=a;return d}}),null);
__d("genIsHEICFile",["genArrayBufferFromFile"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=[102,116,121,112],d=[104,101,105,99],e=[104,101,105,120];return b("genArrayBufferFromFile")(a).then(function(a){a=new Uint8Array(a);var b=a.slice(4,8).reduce(function(a,b,d){return a&&b===c[d]},!0);if(!b)return!1;b=a.slice(8,12).reduce(function(a,b,c){return a&&b===d[c]},!0);if(b)return!0;b=a.slice(8,12).reduce(function(a,b,c){return a&&b===e[c]},!0);return b?!0:!1})}}),null);
__d("readVINT",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,b){var c=0;b=Math.min(a.length,(b=b)!=null?b:Number.MAX_VALUE);var d=0;while(c<b){var e=a[c];if(e===0)d+=8,c++;else{d+=8-Math.floor(Math.log2(e));if(d>b||d<0)return null;e=g(a,d);return{vintData:e,nextReadOffset:d}}}return null}function g(a,b){var c=Math.floor(b/8),d=a[c],e=8-b%8;e<8&&(d^=1<<e);e=new Uint8Array(new ArrayBuffer(b-c));e[0]=d;e.set(a.slice(c+1,b),1);return e}}),null);
__d("readEBMLHeader",["$InternalEnum","readVINT"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function g(a){return a.reduce(function(a,b){return a*256+b},0)}function h(a){return String.fromCharCode.apply(String,Array.from(a))}var i=b("$InternalEnum")({EBML:440786851,EBMLVersion:17030,EBMLReadVersion:17143,EBMLMaxSizeLength:17139,EBMLMaxIDLength:17138,DocType:17026,DocTypeVersion:17031,DocTypeReadVersion:17029});function j(a){var c=b("readVINT")(a,4);if(c==null)return null;var d=g(a.slice(0,c.nextReadOffset));d=i.cast(d);var e=b("readVINT")(a.slice(c.nextReadOffset));if(e==null)return null;var f=g(e.vintData);c=c.nextReadOffset+e.nextReadOffset;e=c+f;if(e>a.length)return null;f=a.slice(c,e);return{id:d,data:f,nextReadOffset:e}}function k(a){a=j(a);if(a==null||a.id!==i.EBML)return null;a=a.data;var b=new Map(),c=j(a);while(c!=null)c.id!=null&&b.set(c.id,c.data),a=a.slice(c.nextReadOffset),c=j(a);return b}function a(a){var b,c=k(new Uint8Array(a));if(c==null)return null;a=function(a,b){a=c.get(a);if(a==null)return null;else return b(a)};var d=a(i.DocType,h);return d==null?null:{ebmlVersion:(b=a(i.EBMLVersion,g))!=null?b:1,ebmlReadVersion:(b=a(i.EBMLReadVersion,g))!=null?b:1,ebmlMaxIDLength:(b=a(i.EBMLMaxIDLength,g))!=null?b:4,ebmlMaxSizeLength:(b=a(i.EBMLMaxSizeLength,g))!=null?b:8,docType:d,docTypeVersion:(b=a(i.DocTypeVersion,g))!=null?b:1,docTypeReadVersion:(d=a(i.DocTypeReadVersion,g))!=null?d:1}}}),null);
__d("isValidMKV",["Promise","readEBMLHeader"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function g(a){a=b("readEBMLHeader")(a);if(a==null)return!1;else return a.ebmlMaxIDLength===4&&a.ebmlMaxSizeLength>=1&&a.ebmlMaxSizeLength<=8&&a.docType==="matroska"}function a(a){return new(b("Promise"))(function(b,c){var d=new FileReader();d.onerror=function(){return c(d.error)};d.onload=function(){var a=d.result;a instanceof ArrayBuffer?b(g(a)):c()};d.readAsArrayBuffer(a)})}}),null);
__d("usePagesCometComposerMultiMediaRestrictions",["fbt","cometPushToast","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react");function a(a,c){var d=i.useCallback(function(a){a!=null&&a.map(function(a){return c({attachment:a,type:"REMOVE_MEDIA_ATTACHMENT_ITEM"})})},[c]);return i.useCallback(function(){if(a!=null){var c=a.filter(function(a){return a.fileType==="PHOTO"}),e=a.filter(function(a){return a.fileType==="VIDEO"});c.length>0&&e.length>0&&(e.length===1&&e[0].state==="NEW"&&!c.some(function(a){return a.state==="NEW"})?d(c):d(e),b("cometPushToast").cometPushSimpleToast(g._("Sorry, you can't add both photos and a video at the same time")));e.length>1&&(d(e.slice(1)),b("cometPushToast").cometPushSimpleToast(g._("Please select only one video file at a time.")))}},[a,d])}}),null);
__d("CometComposerHeadlessMediaUploaderImpl.react",["CometRelay","CometSphericalPhotoUtils","PagesCometComposerContext","Promise","cr:1506337","extractJPEGOrientationData","genDimensionsFromImageFile","genDimensionsFromVideoFile","genIsHEICFile","gkx","isValidMKV","promiseDone","react","recoverableViolation","useCometComposerLoggerDispatcher","usePagesCometComposerMultiMediaRestrictions"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.composerUploader,d=a.dispatch,e=a.mediaAttachments,f=a.mediaUploadStatuses,g=a.useOptimisticMediaPost,i=b("CometRelay").useRelayEnvironment(),j=b("useCometComposerLoggerDispatcher")(),k=h.useContext(b("PagesCometComposerContext")),l=b("usePagesCometComposerMultiMediaRestrictions")(e,d),m=h.useCallback(function(a){d(babelHelpers["extends"]({type:"MEDIA_UPLOAD_STARTED"},a))},[d]),n=h.useCallback(function(a){d(babelHelpers["extends"]({type:"MEDIA_UPLOAD_PROGRESS"},a))},[d]),o=h.useCallback(function(a){var b=f&&f[a.uploadID];b!=null&&b.resolveFileUpload({attachmentID:a.entID,attachmentType:a.attachmentType})},[f]),p=h.useCallback(function(a){d({entID:a.entID,imageURL:a.attachmentType==="PHOTO"?a.imageURL:void 0,type:"MEDIA_UPLOAD_SUCCESSFUL",uploadID:a.uploadID})},[d]),q=h.useCallback(function(a){d(babelHelpers["extends"]({type:"MEDIA_UPLOAD_FAILED"},a))},[d]);h.useEffect(function(){k!=null&&e!=null&&l();c.startedObserver.subscribe(m);c.progressObserver.subscribe(n);c.successObserver.subscribe(p);c.errorObserver.subscribe(q);g&&c.successObserver.subscribe(o);return function(){c.startedObserver.unsubscribe(m),c.progressObserver.unsubscribe(n),c.successObserver.unsubscribe(p),c.errorObserver.unsubscribe(q)}});var r=function(a){return a.state==="CLIENT_PROCESSING_COMPLETE"&&a.fileType!=="UNKNOWN"?[a.file,a.fileType]:null},s=h.useCallback(function(a){var b=a.map(function(a){return a.file&&((a=a.file)==null?void 0:a.uploadID)}).filter(Boolean);d({type:"MARK_UPLOADS_CLIENT_PROCESSING",uploadIDs:b});a.forEach(function(a){var b;return j({fields:{media_id:(b=(b=a.file)==null?void 0:b.uploadID)!=null?b:"",media_type:a.fileType},type:"MEDIA_UPLOAD_PROCESS_START"})})},[d,j]),t=h.useCallback(function(a){var c=a.file;if(c)return b("genIsHEICFile")(c).then(function(e){e&&d({type:"MARK_UPLOADS_AS_PHOTO",uploadIDs:[c==null?void 0:c.uploadID].filter(Boolean)});return b("Promise").resolve(a)});else return b("Promise").resolve(a)},[d]),u=h.useCallback(function(a){var c=a.file;if(c)return b("isValidMKV")(c).then(function(e){e&&d({type:"MARK_UPLOADS_AS_VIDEO",uploadIDs:[c==null?void 0:c.uploadID].filter(Boolean)});return b("Promise").resolve(a)});else return b("Promise").resolve(a)},[d]),v=h.useCallback(function(a){var c=a.file;return c?b("extractJPEGOrientationData")(c).then(function(c){c!=null&&c>0&&d({attachment:a,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"});return b("Promise").resolve(a)})["catch"](function(c){b("recoverableViolation")("An error occurred when parsing an uploaded image","comet_composer",{error:c});return b("Promise").resolve(a)}):b("Promise").resolve(a)},[d]),w=h.useCallback(function(a){var c=a.file?a.file:void 0,e=a.fileObjectURL,f;if(e!=null)switch(a.fileType){case"PHOTO":f=b("genDimensionsFromImageFile")(e);break;case"VIDEO":f=b("genDimensionsFromVideoFile")(e);break}else if(c!=null)switch(a.fileType){case"PHOTO":f=b("genDimensionsFromImageFile")(c);break;case"VIDEO":f=b("genDimensionsFromVideoFile")(c);break}else f=b("Promise").resolve({height:0,width:0});if(f!=null)return f.then(function(e){var f=e.height;e=e.width;d({attachment:a,height:f,type:"SET_MEDIA_ATTACHMENT_ITEM_DIMENSIONS",width:e});if(c!=null&&a.fileType==="PHOTO"&&e>=f*2)return b("CometSphericalPhotoUtils").maybeGenSphericalMetadata(c,i,e,f).then(function(b){b!=null&&d({attachment:a,sphericalEncoding:b,type:"SET_MEDIA_ATTACHMENT_ITEM_SPHERICAL_ENCODING"})})},function(){d({attachment:a,height:0,type:"SET_MEDIA_ATTACHMENT_ITEM_DIMENSIONS",width:0})})},[d,i]),x=h.useCallback(function(){var a=(e||[]).map(function(a){return a.state==="NEW"?a:null}).filter(Boolean);a.forEach(function(a){var c=a.file.uploadID;c!=null&&(j({fields:{media_id:c,media_type:a.fileType},type:"MEDIA_UPLOAD_FLOW_START"}),j({fields:{media_id:c,media_type:a.fileType},type:"MEDIA_UPLOAD_START"}));c=[];s([a]);a.fileType==="UNKNOWN"&&a.file?(c.push(t(a)),c.push(u(a))):a.fileType==="PHOTO"&&c.push(v(a));c.push(w(a));b("promiseDone")(b("Promise").all(c).then(function(){var b=[a.file.uploadID].filter(Boolean),c=a.fileType;d({type:"MEDIA_ATTACHMENT_CLIENT_PROCESSING_COMPLETED",uploadIDs:b});b.forEach(function(a){return j({fields:{media_id:a,media_type:c},type:"MEDIA_UPLOAD_PROCESS_SUCCESS"})})}))})},[w,t,u,v,d,j,s,e]),y=h.useCallback(function(){if(e!=null&&e.some(function(a){return a.state==="CLIENT_PROCESSING_COMPLETE"})){var a=e.filter(function(a){return a.state==="CLIENT_PROCESSING_COMPLETE"}).map(r).filter(Boolean);a.length>0&&(d({type:"QUEUE_UPLOADS",uploadIDs:a.map(function(a){var b=a[0];a[1];return b==null?void 0:b.uploadID}).filter(Boolean)}),c.upload(a))}},[c,d,e]),z=h.useCallback(function(){b("cr:1506337")!==null&&b("cr:1506337")(e,d)},[d,e]);h.useEffect(function(){x(),y(),b("gkx")("1488423")&&z()},[x,y,z]);return null}}),null);
__d("useComposerVideoUploaderConfig",["CometRelay","useComposerVideoUploaderConfigQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g;function a(a,c,d){a=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("useComposerVideoUploaderConfigQuery.graphql"),{actorID:(a=a)!=null?a:"",entryPoint:(a=c)!=null?a:"",targetID:(c=d)!=null?c:""});a=(c=a==null?void 0:(d=a.viewer)==null?void 0:d.comet_composer_video_uploader_config)!=null?c:"";d=a?JSON.parse(a):{};return d}}),null);
__d("CometComposerHeadlessMediaUploader.react",["Actor","CometComposerHeadlessMediaUploaderImpl.react","ComposerMediaFileUploader","GroupCometComposerContext","qex","react","useComposerVideoUploaderConfig","useComposerViewStateDispatcher","withComposerViewStatePart"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("qex")._("1526734")===!0,j=b("qex")._("1221850")===!0;function a(a){var c=a.creationSessionID,d=a.isWorkDraftingFor,e=a.mediaAttachments,f=a.mediaUploadLoggingMetadata,g=f.composerEntrypoint,k=f.source;f=a.mediaUploadStatuses;a=a.workDraftFor;var l=b("useComposerViewStateDispatcher")(),m=b("Actor").useActor();m=m[0];var n,o=h.useContext(b("GroupCometComposerContext"));o=o.groupID;(a==null?void 0:a.originalActorID)!=null&&o!=null&&(n=o);var p=b("useComposerVideoUploaderConfig")(m,String(g),n),q=i&&g==="feed";a=h.useMemo(function(){return babelHelpers["extends"]({},p,{composer_entry_point_ref:g,silent_file_validation:q,source:k})},[g,q,k,p]);o=b("ComposerMediaFileUploader").createOrGetInstance(m,a,c,d);return h.jsx(b("CometComposerHeadlessMediaUploaderImpl.react"),{composerUploader:o,dispatch:l,mediaAttachments:e,mediaUploadStatuses:f,useOptimisticMediaPost:j})}c=b("withComposerViewStatePart")(a,function(a){return{creationSessionID:a.creationSessionID,isWorkDraftingFor:a.workDraftFor!=null,mediaAttachments:a.mediaAttachments,mediaUploadStatuses:a.mediaUploadStatuses,workDraftFor:a.workDraftFor}});e.exports=c}),null);
__d("CometComposerFocusImage.react",["CometFeedFocusMedia.react","CometImage.react","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");c=.5;f.DEFAULT_FOCUS_X=c;d=.5;f.DEFAULT_FOCUS_Y=d;function a(a){var c=a.alt,d=a.focusX,e=a.focusY,f=a.imageHeight,g=a.imageWidth,i=a.onError,j=a.src;a=a.viewportAspectRatio;var k=h.useCallback(function(){i&&i();return void 0},[i]);return h.jsx("div",{className:"stjgntxs ni8dbmo4",children:h.jsx(b("CometFeedFocusMedia.react"),{focusX:d,focusY:e,mediaHeight:f,mediaWidth:g,viewportAspectRatio:a,children:function(a){return h.jsx(b("CometImage.react"),{alt:c,onError:k,src:j,xstyle:a})}})})}e=h.memo(a);f.CometComposerFocusImage=e}),null);
__d("CometPhotoLayoutMediaOverlay.react",["fbt","TetraText.react","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react");function a(a){a=a.numItemsNotShown;return i.jsx("div",{className:"hzruof5a taijpn5t cbu4d94t j83agx80 sx5rzos5 bp9cbjyn kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 rq0escxv i09qtzwb",children:i.jsx(b("TetraText.react"),{align:"center",color:"white",type:"entityHeaderHeadline2",children:g._("+{num}",[g._param("num",a)])})})}}),null);
__d("ComposerCometPhotoLayoutMediaAttachmentContext",["CometComposerFocusImage.react","react"],(function(a,b,c,d,e,f){"use strict";var g;a=g||b("react");c={adID:null,focusX:b("CometComposerFocusImage.react").DEFAULT_FOCUS_X,focusY:b("CometComposerFocusImage.react").DEFAULT_FOCUS_Y,mediasetToken:null,numPhotosNotShown:0,shouldRoundCorners:!0,shouldShowOverlay:!1,viewportAspectRatio:1};d=a.createContext(c);e.exports=d}),null);
__d("CometComposerPhotoLayoutItem.react",["CometBackgroundImage.react","CometComposerFocusImage.react","CometPhotoLayoutMediaOverlay.react","ComposerCometPhotoLayoutMediaAttachmentContext","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.alt,d=a.height,e=a.numPhotosNotShown,f=a.onError,g=a.shouldShowOverlay,i=a.src,j=a.viewportAspectRatio;a=a.width;var k=h.useContext(b("ComposerCometPhotoLayoutMediaAttachmentContext")),l=k.focusX;k=k.focusY;if(d==null||a==null)return h.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:i});else return h.jsxs(h.Fragment,{children:[h.jsx(b("CometComposerFocusImage.react").CometComposerFocusImage,{alt:c,focusX:l,focusY:k,imageHeight:d,imageWidth:a,onError:f,src:i,viewportAspectRatio:j}),g===!0&&e!=null?h.jsx(b("CometPhotoLayoutMediaOverlay.react"),{numItemsNotShown:e}):null]})}}),null);
__d("EntPhotoCollageItem.react",["CometBackgroundImage.react","CometComposerPhotoLayoutItem.react","CometRelay","ComposerCometPhotoLayoutMediaAttachmentContext","ComposerCometSelectedPhotoLayoutContext","EntPhotoCollageItem_media.graphql","composerMediaAttachmentReducer","react","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function a(a){var c;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")(),e=b("CometRelay").useFragment(g!==void 0?g:g=b("EntPhotoCollageItem_media.graphql"),a.media);i.useEffect(function(){var b,c;b=e==null?void 0:(b=e.image)==null?void 0:b.height;c=e==null?void 0:(c=e.image)==null?void 0:c.width;b!=null&&c!=null&&d({entID:a.id,height:b,type:"SET_MEDIA_ATTACHMENT_ITEM_CDN_DIMENSIONS",width:c})},[e,d,a.id]);c=e==null?void 0:(c=e.image)==null?void 0:c.uri;var f=i.useContext(b("ComposerCometSelectedPhotoLayoutContext")),h=i.useContext(b("ComposerCometPhotoLayoutMediaAttachmentContext")),j=h.numPhotosNotShown,k=h.setFocusX,l=h.setFocusY,m=h.shouldShowOverlay;h=h.viewportAspectRatio;var n=e==null?void 0:e.image,o=n==null?void 0:n.height;n=n==null?void 0:n.width;var p=e==null?void 0:e.focus,q=p==null?void 0:p.x,r=p==null?void 0:p.y;i.useEffect(function(){k&&l&&q!=null&&r!=null&&(k(q),l(r))},[k,l,q,r]);if(c==null)return null;else if(!!f.layout&&f.layout!=="classic")return i.jsx(b("CometComposerPhotoLayoutItem.react"),{height:o,numPhotosNotShown:j,shouldShowOverlay:m,src:c,viewportAspectRatio:h,width:n});else return i.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c})}}),null);
__d("EntPhotoCollageItemContainer.react",["CometRelay","EntPhotoCollageItem.react","EntPhotoCollageItemContainerQuery.graphql","WebPixelRatio","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function a(a){var c=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("EntPhotoCollageItemContainerQuery.graphql"),{id:a.id,scale:b("WebPixelRatio").get()});return i.jsx(b("EntPhotoCollageItem.react"),{id:a.id,media:c==null?void 0:c.node})}}),null);
__d("CDNPreviewPhotoCollageItem.react",["CollageItemFallback.react","CometPlaceholder.react","EntPhotoCollageItemContainer.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.entID,d=a.filename,e=a.fileType;a=a.percentComplete;e=h.jsx(b("CollageItemFallback.react"),{fileType:e,filename:d,percentComplete:a});if(c!=null)return h.jsx(b("CometPlaceholder.react"),{fallback:e,children:h.jsx(b("EntPhotoCollageItemContainer.react"),{id:c})});else return e}}),null);
__d("OptimisticallyUploadedPhotoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CometBackgroundImage.react","JSResourceForInteraction","PlayableCollageItemOverlay.react","composerMediaAttachmentReducer","lazyLoadComponent","react","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("lazyLoadComponent")(b("JSResourceForInteraction")("CometComposerSphericalMediaGyroIndicator.react").__setRef("OptimisticallyUploadedPhotoCollageItem.react"));function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.sphericalEncoding?h.jsx(i,{}):null;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?h.jsxs(h.Fragment,{children:[h.jsx(b("CometBackgroundImage.react"),{draggable:!1,onError:function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:c.fileObjectURL}),c.fileType==="VIDEO"?h.jsx(b("PlayableCollageItemOverlay.react"),{}):null,a]}):h.jsxs(h.Fragment,{children:[h.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.entID,fileType:c.fileType,filename:c.fileName,percentComplete:c.percentComplete}),a]})}}),null);
__d("OptimisticallyUploadedVideoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CircularProgressBar.react","PlayableCollageItemOverlay.react","composerMediaAttachmentReducer","react","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.fileObjectURL;var e=c.percentComplete;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?h.jsxs(h.Fragment,{children:[h.jsx("video",{className:"k4urcfbm bixrwtb6 datstx6m",onLoadedMetadata:function(a){a.target.videoWidth===0&&a.target.videoHeight===0&&d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:a}),h.jsx(b("PlayableCollageItemOverlay.react"),{}),e!=null&&h.jsx(b("CircularProgressBar.react"),{percentComplete:e*100})]}):h.jsx(b("CDNPreviewPhotoCollageItem.react"),{fileType:c.fileType,filename:c.fileName,percentComplete:c.percentComplete})}}),null);
__d("OptimisticallyUploadedCollageItem.react",["OptimisticallyUploadedPhotoCollageItem.react","OptimisticallyUploadedVideoCollageItem.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.attachment;var c=a.fileType==="PHOTO"||a.fileType==="UNKNOWN"||a.fileType==="VIDEO"&&a.fileMimeType==="image/gif";return c?h.jsx(b("OptimisticallyUploadedPhotoCollageItem.react"),{attachment:a}):h.jsx(b("OptimisticallyUploadedVideoCollageItem.react"),{attachment:a})}}),null);
__d("PreexistingPhotoLayoutItem.react",["CDNPreviewPhotoCollageItem.react","CometPlaceholder.react","JSResourceForInteraction","composerMediaAttachmentReducer","lazyLoadComponent","react","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("lazyLoadComponent")(b("JSResourceForInteraction")("CometComposerSphericalMediaGyroIndicator.react").__setRef("PreexistingPhotoLayoutItem.react"));function a(a){a=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var c=a.sphericalEncoding?h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{})}):null;return h.jsxs(h.Fragment,{children:[h.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:a.entID,fileType:a.fileType,filename:null}),c]})}}),null);
__d("PreexistingPhotoCollageItem.react",["CometBackgroundImage.react","PreexistingPhotoLayoutItem.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.attachment;return a.fileType!=="UNKNOWN"?h.jsx(b("PreexistingPhotoLayoutItem.react"),{attachment:a}):h.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:a.url})}}),null);
__d("UploadingOrUploadedPhotoCollageItem.react",["CDNPreviewPhotoCollageItem.react","CometBackgroundImage.react","CometPlaceholder.react","JSResourceForInteraction","PlayableCollageItemOverlay.react","composerMediaAttachmentReducer","lazyLoadComponent","react","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("lazyLoadComponent")(b("JSResourceForInteraction")("CometComposerSphericalMediaGyroIndicator.react").__setRef("UploadingOrUploadedPhotoCollageItem.react"));function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.sphericalEncoding?h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{})}):null;var e=c.file;return c.fileObjectURL!=null&&c.useCDNPreview!==!0?h.jsxs(h.Fragment,{children:[h.jsx(b("CometBackgroundImage.react"),{alt:e.name,draggable:!1,onError:function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},src:c.fileObjectURL}),c.fileType==="VIDEO"?h.jsx(b("PlayableCollageItemOverlay.react"),{}):null,a]}):h.jsxs(h.Fragment,{children:[h.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.state==="UPLOADED"?c.entID:void 0,fileType:c.fileType,filename:e.name}),a]})}}),null);
__d("UploadingOrUploadedPhotoLayoutItem.react",["CDNPreviewPhotoCollageItem.react","CometComposerPhotoLayoutItem.react","CometPlaceholder.react","ComposerCometPhotoLayoutMediaAttachmentContext","JSResourceForInteraction","composerMediaAttachmentReducer","lazyLoadComponent","react","useComposerViewStateDispatcher","useComposerViewStateReducer"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("lazyLoadComponent")(b("JSResourceForInteraction")("CometComposerSphericalMediaGyroIndicator.react").__setRef("UploadingOrUploadedPhotoLayoutItem.react")),j=500,k=261;function a(a){var c=a.attachment;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));var d=b("useComposerViewStateDispatcher")();a=c.sphericalEncoding?h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{})}):null;var e=function(){d({attachment:c,type:"SET_MEDIA_ATTACHMENT_ITEM_USE_CDN_PREVIEW"})},f=c.width!=null?c.width:null,g=c.height!=null?c.height:null;(f==null||g==null)&&(f=j,g=k);var l=h.useContext(b("ComposerCometPhotoLayoutMediaAttachmentContext")),m=l.numPhotosNotShown,n=l.shouldShowOverlay;l=l.viewportAspectRatio;var o=c.file;if(c.useCDNPreview!==!0&&c.fileObjectURL!=null)return h.jsxs("div",{children:[h.jsx(b("CometComposerPhotoLayoutItem.react"),{alt:o.name,height:g,numPhotosNotShown:m,onError:e,shouldShowOverlay:n,src:c.fileObjectURL,viewportAspectRatio:l,width:f}),a]});else return h.jsxs(h.Fragment,{children:[h.jsx(b("CDNPreviewPhotoCollageItem.react"),{entID:c.state==="UPLOADED"?c.entID:void 0,fileType:c.fileType,filename:o.name}),a]})}}),null);
__d("CDNPreviewVideoCollageItem.react",["CollageItemFallback.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.filename;a=a.fileType;return h.jsx(b("CollageItemFallback.react"),{fileType:a,filename:c})}}),null);
__d("UploadingOrUploadedVideoCollageItem.react",["CDNPreviewVideoCollageItem.react","CometVideoEditorUtils.react","PlayableCollageItemOverlay.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.attachment;if(a.fileType==="VIDEO"){var c=a.file,d=b("CometVideoEditorUtils.react").getThumbnailURLFromVideoMetadata(a);return a.fileObjectURL!=null&&a.useCDNPreview!==!0?h.jsxs(h.Fragment,{children:[h.jsx("video",{className:"k4urcfbm bixrwtb6 datstx6m",poster:d,src:a.fileObjectURL}),h.jsx(b("PlayableCollageItemOverlay.react"),{})]}):h.jsx(b("CDNPreviewVideoCollageItem.react"),{entID:a.state==="UPLOADED"?a.entID:void 0,fileType:a.fileType,filename:c.name})}else return null}}),null);
__d("UploadingOrUploadedCollageItem.react",["ComposerCometSelectedPhotoLayoutContext","UploadingOrUploadedPhotoCollageItem.react","UploadingOrUploadedPhotoLayoutItem.react","UploadingOrUploadedVideoCollageItem.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.attachment;var c=a.fileType==="PHOTO"||a.fileType==="VIDEO"&&a.file.type==="image/gif",d=h.useContext(b("ComposerCometSelectedPhotoLayoutContext"));d=!!d.layout&&d.layout!=="classic";if(c)return d?h.jsx(b("UploadingOrUploadedPhotoLayoutItem.react"),{attachment:a}):h.jsx(b("UploadingOrUploadedPhotoCollageItem.react"),{attachment:a});else return h.jsx(b("UploadingOrUploadedVideoCollageItem.react"),{attachment:a})}}),null);
__d("CometComposerMediaAttachmentItem.react",["CollageItemFallback.react","CometBackgroundImage.react","CometComposerRemoveMediaAttachmentItemButton.react","CometPlaceholder.react","CometVideoEditorUtils.react","JSResourceForInteraction","OptimisticallyUploadedCollageItem.react","PlayableCollageItemOverlay.react","PreexistingPhotoCollageItem.react","TetraText.react","UploadingOrUploadedCollageItem.react","lazyLoadComponent","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("lazyLoadComponent")(b("JSResourceForInteraction")("CometComposerSphericalMediaGyroIndicator.react").__setRef("CometComposerMediaAttachmentItem.react"));function a(a){var c=a.attachment;a=a.withRemoveButton;var d=a===void 0?!0:a;a=c.sphericalEncoding?h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{})}):null;var e=function(a){return d?h.jsx(b("CometComposerRemoveMediaAttachmentItemButton.react"),{attachment:a}):null};switch(c.state){case"PREEXISTING":var f;switch(c.fileType){case"VIDEO":var g=b("CometVideoEditorUtils.react").getThumbnailURLFromVideoMetadata(c);f=h.jsxs(h.Fragment,{children:[h.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:g.length>0?g:c.imageURL}),h.jsx(b("PlayableCollageItemOverlay.react"),{}),a]});break;case"PHOTO":f=h.jsx(b("PreexistingPhotoCollageItem.react"),{attachment:c});break;default:f=h.jsxs(h.Fragment,{children:[h.jsx(b("CometBackgroundImage.react"),{draggable:!1,src:c.url}),a]});break}return h.jsxs(h.Fragment,{children:[f,e(c)]});case"NEW":case"CLIENT_PROCESSING":case"CLIENT_PROCESSING_COMPLETE":return h.jsxs(h.Fragment,{children:[h.jsx(b("CollageItemFallback.react"),{fileType:c.fileType,filename:c.file.name}),a]});case"QUEUED":case"UPLOADING":case"UPLOADED":return c.file==null?null:h.jsxs(h.Fragment,{children:[h.jsx(b("UploadingOrUploadedCollageItem.react"),{attachment:c}),c.state==="UPLOADED"?e(c):h.jsx("div",{className:"g7nl5sj3 kr520xx4 pmk7jnqg datstx6m n7fi1qx3 m96f97by",style:{width:(1-(c.percentComplete||0))*100+"%"},children:e(c)})]});case"FAILED":return h.jsxs(h.Fragment,{children:[c.file.name,c.error!=null?h.jsxs(h.Fragment,{children:[h.jsx("br",{}),h.jsx(b("TetraText.react"),{color:"negative",type:"body4",children:c.error})]}):null]});case"OPTIMISTIC_UPLOADED":return c.fileObjectURL==null?null:h.jsx(b("OptimisticallyUploadedCollageItem.react"),{attachment:c});default:return null}}}),null);
__d("CometComposerMediaAttachmentItemContainer.react",["CometComposerMediaAttachmentItem.react","qex","react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react"),j=b("qex")._("1138950");function a(a){var c=i.jsx(b("CometComposerMediaAttachmentItem.react"),babelHelpers["extends"]({},a));return c?i.jsx("div",{className:(h||(h=b("stylex"))).dedupe({"overflow-wrap-1":"jm1wdb64","position-1":"l9j0dhe7"},a.attachment.state==="failed"?{"border-top-color-0.4":"jw3uvs1e","border-end-color-0.4":"hmw3o7ox","border-bottom-color-0.4":"ku5f423u","border-start-color-0.4":"a64ryyup"}:null,j===!0?{"height-1":"datstx6m","width-1":"k4urcfbm"}:{"border-top-0.3":"dwg5866k","border-end-0.3":"ccnbzhu1","border-bottom-0.3":"eip75gnj","border-start-0.3":"tr4kgdav","flex-grow-1":"kb5gq1qc","flex-shrink-1":"pfnyh3mw","height-1":"qzj7cv8z","margin-top-1":"rs0gx3tq","margin-end-1":"fv0vnmcu","margin-bottom-1":"dicw6rsg","margin-start-1":"ggphbty4","width-1":"gjzvkazv","border-top-color-0.4":null,"border-bottom-color-0.4":null}),children:c}):null}}),null);
__d("CollageLayoutConfig",[],(function(a,b,c,d,e,f){var g=4;a=function(){function a(a,b,c,d){c===void 0&&(c=g),this.$2=c,this.$3=b,this.$5=d,this.$6(a)}var b=a.prototype;b.getItemStyleInfos=function(){return this.$1};b.getIndexForPoint=function(a,b){var c=this.$1.findIndex(function(c){return c.left<=a&&c.top<=b&&c.left+c.width>=a&&c.top+c.height>=b});return c===-1?null:c};b.getCalculatedHeight=function(){return this.$4};b.getSpacing=function(){return this.$2};b.getWidth=function(){return this.$3};b.$6=function(a){var b=this,c=this.$7(a),d=this.$8(a),e=this.$2*(d-1),f=Math.ceil((this.$3-e)/d);this.$4=this.$5||(f+this.$2)*c-this.$2;e=this.$2*(c-1);var g=Math.ceil((this.$4-e)/c);this.$1=[];a.forEach(function(a){a={left:(f+b.$2)*a.x,top:(g+b.$2)*a.y,width:(f+b.$2)*a.width-b.$2,height:(g+b.$2)*a.height-b.$2};a.left+a.width>b.$3&&(a.width=b.$3-a.left);b.$1.push(a)})};b.$8=function(a){var b=0;a.forEach(function(a){b=Math.max(b,a.x+a.width)});return b};b.$7=function(a){var b=0;a.forEach(function(a){b=Math.max(b,a.y+a.height)});return b};return a}();e.exports=a}),null);
__d("useMediaCollage",["CollageLayoutConfig","CometFeedStoryMediaLayoutConstants","ReactComposerCollageLayoutSelection","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a,c,d){var e=h.useState(null),f=e[0],g=e[1];e=h.useRef(new Map());a=a.reduce(function(b,c,a){c.width!=null&&c.height!=null?b.set(a,[c.width,c.height]):b.set(a,[0,0]);return b},new Map());if(a.size!==e.current.size)e.current=a;else{var i=!1;for(var j=a,k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];var o=m[0];m=m[1];n=e.current.get(n)||[void 0,void 0];var p=n[0];n=n[1];i=i||o!==p||m!==n}i&&(e.current=a)}var q=e.current,r=h.useCallback(function(){if(q.size===1){var a=q.get(0)||[400,400];a=Math.max(a[0]/a[1],b("CometFeedStoryMediaLayoutConstants").DEFAULT_MIN_ASPECT_RATIO);g(new(b("CollageLayoutConfig"))([{height:1,width:1,x:0,y:0}],c,d,c/a))}else if(q.size>1){a=b("ReactComposerCollageLayoutSelection").getBestUserCollageLayout(q);var e=[];a.forEach(function(a,b){e.push({height:a.getHeight(),width:a.getWidth(),x:a.getLeft(),y:a.getTop()})});g(new(b("CollageLayoutConfig"))(e,c,d))}else g(null)},[c,q,d]);h.useEffect(function(){q.size>0&&r()},[r,q]);return f}}),null);
__d("ComposerCometMediaAttachmentClassicLayout.react",["fbt","CometComposerHeadlessMediaUploader.react","CometComposerMediaAttachmentItemContainer.react","CometPlaceholder.react","composerMediaAttachmentReducer","react","useComposerViewStateReducer","useMediaCollage"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react"),j=5;c=500;d=16;f=1;var k=c-d*2-f*2,l=466;function a(a){var c=a.mediaAttachments,d=a.mediaUploadLoggingMetadata,e=a.width;e=e===void 0?k:e;a=a.withoutUploader;e=b("useMediaCollage")(c,e,2);var f=e!=null?e.getItemStyleInfos():[],h=(c||[]).length-f.length;b("useComposerViewStateReducer")(b("composerMediaAttachmentReducer"));return i.jsxs("div",{style:{height:e!=null?e.getCalculatedHeight()+"px":l},children:[a!==!0&&i.jsx(b("CometPlaceholder.react"),{fallback:null,children:i.jsx(b("CometComposerHeadlessMediaUploader.react"),{mediaUploadLoggingMetadata:d})}),f.map(function(a,d){var e=(c||[])[d];if(e==null)return null;var f=d===j-1&&h>0;return i.jsxs("div",{className:"pmk7jnqg stjgntxs ni8dbmo4 taijpn5t j83agx80 bp9cbjyn","data-testid":void 0,style:a,children:[i.jsx(b("CometComposerMediaAttachmentItemContainer.react"),{attachment:e,withRemoveButton:!1},"media-"+d),f?i.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg taijpn5t cbu4d94t n7fi1qx3 j83agx80 i09qtzwb sx5rzos5 bp9cbjyn",children:i.jsx("div",{className:"oqcyycmt lrazzd5p mhxlubs3 qrtewk5h",children:g._("+{num}",[g._param("num",h+1)])})}):null]},"media-"+d+"-container")})]})}}),null);
__d("cometComposerCheckMediaAttachmentsForPhoto3d",["QPLUserFlow"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c){if(!a)return;var d=a.reduce(function(a,b){b.state==="UPLOADED"&&b.fileType==="PHOTO"&&a.push(b);return a},[]);if(a.length!==2||d.length!==2)return;a=g(d);d=h(a);if(d==null)return;b("QPLUserFlow").start(37631558);b("QPLUserFlow").addPoint(37631558,"three_d_photo_creation_data_provided");c({colorImageIds:d.colorImageIds,depthImageIds:d.depthImageIds,placeholderImage:d.placeholderImage,type:"SET_PHOTO3D_CREATION_DATA"});c({attachmentType:"PHOTO3D",type:"ACTIVATE_ATTACHMENT_TYPE"})}function g(a){var b={},c=["jpg","jpeg","png"];a.forEach(function(a){var d=a.file.name;if(!d)return;var e=d.lastIndexOf(".");if(e<0)return;var f=d.split(".").pop().toLowerCase();if(!c.includes(f))return;f=d.substring(0,e).toLowerCase();d=f.split("_");if(d.length>1&&d.pop().toLowerCase()==="depth"){e=d.join("_");e in b||(b[e]={colorImage:null,depthImage:null});b[e].depthImage=a}else f in b||(b[f]={colorImage:null,depthImage:null}),b[f].colorImage=a});return b}function h(a){var b=Object.keys(a).sort();if(b.length===0)return null;var c=[],d=[],e=null;b.forEach(function(b){b=a[b];var f=b.colorImage;b=b.depthImage;if(!f||!b)return null;var g=f.entID;b=b.entID;if(g==null||b==null)return null;e==null&&(e=f);c.push(g);d.push(b)});return c.length===0||c.length!==d.length||e===null?null:{colorImageIds:c,depthImageIds:d,placeholderImage:e}}}),null);