if (self.CavalryLogger) { CavalryLogger.start_js(["V8dEpHz"]); }

__d("useResolvedVideoPlayerConfigs_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useResolvedVideoPlayerConfigs_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_static_config",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_context_sensitive_config",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("TV2VideoExperienceQuery.graphql",["CometTextWithEntitiesRelay_textWithEntities$normalization.graphql","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"renderLocation"},c={defaultValue:null,kind:"LocalArgument",name:"scale"},d={defaultValue:null,kind:"LocalArgument",name:"video_id"},e=[{kind:"Variable",name:"id",variableName:"video_id"}],f={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[g,{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_seen_by_viewer",storageKey:null}],storageKey:null}],storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},k=[h,{alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"representation_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mime_codec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"segment_type",storageKey:null}];return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"TV2VideoExperienceQuery",selections:[{alias:null,args:e,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"TV2VideoExperience_video"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,c,a],kind:"Operation",name:"TV2VideoExperienceQuery",selections:[{alias:null,args:e,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"connected_tv_cast_receiver_v2_experiments",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[{args:null,fragment:b("CometTextWithEntitiesRelay_textWithEntities$normalization.graphql"),kind:"FragmentSpread"},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"creation_story",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[f,{kind:"TypeDiscriminator",abstractKey:"__isActor"},g,{kind:"InlineFragment",selections:[{alias:"profile_url",args:null,kind:"ScalarField",name:"url",storageKey:null},h],type:"Entity",abstractKey:"__isEntity"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"pages_story_bucket_v2",plural:!1,selections:[f,g,i],storageKey:null}],type:"Page",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"DirectInboxBroadcastBucketConnection",kind:"LinkedField",name:"story_bucket",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThreadBucket",kind:"LinkedField",name:"nodes",plural:!0,selections:[g,i],storageKey:null}],storageKey:"story_bucket(first:1)"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Literal",name:"scale",value:2},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[j,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null}],storageKey:"profile_picture(height:60,scale:2,width:60)"}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"location",variableName:"renderLocation"}],concreteType:"CometStorySections",kind:"LinkedField",name:"comet_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["CometFeedStoryCampusDirectedTitleStrategy","GeminiFeedStoryQATitleStrategy","CometFeedStoryCommunityAttributionTitleStrategy","CometFeedStoryCommunityViewDirectedTitleStrategy","CometFeedStoryGroupsTabDirectedTitleStrategy","CometFeedStoryDirectedTitleStrategy","CometFeedStoryViaTitleStrategy","CometFeedStoryTitleWithActorStrategy","CometFeedStoryDefaultTitleStrategy"]}],concreteType:null,kind:"LinkedField",name:"title",plural:!1,selections:[f,{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryCampusDirectedTitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryCampusDirectedTitleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"GeminiFeedStoryQATitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"GeminiFeedStoryQATitleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryCommunityAttributionTitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryCommunityAttributionTitleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryCommunityViewDirectedTitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryCommunityViewDirectedTitleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryGroupsTabDirectedTitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryGroupsTabDirectedTitleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryDirectedTitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryDirectedTitleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryViaTitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryViaTitleStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryTitleWithActorStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryTitleWithActorStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometFeedStoryTitleSection_story",fragmentName:"CometFeedStoryDefaultTitleStrategy_contextTitle",fragmentPropName:"contextTitle",kind:"ModuleImport"}],type:"CometFeedStoryDefaultTitleStrategy",abstractKey:null}],storageKey:'title(supported:["CometFeedStoryCampusDirectedTitleStrategy","GeminiFeedStoryQATitleStrategy","CometFeedStoryCommunityAttributionTitleStrategy","CometFeedStoryCommunityViewDirectedTitleStrategy","CometFeedStoryGroupsTabDirectedTitleStrategy","CometFeedStoryDirectedTitleStrategy","CometFeedStoryViaTitleStrategy","CometFeedStoryTitleWithActorStrategy","CometFeedStoryDefaultTitleStrategy"])'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_tracking",storageKey:null},g],storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcaster_origin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_streaming",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_live_trace_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_looping",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_video_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"loop_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spherical_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unsupported_browser_message",storageKey:null},{alias:null,args:null,concreteType:"MusicVideoMetadata",kind:"LinkedField",name:"pmv_metadata",plural:!1,selections:[f,g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_ncsr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permalink_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"captions_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dash_prefetch_experimental",storageKey:null},{alias:null,args:null,concreteType:"VideoCaptionLocale",kind:"LinkedField",name:"video_available_captions_locales",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"localized_creation_method",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoPrefetchResources",kind:"LinkedField",name:"dash_prefetch_resources",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"audio",plural:!0,selections:k,storageKey:null},{alias:null,args:null,concreteType:"VideoPrefetchResource",kind:"LinkedField",name:"video",plural:!0,selections:k,storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"context",value:"DEFAULT"},{kind:"Literal",name:"supported",value:["CometVideoPlayerOzImplementation","CometVideoPlayerShakaImplementation","CometVideoPlayerProgressiveImplementation"]}],concreteType:null,kind:"LinkedField",name:"comet_video_player_implementations",plural:!0,selections:[f,{kind:"InlineFragment",selections:[{documentName:"useRelay3DVideoImplementations_video",fragmentName:"useRelay3DOzImplementation_implementation",fragmentPropName:"implementation",kind:"ModuleImport"}],type:"CometVideoPlayerOzImplementation",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useRelay3DVideoImplementations_video",fragmentName:"useRelay3DShakaImplementation_implementation",fragmentPropName:"implementation",kind:"ModuleImport"}],type:"CometVideoPlayerShakaImplementation",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"useRelay3DVideoImplementations_video",fragmentName:"useRelay3DProgressiveImplementation_implementation",fragmentPropName:"implementation",kind:"ModuleImport"}],type:"CometVideoPlayerProgressiveImplementation",abstractKey:null}],storageKey:'comet_video_player_implementations(context:"DEFAULT",supported:["CometVideoPlayerOzImplementation","CometVideoPlayerShakaImplementation","CometVideoPlayerProgressiveImplementation"])'},{alias:null,args:null,kind:"ScalarField",name:"can_use_oz",storageKey:null},{alias:"playable_url_dash",args:[{kind:"Literal",name:"scrubbing_preference",value:"MPEG_DASH"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(scrubbing_preference:"MPEG_DASH")'},{alias:null,args:null,kind:"ScalarField",name:"dash_manifest",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_quality_preference",storageKey:null},{alias:null,args:null,concreteType:"VideoPlayerShakaLiveP2PInit",kind:"LinkedField",name:"video_player_shaka_live_p2p_init",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"json_encoded_video_data",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null},{alias:"playable_url_quality_hd",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},{alias:null,args:null,concreteType:"SphericalVideoFallbackUrls",kind:"LinkedField",name:"spherical_video_fallback_urls",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sd",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_gaming_video",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_menu_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fbls_tier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_latency_sensitive_broadcast",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_static_config",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comet_video_player_context_sensitive_config",storageKey:null},{alias:null,args:null,concreteType:"VideoPlayerShakaPerformanceLoggerInit",kind:"LinkedField",name:"video_player_shaka_performance_logger_init",plural:!1,selections:[{documentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_video",fragmentName:"useVideoPlayerShakaPerformanceLoggerRelayImpl_init",fragmentPropName:"init",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_player_shaka_performance_logger_should_sample",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoplay_gating_result",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_autoplay",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"drm_info",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettings",kind:"LinkedField",name:"p2p_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ticket",storageKey:null},{alias:null,args:null,concreteType:"VideoP2PSettingsConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"delay_p2p_until_play",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"disable_hivejava_for_livevc",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoHiveInitializationOptions",kind:"LinkedField",name:"hive_initialization_options",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoHiveInitializationOptionHiveJava",kind:"LinkedField",name:"hive_java",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_version",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hive_tech_order",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"debug_level",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AudioSettings",kind:"LinkedField",name:"audio_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"video_volume_setting",storageKey:null},g],storageKey:null},{alias:null,args:null,concreteType:"CaptionsSettings",kind:"LinkedField",name:"captions_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"always_show_captions",storageKey:null},g],storageKey:null},{alias:null,args:null,concreteType:"VideoBroadcastLowLatencyConfig",kind:"LinkedField",name:"broadcast_low_latency_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ll_desired_latency_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ll_latency_tolerance_ms",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audio_availability",storageKey:null},{alias:null,args:null,concreteType:"VideoMutedSegment",kind:"LinkedField",name:"muted_segments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"mute_start_time_in_sec",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mute_end_time_in_sec",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SphericalVideoRenderer",kind:"LinkedField",name:"spherical_video_renderer",plural:!1,selections:[{documentName:"VideoPlayerRelay_video_spherical_video_renderer",fragmentName:"VideoPlayerSphericalRelay_sphericalVideoRenderer",fragmentPropName:"sphericalVideoRenderer",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"InstreamVideoAdBreaks",kind:"LinkedField",name:"instream_video_ad_breaks_comet",plural:!1,selections:[{documentName:"VideoPlayerRelay_video_instream_video_ad_breaks_comet",fragmentName:"InstreamVideoAdBreaksPlayer_adBreaks",fragmentPropName:"adBreaks",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"preferred_thumbnail",plural:!1,selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[j],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"image_preview_payload",storageKey:null},g],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"selected_latency_setting",storageKey:null}]}],storageKey:null}]},params:{id:"3784185391616683",metadata:{},name:"TV2VideoExperienceQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("TV2VideoExperienceUpNextInterstitial_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TV2VideoExperienceUpNextInterstitial_video",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"creation_story",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actors",plural:!0,selections:[{args:[{kind:"Literal",name:"height",value:60},{kind:"Literal",name:"scale",value:2},{kind:"Literal",name:"width",value:60}],kind:"FragmentSpread",name:"TetraProfilePhotoForActor_actor"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedStoryTitleSection_story"}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("TV2VideoExperience_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TV2VideoExperience_video",selections:[{args:null,kind:"FragmentSpread",name:"useTV2ExperimentsRelayToAppState_video"},{args:null,kind:"FragmentSpread",name:"TV2VideoExperienceUpNextInterstitial_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerRelay_video"}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useTV2ExperimentsRelayToAppState_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useTV2ExperimentsRelayToAppState_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"connected_tv_cast_receiver_v2_experiments",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("useResolvedVideoPlayerConfigs",["CometRelay","VideoPlayerConnectionQuality","VideoPlayerOzWWWGlobalConfig","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaConfig","cr:1990345","react","useResolvedVideoPlayerConfigs_video.graphql","useStable"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function a(a,c){c=c.adClientToken;a=b("CometRelay").useFragment(g!==void 0?g:g=b("useResolvedVideoPlayerConfigs_video.graphql"),a);var d=a.comet_video_player_context_sensitive_config,e=a.comet_video_player_static_config;a=a.is_spherical;var f=c!=null,h=a===!0,j=b("useStable")(function(){var a=null;if(e!=null&&d!=null){var c=JSON.parse(e),g=JSON.parse(d);a={contextSensitiveValues:g,staticValues:c}}return new(b("VideoPlayerShakaConfig"))({connection_quality:b("VideoPlayerConnectionQuality").evaluate(b("cr:1990345")!=null?function(){return b("cr:1990345").getBandwidth(b("VideoPlayerOzWWWGlobalConfig"))}:b("VideoPlayerShakaBandwidthEstimator").getBandwidth),content_category:"general",is_ad:f,is_live:!1,is_spherical:h,latency_level:"normal",player_format:"inline",servable_via_fmbs:!1},null,a)});i.useEffect(function(){j.setContext("is_ad",f)},[j,f]);i.useEffect(function(){j.setContext("is_spherical",h)},[j,h]);return j}}),null);
__d("ChromecastReceiver",[],(function(b,c,d,e,f,g){(function(){"use strict";var c=function(b,c){function d(){}d.prototype=c.prototype;b.prototype=new d();b.prototype.constructor=b;for(var e in c)if(Object.defineProperties){d=Object.getOwnPropertyDescriptor(c,e);d&&Object.defineProperty(b,e,d)}else b[e]=c[e]},d="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)},e="undefined"!=typeof window&&window===this?this:"undefined"!=typeof b&&null!=b?b:this,f=function(){f=function(){},e.Symbol||(e.Symbol=h)},g=0,h=function(b){return"jscomp_symbol_"+(b||"")+g++},i=function(){f();var b=e.Symbol.iterator;b||(b=e.Symbol.iterator=e.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&d(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return j(this)}});i=function(){}},j=function(b){var c=0;return k(function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}})},k=function(b){i();b={next:b};b[e.Symbol.iterator]=function(){return this};return b},ba=function(b){i();var c=b[Symbol.iterator];return c?c.call(b):j(b)},l=this,m=function(b){return void 0!==b},n=function(){},o=function(b){b.$=function(){return b.Qb?b.Qb:b.Qb=new b()}},ca=function(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==c&&"undefined"==typeof b.call)return"object";return c},da=function(b){var c=ca(b);return"array"==c||"object"==c&&"number"==typeof b.length},p=function(b){return"string"==typeof b},q=function(b){return"number"==typeof b},r=function(b){return"function"==ca(b)},ea=function(b){var c=typeof b;return"object"==c&&null!=b||"function"==c},fa=function(b,c,d){return b.call.apply(b.bind,arguments)},ga=function(b,c,d){if(!b)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}},s=function(b,c,d){s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ga;return s.apply(null,arguments)},ha=function(b,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=d.slice();c.push.apply(c,arguments);return b.apply(this,c)}},ia=Date.now||function(){return+new Date()},t=function(b,c){b=b.split(".");var d=l;b[0]in d||!d.execScript||d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&m(c)?d[e]=c:d=d[e]?d[e]:d[e]={}},u=function(b,c){function d(){}d.prototype=c.prototype;b.ab=c.prototype;b.prototype=new d();b.prototype.constructor=b;b.Ae=function(b,d,e){for(var f=Array(arguments.length-2),g=2;g<arguments.length;g++)f[g-2]=arguments[g];return c.prototype[d].apply(b,f)}},v=l.cast||{};t("cast.receiver.VERSION","2.0.0");var ja=function(b,c){b=b.toLowerCase();c=c.toLowerCase();return 0==b.indexOf(c)||0==c.indexOf(b)},ka=function(b){if(Error.captureStackTrace)Error.captureStackTrace(this,ka);else{var c=Error().stack;c&&(this.stack=c)}b&&(this.message=String(b))};u(ka,Error);ka.prototype.name="CustomError";var la,ma=function(b,c){for(var d=b.split("%s"),e="",f=Array.prototype.slice.call(arguments,1);f.length&&1<d.length;)e+=d.shift()+f.shift();return e+d.join("%s")},na=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oa=function(b,c){b=String(b).toLowerCase();c=String(c).toLowerCase();return b<c?-1:b==c?0:1},pa=function(b,c){return b<c?-1:b>c?1:0},qa=function(b,c){c.unshift(b),ka.call(this,ma.apply(null,c)),c.shift()};u(qa,ka);qa.prototype.name="AssertionError";var ra=function(b,c,d,e){var f="Assertion failed";if(d)var f=f+(": "+d),g=e;else b&&(f+=": "+b,g=c);throw new qa(""+f,g||[])},w=function(b,c,d){b||ra("",null,c,Array.prototype.slice.call(arguments,2))},sa=function(b,c){throw new qa("Failure"+(b?": "+b:""),Array.prototype.slice.call(arguments,1))},ta=function(b,c,d){q(b)||ra("Expected number but got %s: %s.",[ca(b),b],c,Array.prototype.slice.call(arguments,2))},ua=function(b,c,d){r(b)||ra("Expected function but got %s: %s.",[ca(b),b],c,Array.prototype.slice.call(arguments,2))},va=Array.prototype.indexOf?function(b,c,d){w(null!=b.length);return Array.prototype.indexOf.call(b,c,d)}:function(b,c,d){d=null==d?0:0>d?Math.max(0,b.length+d):d;if(p(b))return p(c)&&1==c.length?b.indexOf(c,d):-1;for(;d<b.length;d++)if(d in b&&b[d]===c)return d;return-1},wa=Array.prototype.lastIndexOf?function(b,c,d){w(null!=b.length);return Array.prototype.lastIndexOf.call(b,c,null==d?b.length-1:d)}:function(b,c,d){d=null==d?b.length-1:d;0>d&&(d=Math.max(0,b.length+d));if(p(b))return p(c)&&1==c.length?b.lastIndexOf(c,d):-1;for(;0<=d;d--)if(d in b&&b[d]===c)return d;return-1},xa=Array.prototype.forEach?function(b,c,d){w(null!=b.length),Array.prototype.forEach.call(b,c,d)}:function(b,c,d){for(var e=b.length,f=p(b)?b.split(""):b,g=0;g<e;g++)g in f&&c.call(d,f[g],g,b)},ya=Array.prototype.filter?function(b,c,d){w(null!=b.length);return Array.prototype.filter.call(b,c,d)}:function(b,c,d){for(var e=b.length,f=[],g=0,h=p(b)?b.split(""):b,i=0;i<e;i++)if(i in h){var j=h[i];c.call(d,j,i,b)&&(f[g++]=j)}return f},za=function(b,c){c=va(b,c);var d;(d=0<=c)&&Aa(b,c);return d},Aa=function(b,c){w(null!=b.length),Array.prototype.splice.call(b,c,1)},Ba=function(b){var c=b.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=b[e];return d}return[]},Ca=function(b,c,d,e){w(null!=b.length);return Array.prototype.splice.apply(b,Da(arguments,1))},Da=function(b,c,d){w(null!=b.length);return 2>=arguments.length?Array.prototype.slice.call(b,c):Array.prototype.slice.call(b,c,d)},Ea=function(b,c,d){for(var e in b)c.call(d,b[e],e,b)},Fa=function(b,c){for(var d in b)if(c.call(void 0,b[d],d,b))return!0;return!1},Ga=function(b){var c=[],d=0;for(b in b)c[d++]=b;return c},Ha=function(b,c){return null!==b&&c in b},Ia=function(b){var c={},d;for(d in b)c[d]=b[d];return c},Ja="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ka=function(b,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)b[d]=e[d];for(var g=0;g<Ja.length;g++)d=Ja[g],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}},La;a:{var x=l.navigator;if(x){x=x.userAgent;if(x){La=x;break a}}La=""}var y=function(b){return-1!=La.indexOf(b)},Ma="StopIteration"in l?l.StopIteration:{message:"StopIteration",stack:""},Na=function(){};Na.prototype.next=function(){throw Ma};Na.prototype.Vc=function(){return this};var z=function(b,c){this.I={};this.i=[];this.cb=this.ga=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else b&&this.addAll(b)};z.prototype.rc=function(){Pa(this);for(var b=[],c=0;c<this.i.length;c++)b.push(this.I[this.i[c]]);return b};var Oa=function(b){Pa(b);return b.i.concat()};z.prototype.Rb=function(){return 0==this.ga};z.prototype.clear=function(){this.I={},this.cb=this.ga=this.i.length=0};z.prototype.remove=function(b){return Qa(this.I,b)?(delete this.I[b],this.ga--,this.cb++,this.i.length>2*this.ga&&Pa(this),!0):!1};var Pa=function(b){if(b.ga!=b.i.length){for(var c=0,d=0;c<b.i.length;){var e=b.i[c];Qa(b.I,e)&&(b.i[d++]=e);c++}b.i.length=d}if(b.ga!=b.i.length){for(var f={},d=c=0;c<b.i.length;)e=b.i[c],Qa(f,e)||(b.i[d++]=e,f[e]=1),c++;b.i.length=d}};x=z.prototype;x.get=function(b,c){return Qa(this.I,b)?this.I[b]:c};x.set=function(b,c){Qa(this.I,b)||(this.ga++,this.i.push(b),this.cb++),this.I[b]=c};x.addAll=function(b){var c;if(b instanceof z)c=Oa(b),b=b.rc();else{c=Ga(b);var d=[],e=0,f;for(f in b)d[e++]=b[f];b=d}for(d=0;d<c.length;d++)this.set(c[d],b[d])};x.forEach=function(b,c){for(var d=Oa(this),e=0;e<d.length;e++){var f=d[e],g=this.get(f);b.call(c,g,f,this)}};x.clone=function(){return new z(this)};x.Vc=function(b){Pa(this);var c=0,d=this.cb,e=this,f=new Na();f.next=function(){if(d!=e.cb)throw Error("The map has changed since the iterator was created");if(c>=e.i.length)throw Ma;var f=e.i[c++];return b?f:e.I[f]};return f};var Qa=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)},Ra=function(b){Ra[" "](b);return b};Ra[" "]=n;var Sa=function(b,c){var d=Ya;return Object.prototype.hasOwnProperty.call(d,b)?d[b]:d[b]=c(b)},Ta=y("Opera"),A=y("Trident")||y("MSIE"),Ua=y("Edge"),Va=y("Gecko")&&!(-1!=La.toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),Wa=-1!=La.toLowerCase().indexOf("webkit")&&!y("Edge"),B=function(){var b=l.document;return b?b.documentMode:void 0};a:{var C="",D=function(){var b=La;if(Va)return/rv\:([^\);]+)(\)|;)/.exec(b);if(Ua)return/Edge\/([\d\.]+)/.exec(b);if(A)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(Wa)return/WebKit\/(\S+)/.exec(b);if(Ta)return/(?:Version)[ \/]?(\S+)/.exec(b)}();D&&(C=D?D[1]:"");if(A){D=B();if(null!=D&&D>parseFloat(C)){D=String(D);break a}}D=C}var Xa=D,Ya={};C=function(b){return Sa(b,function(){for(var c=0,d=na(String(Xa)).split("."),e=na(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&g<f;g++){var h=d[g]||"",i=e[g]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""];if(0==h[0].length&&0==i[0].length)break;c=pa(0==h[1].length?0:parseInt(h[1],10),0==i[1].length?0:parseInt(i[1],10))||pa(0==h[2].length,0==i[2].length)||pa(h[2],i[2]);h=h[3];i=i[3]}while(0==c)}return 0<=c})};D=l.document;B=D&&A?B()||("CSS1Compat"==D.compatMode?parseInt(Xa,10):5):void 0;var Za=function(b,c,d,e,f){this.reset(b,c,d,e,f)};Za.prototype.Mb=null;var $a=0;Za.prototype.reset=function(b,c,d,e,f){"number"==typeof f||$a++,this.Tc=e||ia(),this.na=b,this.yc=c,this.vc=d,delete this.Mb};Za.prototype.hc=function(b){this.na=b};var ab=function(b){this.zc=b,this.Ra=this.Hb=this.na=this.F=null};D=function(b,c){this.name=b,this.value=c};D.prototype.toString=function(){return this.name};var bb=new D("SHOUT",1200),cb=new D("SEVERE",1e3),db=new D("WARNING",900),eb=new D("INFO",800),fb=new D("CONFIG",700),gb=new D("FINE",500),E=new D("FINER",400),hb=[new D("OFF",Infinity),bb,cb,db,eb,fb,gb,E,new D("FINEST",300),new D("ALL",0)],ib=null,jb=function(b){if(!ib){ib={};for(var c=0,d;d=hb[c];c++)ib[d.value]=d,ib[d.name]=d}if(b in ib)return ib[b];for(c=0;c<hb.length;++c)if(d=hb[c],d.value<=b)return d;return null};ab.prototype.getName=function(){return this.zc};ab.prototype.getParent=function(){return this.F};ab.prototype.oc=function(){this.Hb||(this.Hb={});return this.Hb};ab.prototype.hc=function(b){this.na=b};var kb=function(b){if(b.na)return b.na;if(b.F)return kb(b.F);sa("Root logger has no level set.");return null};ab.prototype.log=function(b,c,d){if(b.value>=kb(this).value)for(r(c)&&(c=c()),b=new Za(b,String(c),this.zc),d&&(b.Mb=d),d="log:"+b.yc,l.console&&(l.console.timeStamp?l.console.timeStamp(d):l.console.markTimeline&&l.console.markTimeline(d)),l.msWriteProfilerMark&&l.msWriteProfilerMark(d),d=this;d;){var e=d,f=b;if(e.Ra)for(var g=0;c=e.Ra[g];g++)c(f);d=d.getParent()}};ab.prototype.info=function(b,c){this.log(eb,b,c)};var lb={},mb=null,nb=function(){mb||(mb=new ab(""),lb[""]=mb,mb.hc(fb))},F=function(b){nb();var c;if(!(c=lb[b])){c=new ab(b);var d=b.lastIndexOf("."),e=b.substr(d+1),d=F(b.substr(0,d));d.oc()[e]=c;c.F=d;lb[b]=c}return c},G=function(b,c,d){b&&b.log(c,d,void 0)},H=function(b,c){b&&b.log(cb,c,void 0)},ob=function(b,c){b&&b.log(db,c,void 0)},I=function(b,c){b&&b.info(c,void 0)},pb=function(b,c){b&&b.log(gb,c,void 0)},J=function(){this.Ma=this.Ma,this.qa=this.qa};J.prototype.Ma=!1;J.prototype.Z=function(){this.Ma||(this.Ma=!0,this.m())};var qb=function(b,c){b.Ma?m(void 0)?c.call(void 0):c():(b.qa||(b.qa=[]),b.qa.push(m(void 0)?s(c,void 0):c))};J.prototype.m=function(){if(this.qa)for(;this.qa.length;)this.qa.shift()()};var rb=function(b){b&&"function"==typeof b.Z&&b.Z()},K=function(b,c){this.type=b,this.currentTarget=this.target=c,this.defaultPrevented=this.ta=!1,this.Jc=!0};K.prototype.stopPropagation=function(){this.ta=!0};K.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Jc=!1};var sb=!A||9<=Number(B),tb=A&&!C("9");Wa&&C("528");Va&&C("1.9b")||A&&C("8")||Ta&&C("9.5")||Wa&&C("528");Va&&!C("8")||A&&C("9");var ub=function(b,c){K.call(this,b?b.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Da=this.state=null;if(b){var d=this.type=b.type,e=b.changedTouches?b.changedTouches[0]:null;this.target=b.target||b.srcElement;this.currentTarget=c;if(c=b.relatedTarget){if(Va){var f;a:{try{Ra(c.nodeName);break a}catch(b){}f=!1}f||(c=null)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);this.relatedTarget=c;null===e?(this.offsetX=Wa||void 0!==b.offsetX?b.offsetX:b.layerX,this.offsetY=Wa||void 0!==b.offsetY?b.offsetY:b.layerY,this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=b.button;this.keyCode=b.keyCode||0;this.charCode=b.charCode||("keypress"==d?b.keyCode:0);this.ctrlKey=b.ctrlKey;this.altKey=b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.state=b.state;this.Da=b;b.defaultPrevented&&this.preventDefault()}};u(ub,K);ub.prototype.stopPropagation=function(){ub.ab.stopPropagation.call(this),this.Da.stopPropagation?this.Da.stopPropagation():this.Da.cancelBubble=!0};ub.prototype.preventDefault=function(){ub.ab.preventDefault.call(this);var b=this.Da;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,tb)try{(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)&&(b.keyCode=-1)}catch(b){}};var vb="closure_listenable_"+(1e6*Math.random()|0),wb=0,xb=function(b,c,d,e,f){this.listener=b,this.wb=null,this.src=c,this.type=d,this.capture=!!e,this.mb=f,this.key=++wb,this.La=this.hb=!1},yb=function(b){b.La=!0,b.listener=null,b.wb=null,b.src=null,b.mb=null},zb=function(b){this.src=b,this.v={},this.bb=0};zb.prototype.add=function(b,c,d,e,f){var g=b.toString();b=this.v[g];b||(b=this.v[g]=[],this.bb++);var h=Bb(b,c,e,f);-1<h?(c=b[h],d||(c.hb=!1)):(c=new xb(c,this.src,g,!!e,f),c.hb=d,b.push(c));return c};zb.prototype.remove=function(b,c,d,e){b=b.toString();if(!(b in this.v))return!1;var f=this.v[b];c=Bb(f,c,d,e);return-1<c?(yb(f[c]),Aa(f,c),0==f.length&&(delete this.v[b],this.bb--),!0):!1};var Ab=function(b,c){var d=c.type;d in b.v&&za(b.v[d],c)&&(yb(c),0==b.v[d].length&&(delete b.v[d],b.bb--))};zb.prototype.fc=function(b){b=b&&b.toString();var c=0,d;for(d in this.v)if(!b||d==b){for(var e=this.v[d],f=0;f<e.length;f++)++c,yb(e[f]);delete this.v[d];this.bb--}return c};zb.prototype.Pa=function(b,c,d,e){b=this.v[b.toString()];var f=-1;b&&(f=Bb(b,c,d,e));return-1<f?b[f]:null};zb.prototype.hasListener=function(b,c){var d=m(b),e=d?b.toString():"",f=m(c);return Fa(this.v,function(b){for(var g=0;g<b.length;++g)if(!(d&&b[g].type!=e||f&&b[g].capture!=c))return!0;return!1})};var Bb=function(b,c,d,e){for(var f=0;f<b.length;++f){var g=b[f];if(!g.La&&g.listener==c&&g.capture==!!d&&g.mb==e)return f}return-1},Cb="closure_lm_"+(1e6*Math.random()|0),Db={},Eb=0,L=function(b,c,d,e,f){if("array"==ca(c)){for(var g=0;g<c.length;g++)L(b,c[g],d,e,f);return null}d=Nb(d);if(b&&b[vb])b=b.Ia(c,d,e,f);else{if(!c)throw Error("Invalid event type");var g=!!e,h=Lb(b);h||(b[Cb]=h=new zb(b));d=h.add(c,d,!1,e,f);if(!d.wb){e=Fb();d.wb=e;e.src=b;e.listener=d;if(b.addEventListener)b.addEventListener(c.toString(),e,g);else if(b.attachEvent)b.attachEvent(Hb(c.toString()),e);else throw Error("addEventListener and attachEvent are unavailable.");Eb++}b=d}return b},Fb=function(){var b=Kb,c=sb?function(d){return b.call(c.src,c.listener,d)}:function(d){d=b.call(c.src,c.listener,d);if(!d)return d};return c},M=function(b,c,d,e,f){if("array"==ca(c))for(var g=0;g<c.length;g++)M(b,c[g],d,e,f);else d=Nb(d),b&&b[vb]?b.ic(c,d,e,f):b&&(b=Lb(b))&&(c=b.Pa(c,d,!!e,f))&&Gb(c)},Gb=function(b){if(!q(b)&&b&&!b.La){var c=b.src;if(c&&c[vb])Ab(c.L,b);else{var d=b.type,e=b.wb;c.removeEventListener?c.removeEventListener(d,e,b.capture):c.detachEvent&&c.detachEvent(Hb(d),e);Eb--;(d=Lb(c))?(Ab(d,b),0==d.bb&&(d.src=null,c[Cb]=null)):yb(b)}}},Hb=function(b){return b in Db?Db[b]:Db[b]="on"+b},Ib=function(b,c,d,e){var f=!0;if((b=Lb(b))&&(c=b.v[c.toString()]))for(c=c.concat(),b=0;b<c.length;b++){var g=c[b];g&&g.capture==d&&!g.La&&(g=Jb(g,e),f=f&&!1!==g)}return f},Jb=function(b,c){var d=b.listener,e=b.mb||b.src;b.hb&&Gb(b);return d.call(e,c)},Kb=function(b,c){if(b.La)return!0;if(!sb){if(!c)a:{c=["window","event"];for(var d=l,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new ub(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(b){f=!0}(f||void 0==e.returnValue)&&(e.returnValue=!0)}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);b=b.type;for(f=e.length-1;!c.ta&&0<=f;f--){c.currentTarget=e[f];var g=Ib(e[f],b,!0,c),d=d&&g}for(f=0;!c.ta&&f<e.length;f++)c.currentTarget=e[f],g=Ib(e[f],b,!1,c),d=d&&g}return d}return Jb(b,new ub(c,this))},Lb=function(b){b=b[Cb];return b instanceof zb?b:null},Mb="__closure_events_fn_"+(1e9*Math.random()>>>0),Nb=function(b){w(b,"Listener can not be null.");if(r(b))return b;w(b.handleEvent,"An object listener must have handleEvent method.");b[Mb]||(b[Mb]=function(c){return b.handleEvent(c)});return b[Mb]},N=function(){J.call(this),this.L=new zb(this),this.Wc=this,this.ec=null};u(N,J);N.prototype[vb]=!0;x=N.prototype;x.addEventListener=function(b,c,d,e){L(this,b,c,d,e)};x.removeEventListener=function(b,c,d,e){M(this,b,c,d,e)};x.dispatchEvent=function(b){Pb(this);var c,d=this.ec;if(d){c=[];for(var e=1;d;d=d.ec)c.push(d),w(1e3>++e,"infinite loop")}d=this.Wc;e=b.type||b;if(p(b))b=new K(b,d);else if(b instanceof K)b.target=b.target||d;else{var f=b;b=new K(e,d);Ka(b,f)}var f=!0,g;if(c)for(var h=c.length-1;!b.ta&&0<=h;h--)g=b.currentTarget=c[h],f=Ob(g,e,!0,b)&&f;b.ta||(g=b.currentTarget=d,f=Ob(g,e,!0,b)&&f,b.ta||(f=Ob(g,e,!1,b)&&f));if(c)for(h=0;!b.ta&&h<c.length;h++)g=b.currentTarget=c[h],f=Ob(g,e,!1,b)&&f;return f};x.m=function(){N.ab.m.call(this),this.L&&this.L.fc(void 0),this.ec=null};x.Ia=function(b,c,d,e){Pb(this);return this.L.add(String(b),c,!1,d,e)};x.ic=function(b,c,d,e){return this.L.remove(String(b),c,d,e)};var Ob=function(b,c,d,e){c=b.L.v[String(c)];if(!c)return!0;c=c.concat();for(var f=!0,g=0;g<c.length;++g){var h=c[g];if(h&&!h.La&&h.capture==d){var i=h.listener,j=h.mb||h.src;h.hb&&Ab(b.L,h);f=!1!==i.call(j,e)&&f}}return f&&0!=e.Jc};N.prototype.Pa=function(b,c,d,e){return this.L.Pa(String(b),c,d,e)};N.prototype.hasListener=function(b,c){return this.L.hasListener(m(b)?String(b):void 0,c)};var Pb=function(b){w(b.L,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},O=function(b,c){N.call(this),this.xa=c,this.Sb=!0,this.Ca=b,this.onClose=this.onMessage=null,this.Ca.Ia(this.xa,this.Ya,!1,this)};c(O,N);t("cast.receiver.CastChannel",O);O.prototype.T=function(){return"CastChannel["+this.xa+" "+this.Ca.ia()+"]"};O.prototype.ia=function(){return this.Ca.ia()};O.prototype.getNamespace=O.prototype.ia;O.prototype.Kd=function(){return this.xa};O.prototype.getSenderId=O.prototype.Kd;O.prototype.Ya=function(b){G(Rb,E,"Dispatching CastChannel message ["+this.Ca.ia()+", "+this.xa+"]: "+b.data),b=new Qb("message",b.data),this.onMessage&&this.onMessage(b),this.dispatchEvent(b)};O.prototype.close=function(){if(this.Sb){this.Sb=!1;I(Rb,"Closing CastChannel ["+this.Ca.ia()+", "+this.xa+"]");var b=new Qb("close",this.xa);this.onClose&&this.onClose(b);this.dispatchEvent(b);this.Z()}};O.prototype.send=function(b){if(!this.Sb)throw Error("Invalid state, socket not open");this.Ca.send(this.xa,b)};O.prototype.send=O.prototype.send;O.prototype.m=function(){N.prototype.m.call(this),G(Rb,E,"Disposed "+this.T())};O.prototype.addEventListener=function(b,c,d,e){L(this,b,c,d,e)};O.prototype.addEventListener=O.prototype.addEventListener;O.prototype.removeEventListener=function(b,c,d,e){M(this,b,c,d,e)};O.prototype.removeEventListener=O.prototype.removeEventListener;O.prototype.dispatchEvent=function(b){return N.prototype.dispatchEvent.call(this,b)};O.prototype.dispatchEvent=O.prototype.dispatchEvent;O.EventType={MESSAGE:"message",CLOSE:"close"};var Qb=function(b,c){K.call(this,b),this.message=c};c(Qb,K);O.Event=Qb;var Rb=F("cast.receiver.CastChannel");D=function(b,c,d){this.Rd=d,this.$c=b,this.ce=c,this.ub=0,this.nb=null};D.prototype.get=function(){var b;0<this.ub?(this.ub--,b=this.nb,this.nb=b.next,b.next=null):b=this.$c();return b};D.prototype.put=function(b){this.ce(b),this.ub<this.Rd&&(this.ub++,b.next=this.nb,this.nb=b)};var Sb=function(b){l.setTimeout(function(){throw b},0)},Tb,Ub=function(){var b=l.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!y("Presto")&&(b=function(){var b=document.createElement("IFRAME");b.style.display="none";b.src="";document.documentElement.appendChild(b);var c=b.contentWindow,b=c.document;b.open();b.write("");b.close();var d="callImmediate"+Math.random(),e="file:"==c.location.protocol?"*":c.location.protocol+"//"+c.location.host,b=s(function(b){("*"==e||b.origin==e)&&b.data==d&&this.port1.onmessage()},this);c.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){c.postMessage(d,e)}}});if("undefined"!==typeof b&&!y("Trident")&&!y("MSIE")){var c=new b(),d={},e=d;c.port1.onmessage=function(){if(m(d.next)){d=d.next;var b=d.lc;d.lc=null;b()}};return function(b){e.next={lc:b},e=e.next,c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(b){var c=document.createElement("SCRIPT");c.onreadystatechange=function(){c.onreadystatechange=null,c.parentNode.removeChild(c),c=null,b(),b=null};document.documentElement.appendChild(c)}:function(b){l.setTimeout(b,0)}},P=function(){this.Db=this.Aa=null},Vb=new D(function(){return new Wb()},function(b){b.reset()},100);P.prototype.add=function(b,c){var d=Vb.get();d.set(b,c);this.Db?this.Db.next=d:(w(!this.Aa),this.Aa=d);this.Db=d};P.prototype.remove=function(){var b=null;this.Aa&&(b=this.Aa,this.Aa=this.Aa.next,this.Aa||(this.Db=null),b.next=null);return b};var Wb=function(){this.next=this.scope=this.Ob=null};Wb.prototype.set=function(b,c){this.Ob=b,this.scope=c,this.next=null};Wb.prototype.reset=function(){this.next=this.scope=this.Ob=null};var Xb=function(b,c){Yb||Zb(),$b||(Yb(),$b=!0),ac.add(b,c)},Yb,Zb=function(){var b=l.Promise;if(-1!=String(b).indexOf("[native code]")){var c=b.resolve(void 0);Yb=function(){c.then(bc)}}else Yb=function(){var b=bc;!r(l.setImmediate)||l.Window&&l.Window.prototype&&!y("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Tb||(Tb=Ub()),Tb(b)):l.setImmediate(b)}},$b=!1,ac=new P(),bc=function(){for(var b;b=ac.remove();){try{b.Ob.call(b.scope)}catch(b){Sb(b)}Vb.put(b)}$b=!1},Q=function(b,c){this.B=0;this.Hc=void 0;this.Ba=this.S=this.F=null;this.lb=this.Nb=!1;if(b!=n)try{var d=this;b.call(c,function(b){kc(d,2,b)},function(b){if(!(b instanceof sc))try{if(b instanceof Error)throw b;throw Error("Promise rejected.")}catch(b){}kc(d,3,b)})}catch(b){kc(this,3,b)}},cc=function(){this.next=this.context=this.Ja=this.ra=this.fa=null,this.gb=!1};cc.prototype.reset=function(){this.context=this.Ja=this.ra=this.fa=null,this.gb=!1};var dc=new D(function(){return new cc()},function(b){b.reset()},100),ec=function(b,c,d){var e=dc.get();e.ra=b;e.Ja=c;e.context=d;return e},fc=function(b){if(b instanceof Q)return b;var c=new Q(n);kc(c,2,b);return c},gc=function(){var b,c,d=new Q(function(d,e){b=d,c=e});return new tc(d,b,c)};Q.prototype.then=function(b,c,d){null!=b&&ua(b,"opt_onFulfilled should be a function.");null!=c&&ua(c,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");return jc(this,r(b)?b:null,r(c)?c:null,d)};Q.prototype.then=Q.prototype.then;Q.prototype.$goog_Thenable=!0;Q.prototype.cancel=function(b){0==this.B&&Xb(function(){var c=new sc(b);hc(this,c)},this)};var hc=function(b,c){if(0==b.B)if(b.F){var d=b.F;if(d.S){for(var e=0,f=null,g=null,h=d.S;h&&(h.gb||(e++,h.fa==b&&(f=h),!(f&&1<e)));h=h.next)f||(g=h);f&&(0==d.B&&1==e?hc(d,c):(g?(e=g,w(d.S),w(null!=e),e.next==d.Ba&&(d.Ba=e),e.next=e.next.next):nc(d),oc(d,f,3,c)))}b.F=null}else kc(b,3,c)},ic=function(b,c){b.S||2!=b.B&&3!=b.B||mc(b),w(null!=c.ra),b.Ba?b.Ba.next=c:b.S=c,b.Ba=c},jc=function(b,c,d,e){var f=ec(null,null,null);f.fa=new Q(function(b,g){f.ra=c?function(d){try{d=c.call(e,d);b(d)}catch(b){g(b)}}:b,f.Ja=d?function(c){try{var f=d.call(e,c);!m(f)&&c instanceof sc?g(c):b(f)}catch(b){g(b)}}:g});f.fa.F=b;ic(b,f);return f.fa};Q.prototype.qe=function(b){w(1==this.B),this.B=0,kc(this,2,b)};Q.prototype.re=function(b){w(1==this.B),this.B=0,kc(this,3,b)};var kc=function(b,c,d){if(0==b.B){b===d&&(c=3,d=new TypeError("Promise cannot resolve to itself"));b.B=1;var e;a:{var f=d,g=b.qe,h=b.re;if(f instanceof Q)null!=g&&ua(g,"opt_onFulfilled should be a function."),null!=h&&ua(h,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),ic(f,ec(g||n,h||null,b)),e=!0;else{var i;if(f)try{i=!!f.$goog_Thenable}catch(b){i=!1}else i=!1;if(i)f.then(g,h,b),e=!0;else{if(ea(f))try{i=f.then;if(r(i)){lc(f,i,g,h,b);break a}}catch(c){h.call(b,c);break a}e=!1}}}e||(b.Hc=d,b.B=c,b.F=null,mc(b),3!=c||d instanceof sc||qc(b,d))}},lc=function(b,c,d,e,f){var g=!1,h=function(b){g||(g=!0,d.call(f,b))},i=function(b){g||(g=!0,e.call(f,b))};try{c.call(b,h,i)}catch(b){i(b)}},mc=function(b){b.Nb||(b.Nb=!0,Xb(b.yd,b))},nc=function(b){var c=null;b.S&&(c=b.S,b.S=c.next,c.next=null);b.S||(b.Ba=null);null!=c&&w(null!=c.ra);return c};Q.prototype.yd=function(){for(var b;b=nc(this);)oc(this,b,this.B,this.Hc);this.Nb=!1};var oc=function(b,c,d,e){if(3==d&&c.Ja&&!c.gb)for(;b&&b.lb;b=b.F)b.lb=!1;if(c.fa)c.fa.F=null,pc(c,d,e);else try{c.gb?c.ra.call(c.context):pc(c,d,e)}catch(b){rc.call(null,b)}dc.put(c)},pc=function(b,c,d){2==c?b.ra.call(b.context,d):b.Ja&&b.Ja.call(b.context,d)},qc=function(b,c){b.lb=!0,Xb(function(){b.lb&&rc.call(null,c)})},rc=Sb,sc=function(b){ka.call(this,b)};u(sc,ka);sc.prototype.name="cancel";var tc=function(b,c,d){this.Zd=b,this.resolve=c,this.reject=d},uc=function(b,c,d){if(r(b))d&&(b=s(b,d));else if(b&&"function"==typeof b.handleEvent)b=s(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(b,c||0)},vc=function(b,c){N.call(this),this.Yc=m(b)?b:!0,this.Pb=c||wc,this.tb=this.Pb(this.Za)};u(vc,N);x=vc.prototype;x.C=null;x.W=null;x.Ka=void 0;x.Ib=!1;x.Za=0;x.ua=null;P=vc.prototype;D=F("goog.net.WebSocket");P.D=D;var wc=function(b){return Math.min(1e3*Math.pow(2,b),6e4)};x=vc.prototype;x.open=function(b,c){w(l.WebSocket,"This browser does not support WebSocket"),w(!this.Ga(),"The WebSocket is already open"),null!=this.ua&&l.clearTimeout(this.ua),this.ua=null,this.W=b,(this.Ka=c)?(I(this.D,"Opening the WebSocket on "+this.W+" with protocol "+this.Ka),this.C=new WebSocket(this.W,this.Ka)):(I(this.D,"Opening the WebSocket on "+this.W),this.C=new WebSocket(this.W)),this.C.onopen=s(this.Ud,this),this.C.onclose=s(this.Td,this),this.C.onmessage=s(this.J,this),this.C.onerror=s(this.Yb,this)};x.close=function(){null!=this.ua&&l.clearTimeout(this.ua),this.ua=null,this.C&&(I(this.D,"Closing the WebSocket."),this.Ib=!0,this.C.close(),this.C=null)};x.send=function(b){w(this.Ga(),"Cannot send without an open socket"),this.C.send(b)};x.Ga=function(){return!!this.C&&1==this.C.readyState};x.Ud=function(){I(this.D,"WebSocket opened on "+this.W),this.dispatchEvent("d"),this.Za=0,this.tb=this.Pb(this.Za)};x.Td=function(b){I(this.D,"The WebSocket on "+this.W+" closed."),this.dispatchEvent("a"),this.C=null,this.Ib?(I(this.D,"The WebSocket closed normally."),this.W=null,this.Ka=void 0):(H(this.D,"The WebSocket disconnected unexpectedly: "+b.data),this.Yc&&(I(this.D,"Seconds until next reconnect attempt: "+Math.floor(this.tb/1e3)),this.ua=uc(s(this.open,this,this.W,this.Ka),this.tb,this),this.Za++,this.tb=this.Pb(this.Za))),this.Ib=!1};x.J=function(b){this.dispatchEvent(new xc(b.data))};x.Yb=function(b){b=b.data,H(this.D,"An error occurred: "+b),this.dispatchEvent(new yc(b))};x.m=function(){vc.ab.m.call(this),this.close()};var xc=function(b){K.call(this,"c"),this.message=b};u(xc,K);var yc=function(b){K.call(this,"b"),this.data=b};u(yc,K);t("cast.receiver.platform.PlatformValueKey",{xe:"port-for-web-server",ue:"log-level-cast-receiver",ve:"max-video-resolution-vpx",te:"device-model",se:"cast-receiver-version",ye:"system-version",ze:"volume-controllable"});var zc={"port-for-web-server":"8008"};t("cast.receiver.platform.canDisplayType",function(b){return v.__platform__.canDisplayType(b)});v.__platform__&&v.__platform__.canDisplayType||delete window.cast.receiver.platform.canDisplayType;t("cast.receiver.platform.VideoResolution",function(){});var Ac=function(b){if(v.__platform__&&v.__platform__.queryPlatformValue)return v.__platform__.queryPlatformValue(b);if(b in zc)return zc[b]};t("cast.receiver.platform.getValue",Ac);t("cast.receiver.platform.getHdcpVersion",function(){return v.__platform__&&v.__platform__.display&&v.__platform__.display.getHdcpVersion?v.__platform__.display.getHdcpVersion():Promise.reject(Error("getHdcpVersion is not available"))});var Bc=function(){N.call(this),this.ca=!1};c(Bc,N);x=Bc.prototype;x.ha=function(){return"PlatformChannel"};x.open=function(){this.ca?H(Cc,this.ha()+" Already open"):v.__platform__.channel.open(s(this.bc,this),s(this.J,this))};x.close=function(){this.ca?v.__platform__.channel.close(s(this.Wb,this)):H(Cc,this.ha()+" Cannot close unopened channel")};x.Ga=function(){return this.ca};x.send=function(b){w(this.ca,"Cannot send until channel is openned"),v.__platform__.channel.send(b)};x.bc=function(b){this.ca=b,this.dispatchEvent(b?"d":"b")};x.Wb=function(){this.ca&&(this.ca=!1,this.dispatchEvent("a"))};x.J=function(b){this.dispatchEvent(new xc(b))};x.m=function(){N.prototype.m.call(this),this.ca&&this.close(),G(Cc,E,"Disposed "+this.ha())};var Cc=F("cast.receiver.platform.WebSocket");t("cast.receiver.system.NAMESPACE_PREFIX","urn:x-cast:");t("cast.receiver.system.ApplicationData",function(){this.name=this.id="",this.sessionId=0,this.namespaces=[],this.launchingSenderId=""});t("cast.receiver.system.SystemVolumeData",function(){this.level=1,this.muted=!1});t("cast.receiver.system.Sender",function(){this.userAgent=this.id=""});t("cast.receiver.system.VisibilityState",{VISIBLE:"visible",NOT_VISIBLE:"notvisible",UNKNOWN:"unknown"});t("cast.receiver.system.StandbyState",{STANDBY:"standby",NOT_STANDBY:"notstandby",UNKNOWN:"unknown"});t("cast.receiver.system.SystemState",{NOT_STARTED:"notstarted",STARTING_IN_BACKGROUND:"startinginbackground",STARTING:"starting",READY:"ready",STOPPING_IN_BACKGROUND:"stoppinginbackground",STOPPING:"stopping"});var Dc=function(){N.call(this),this.G=null,v.__platform__&&v.__platform__.channel?(I(R,"Opening platform websocket"),Ec(this,new Bc())):(I(R,"Opening net websocket"),Ec(this,new vc(!0)))};c(Dc,N);t("cast.receiver.IpcChannel",Dc);Dc.prototype.ha=function(){return"IpcChannel"};var Ec=function(b,c){b.G&&b.G.Z(),b.G=c,qb(b,ha(rb,b.G)),L(b.G,"d",b.bc,!1,b),L(b.G,"a",b.Wb,!1,b),L(b.G,"b",b.Yb,!1,b),L(b.G,"c",b.J,!1,b)},Fc=function(b,c){pb(R,b.ha()+" "+c),b.dispatchEvent(new Gc("urn:x-cast:com.google.cast.system","SystemSender",JSON.stringify({type:c})))};x=Dc.prototype;x.bc=function(){Fc(this,"opened")};x.Wb=function(){Fc(this,"closed")};x.Yb=function(){Fc(this,"error")};x.J=function(b){pb(R,"Received message: "+b.message);var c=(b=JSON.parse(b.message))&&b.namespace;b&&c&&b.senderId&&b.data?this.dispatchEvent(new Gc(c,b.senderId,b.data)):H(R,this.ha()+" Message received is invalid")};x.open=function(){I(R,"Opening message bus websocket"),this.G.open("ws://localhost:"+Ac("port-for-web-server")+"/v2/ipc")};x.close=function(){I(R,"Closing message bus websocket"),this.G.close()};x.Ga=function(){return this.G.Ga()};x.send=function(b,c,d){if(!this.Ga)throw Error("Underlying websocket is not open");b=JSON.stringify({namespace:b,senderId:c,data:d});pb(R,"IPC message sent: "+b);this.G.send(b)};x.m=function(){N.prototype.m.call(this),G(R,E,"Disposed "+this.ha())};var R=F("cast.receiver.IpcChannel"),Gc=function(b,c,d){K.call(this,b),this.senderId=c,this.data=d};c(Gc,K);var S=function(b,c,d,e){N.call(this);this.O=b;this.ka=c;this.Tb=!1;this.pa=e||"STRING";this.cc=this.onMessage=null;this.serializeMessage=this.xd;this.deserializeMessage=this.dd;this.w={};b=ba(d);for(c=b.next();!c.done;c=b.next())this.w[c.value]=null;this.ka.Ia(this.O,this.Ya,!1,this)};c(S,N);t("cast.receiver.CastMessageBus",S);S.prototype.T=function(){return"CastMessageBus["+this.O+"]"};S.prototype.ia=function(){return this.O};S.prototype.getNamespace=S.prototype.ia;S.prototype.Hd=function(){return this.pa};S.prototype.getMessageType=S.prototype.Hd;S.prototype.Ya=function(b){G(Hc,E,"Dispatching CastMessageBus message");var c="STRING"==this.pa?b.data:this.deserializeMessage(b.data);this.dispatchEvent(new Ic(b.senderId,b.senderId,c));b=new Ic("message",b.senderId,c);this.onMessage&&this.onMessage(b);this.dispatchEvent(b)};S.prototype.send=function(b,c){this.Tb||"urn:x-cast:com.google.cast.system"==this.O||ob(Hc,"Application should not send requests before the system is ready (they will be ignored)");if(!this.cc||!this.cc(b,this.O,c))if("STRING"==this.pa){if(!p(c))throw Error("Wrong argument, CastMessageBus type is STRING");this.ka.send(this.O,b,c)}else this.ka.send(this.O,b,this.serializeMessage(c))};S.prototype.send=S.prototype.send;S.prototype.kc=function(b){this.send("*:*",b)};S.prototype.broadcast=S.prototype.kc;S.prototype.Bd=function(b){if(Ha(this.w,b))return this.w[b]||(this.w[b]=new O(this,b)),this.w[b];throw Error("Requested a socket for a disconnected sender: "+b)};S.prototype.getCastChannel=S.prototype.Bd;S.prototype.xd=function(b){if("JSON"!=this.pa)throw Error("Unexpected message type for JSON serialization");return JSON.stringify(b)};S.prototype.dd=function(b){if("JSON"!=this.pa)throw Error("Unexpected message type for JSON serialization");return JSON.parse(b)};S.prototype.m=function(){N.prototype.m.call(this);for(var b in this.w)this.w[b]&&this.w[b].close();this.w={};G(Hc,E,"Disposed "+this.T())};S.prototype.addEventListener=function(b,c,d,e){L(this,b,c,d,e)};S.prototype.addEventListener=S.prototype.addEventListener;S.prototype.removeEventListener=function(b,c,d,e){M(this,b,c,d,e)};S.prototype.removeEventListener=S.prototype.removeEventListener;S.prototype.dispatchEvent=function(b){return N.prototype.dispatchEvent.call(this,b)};S.prototype.dispatchEvent=S.prototype.dispatchEvent;S.MessageType={STRING:"STRING",JSON:"JSON",CUSTOM:"CUSTOM"};S.EventType={MESSAGE:"message"};var Hc=F("cast.receiver.CastMessageBus"),Ic=function(b,c,d){K.call(this,b),this.senderId=c,this.data=d};c(Ic,K);S.Event=Ic;P=function(){this.Fc=ia()};var Jc=new P();P.prototype.set=function(b){this.Fc=b};P.prototype.reset=function(){this.set(ia())};P.prototype.get=function(){return this.Fc};var Kc=function(b){this.Yd=b||"",this.oe=Jc};x=Kc.prototype;x.jc=!0;x.Qc=!0;x.me=!0;x.le=!0;x.Rc=!1;x.ne=!1;var Lc=function(b){return 10>b?"0"+b:String(b)},Mc=function(b,c){b=(b.Tc-c)/1e3;c=b.toFixed(3);var d=0;if(1>b)d=2;else for(;100>b;)d++,b*=10;for(;0<d--;)c=" "+c;return c},Nc=function(b){Kc.call(this,b)};u(Nc,Kc);var Oc=function(){this.$d=s(this.Xc,this),this.kb=new Nc(),this.kb.Qc=!1,this.kb.Rc=!1,this.uc=this.kb.jc=!1,this.zd={}};Oc.prototype.Xc=function(b){if(!this.zd[b.vc]){var c;c=this.kb;var d=[];d.push(c.Yd," ");if(c.Qc){var e=new Date(b.Tc);d.push("[",Lc(e.getFullYear()-2e3)+Lc(e.getMonth()+1)+Lc(e.getDate())+" "+Lc(e.getHours())+":"+Lc(e.getMinutes())+":"+Lc(e.getSeconds())+"."+Lc(Math.floor(e.getMilliseconds()/10)),"] ")}c.me&&d.push("[",Mc(b,c.oe.get()),"s] ");c.le&&d.push("[",b.vc,"] ");c.ne&&d.push("[",b.na.name,"] ");d.push(b.yc);c.Rc&&(e=b.Mb)&&d.push("\n",e instanceof Error?e.message:e.toString());c.jc&&d.push("\n");c=d.join("");if(d=Qc)switch(b.na){case bb:Rc(d,"info",c);break;case cb:Rc(d,"error",c);break;case db:Rc(d,"warn",c);break;default:Rc(d,"debug",c)}}};var Pc=null,Qc=l.console,Rc=function(b,c,d){b[c]?b[c](d):b.log(d)};t("cast.receiver.media.MEDIA_NAMESPACE","urn:x-cast:com.google.cast.media");t("cast.receiver.media.StreamType",{BUFFERED:"BUFFERED",LIVE:"LIVE",NONE:"NONE"});t("cast.receiver.media.HdrType",{SDR:"sdr",HDR:"hdr",DV:"dv"});t("cast.receiver.media.ErrorType",{INVALID_PLAYER_STATE:"INVALID_PLAYER_STATE",LOAD_FAILED:"LOAD_FAILED",LOAD_CANCELLED:"LOAD_CANCELLED",INVALID_REQUEST:"INVALID_REQUEST"});t("cast.receiver.media.ErrorReason",{INVALID_COMMAND:"INVALID_COMMAND",INVALID_PARAMS:"INVALID_PARAMS",INVALID_MEDIA_SESSION_ID:"INVALID_MEDIA_SESSION_ID",SKIP_LIMIT_REACHED:"SKIP_LIMIT_REACHED",NOT_SUPPORTED:"NOT_SUPPORTED",LANGUAGE_NOT_SUPPORTED:"LANGUAGE_NOT_SUPPORTED",END_OF_QUEUE:"END_OF_QUEUE",DUPLICATE_REQUEST_ID:"DUPLICATE_REQUEST_ID"});t("cast.receiver.media.IdleReason",{CANCELLED:"CANCELLED",INTERRUPTED:"INTERRUPTED",FINISHED:"FINISHED",ERROR:"ERROR"});t("cast.receiver.media.SeekResumeState",{PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE"});t("cast.receiver.media.PlayerState",{IDLE:"IDLE",PLAYING:"PLAYING",PAUSED:"PAUSED",BUFFERING:"BUFFERING"});t("cast.receiver.media.ExtendedPlayerState",{LOADING:"LOADING"});var Sc=function(){this.contentId="",this.streamType="NONE",this.contentType="",this.breakClips=this.breaks=this.customData=this.textTrackStyle=this.tracks=this.duration=this.metadata=void 0};t("cast.receiver.media.MediaInformation",Sc);var Tc=function(){this.muted=this.level=void 0};t("cast.receiver.media.Volume",Tc);var Uc=function(b,c,d){this.width=b,this.height=c,this.hdrType=d};t("cast.receiver.media.VideoInformation",Uc);t("cast.receiver.media.MediaStatus",function(){this.mediaSessionId=0,this.videoInfo=this.media=void 0,this.playbackRate=1,this.playerState="IDLE",this.idleReason=void 0,this.supportedMediaCommands=this.currentTime=0,this.volume={level:0,muted:!1},this.activeTrackIds=null,this.extendedStatus=this.breakStatus=this.repeatMode=this.items=this.customData=this.preloadedItemId=this.loadingItemId=this.currentItemId=void 0});var Vc=function(b,c){this.playerState=b,this.media=c};t("cast.receiver.media.ExtendedMediaStatus",Vc);t("cast.receiver.media.Command",{PAUSE:1,SEEK:2,STREAM_VOLUME:4,STREAM_MUTE:8,ALL_BASIC_MEDIA:15,QUEUE_NEXT:64,QUEUE_PREV:128,QUEUE_SHUFFLE:256});t("cast.receiver.media.TrackType",{TEXT:"TEXT",AUDIO:"AUDIO",VIDEO:"VIDEO"});t("cast.receiver.media.TextTrackType",{SUBTITLES:"SUBTITLES",CAPTIONS:"CAPTIONS",DESCRIPTIONS:"DESCRIPTIONS",CHAPTERS:"CHAPTERS",METADATA:"METADATA"});t("cast.receiver.media.TextTrackEdgeType",{NONE:"NONE",OUTLINE:"OUTLINE",DROP_SHADOW:"DROP_SHADOW",RAISED:"RAISED",DEPRESSED:"DEPRESSED"});t("cast.receiver.media.TextTrackWindowType",{NONE:"NONE",NORMAL:"NORMAL",ROUNDED_CORNERS:"ROUNDED_CORNERS"});t("cast.receiver.media.TextTrackFontGenericFamily",{SANS_SERIF:"SANS_SERIF",MONOSPACED_SANS_SERIF:"MONOSPACED_SANS_SERIF",SERIF:"SERIF",MONOSPACED_SERIF:"MONOSPACED_SERIF",CASUAL:"CASUAL",CURSIVE:"CURSIVE",SMALL_CAPITALS:"SMALL_CAPITALS"});t("cast.receiver.media.TextTrackFontStyle",{NORMAL:"NORMAL",BOLD:"BOLD",BOLD_ITALIC:"BOLD_ITALIC",ITALIC:"ITALIC"});t("cast.receiver.media.Track",function(b,c){this.trackId=b,this.trackContentType=this.trackContentId=void 0,this.type=c,this.customData=this.subtype=this.language=this.name=void 0});t("cast.receiver.media.TextTrackStyle",function(){this.customData=this.fontStyle=this.fontGenericFamily=this.fontFamily=this.windowRoundedCornerRadius=this.windowColor=this.windowType=this.edgeColor=this.edgeType=this.backgroundColor=this.foregroundColor=this.fontScale=void 0});t("cast.receiver.media.TracksInfo",function(){this.textTrackStyle=this.language=this.activeTrackIds=this.tracks=void 0});D={REPEAT_OFF:"REPEAT_OFF",REPEAT_ALL:"REPEAT_ALL",REPEAT_SINGLE:"REPEAT_SINGLE",REPEAT_ALL_AND_SHUFFLE:"REPEAT_ALL_AND_SHUFFLE"};t("cast.receiver.media.RepeatMode",D);t("cast.receiver.media.repeatMode",D);var Wc=function(b){return"REPEAT_OFF"==b||"REPEAT_ALL"==b||"REPEAT_SINGLE"==b||"REPEAT_ALL_AND_SHUFFLE"==b};t("cast.receiver.media.GetStatusOptions",{NO_METADATA:1,NO_QUEUE_ITEMS:2});t("cast.receiver.media.Break",function(b,c,d){this.id=b,this.breakClipIds=c,this.position=d,this.duration=void 0,this.isWatched=!1});t("cast.receiver.media.BreakClip",function(b){this.id=b,this.customData=this.clickThroughUrl=this.mimeType=this.contentUrl=this.duration=this.title=void 0});t("cast.receiver.media.BreakStatus",function(b,c){this.currentBreakTime=b,this.currentBreakClipTime=c,this.whenSkippable=this.breakClipId=this.breakId=void 0});var Xc=function(){this.Y=T.$();this.wc=0;this.fb=null;this.$a=new z();this.de=this.ee.bind(this);this.N=this.Y.Oa("urn:x-cast:com.google.cast.inject","JSON");this.N.onMessage=this.J.bind(this);for(var b=ba(["urn:x-cast:com.google.cast.cac","urn:x-cast:com.google.cast.media"]),c=b.next();!c.done;c=b.next())(c=this.Y.s[c.value]||null)&&(c.cc=this.de)};Xc.prototype.J=function(b){var c=b.data,d=c.requestId;b=b.senderId;if("WRAPPED"!=c.type)this.K("Unsupported message type "+c.type,b,d);else{var c=JSON.parse(c.data),e=c.namespace,f=this.Y.s[e]||null;if(f){var g=!1;if("urn:x-cast:com.google.cast.cac"==e)c.data.requestId=d,g=!0;else if("urn:x-cast:com.google.cast.media"==e){var h=c.data;h.requestId=d;h.mediaSessionId=this.wc}else{this.K("Unsupported namespace "+e,b,d);return}this.$a.set(d,b);try{this.fb=null;h=JSON.stringify(c.data);f.Ya(new Gc(e,"__inject__",h))}catch(e){throw this.$a.remove(d),this.K("Injecting "+c.data+" failed with "+e,b,d),e}g||(this.fb?this.K("Error "+JSON.stringify(this.fb),b,d,"WRAPPED_ERROR",this.fb):(this.$a.remove(d),Yc(this,b,d)))}else this.K("Unregistered namespace "+e,b,d,"WRAPPED_ERROR",{type:"ERROR",code:"UNREGISTERED_NAMESPACE"})}};Xc.prototype.ee=function(b,c,d){if("urn:x-cast:com.google.cast.media"==c&&"STRING"==(this.Y.s[c]||null).pa)try{d=JSON.parse(d)}catch(b){return H(Zc,"Parse failed: "+d),!1}var e=d.type;"urn:x-cast:com.google.cast.media"==c&&"MEDIA_STATUS"==e&&d.status&&d.status[0]&&(this.wc=d.status[0].mediaSessionId);if("__inject__"!=b)return!1;b=d.requestId;if(!m(b))return ob(Zc,"No requestId in "+d),!0;var f=this.$a.get(b);if(!f)return H(Zc,"Request not found "+b),!0;this.$a.remove(b);if("urn:x-cast:com.google.cast.media"==c){switch(e){case"INVALID_REQUEST":case"INVALID_PLAYER_STATE":c=d.reason,this.fb={type:"ERROR",code:c?c:e}}return!0}if("urn:x-cast:com.google.cast.cac"!=c)return H(Zc,"Unsupported namespace "+c),!0;e=d;switch(e.type){case"SUCCESS":Yc(this,f,b,Object.getOwnPropertyNames(d).some(function(b){return"type"!=b&&"requestId"!=b&&m(d[b])})?JSON.stringify(d):void 0);break;case"ERROR":this.K("Wrapped error",f,b,"WRAPPED_ERROR",e);break;default:this.K("Unknown message type "+d,f,b)}return!0};Xc.prototype.K=function(b,c,d,e,f){H(Zc,b),this.N.send(c,new bd(d,e||"INJECT_ERROR",m(f)?JSON.stringify(f):void 0))};var Yc=function(b,c,d,e){b.N.send(c,new ad(d,e))};o(Xc);var Zc=F("cast.receiver.InjectManager"),$c=function(b,c,d){this.type=b,this.requestId=c,this.data=d},ad=function(b,c){$c.call(this,"SUCCESS",b,c)};c(ad,$c);var bd=function(b,c,d){$c.call(this,"ERROR",b,d),this.code=c};c(bd,$c);var T=function(){N.call(this);Pc||(Pc=new Oc());if(Pc){var b=Pc;if(1!=b.uc){nb();var c=mb,d=b.$d;c.Ra||(c.Ra=[]);c.Ra.push(d);b.uc=!0}}this.A=Ia(qd);this.Xa=!1;this.ka=new Dc();this.P={};this.da=new S("urn:x-cast:com.google.cast.system",this.ka,Ga(this.P),"JSON");qb(this,ha(rb,this.da));this.nc=this.Eb=null;this.tc=!1;this.Ua=this.Va=null;this.xb=!0;this.Qd="1.11";this.ya="notstarted";this.Uc=null;this.s={};this.Zb=this.onMaxVideoResolutionChanged=this.onFeedbackStarted=this.onStandbyChanged=this.onVisibilityChanged=this.onSystemVolumeChanged=this.onSenderDisconnected=this.onSenderConnected=this.onShutdown=this.onReady=null;L(this.da,"SystemSender",this.Vd,!1,this);L(window,"unload",this.dc,!1,this);L(document,"visibilitychange",this.Bc,!1,this);G(U,bb,"Version: 2.0.0.0047");gd&&gd(this)};c(T,N);t("cast.receiver.CastReceiverManager",T);var cd=function(b){var c=b.toLocaleLowerCase();return["com.vizio.vue","com.vizio.smartcast"].some(function(b){return c.includes(b)})};T.prototype.T=function(){return"CastReceiverManager"};T.prototype.start=function(b){if(b){if(!b)throw Error("Cannot validate undefined config.");if(void 0!=b.maxInactivity&&5>b.maxInactivity)throw Error("config.maxInactivity must be greater than or equal to 5 seconds.");Ka(this.A,b||{})}Xc.$();this.tc=!0;this.ka.open()};T.prototype.start=T.prototype.start;T.prototype.stop=function(){this.Z(),window.close()};T.prototype.stop=T.prototype.stop;T.prototype.qb=function(){return"ready"==this.ya};T.prototype.isSystemReady=T.prototype.qb;T.prototype.getSenders=function(){return Ga(this.P)};T.prototype.getSenders=T.prototype.getSenders;T.prototype.Jd=function(b){return this.P[b]?Ia(this.P[b]):null};T.prototype.getSender=T.prototype.Jd;T.prototype.Nd=function(){return null==this.Va?this.Ua?"notvisible":"unknown":this.Va?"visible":"notvisible"};T.prototype.getVisibilityState=T.prototype.Nd;T.prototype.Ld=function(){return null==this.Ua?this.Va?"notstandby":"unknown":this.Ua?"standby":"notstandby"};T.prototype.getStandbyState=T.prototype.Ld;T.prototype.qc=function(){"notstarted"==this.ya&&(this.ya=/[&?]google_cast_bg=true(&|$)/.test(window.location.search)?"startinginbackground":"starting");return this.ya};T.prototype.getSystemState=T.prototype.qc;T.prototype.Ad=function(){return this.Eb};T.prototype.getApplicationData=T.prototype.Ad;T.prototype.Dd=function(){return this.nc};T.prototype.getDeviceCapabilities=T.prototype.Dd;T.prototype.fe=function(b){this.qb()?dd(this,b):this.A.statusText!=b&&(this.A.statusText=b,this.Xa=!0)};T.prototype.setApplicationState=T.prototype.fe;T.prototype.he=function(b,c){this.qb()?dd(this,b,c):(void 0!=b&&b!=this.A.statusText&&(this.A.statusText=b,this.Xa=!0),void 0!=c&&c!=this.A.dialData&&(this.A.dialData=c,this.Xa=!0))};T.prototype.setLegacyApplicationState=T.prototype.he;T.prototype.je=function(b){if(0>b||1<b)throw Error("Invalid level value");this.da.send("SystemSender",{type:"setvolume",level:b})};T.prototype.setSystemVolumeLevel=T.prototype.je;T.prototype.ke=function(b){this.da.send("SystemSender",{type:"setvolume",muted:b})};T.prototype.setSystemVolumeMuted=T.prototype.ke;T.prototype.Md=function(){return this.Uc};T.prototype.getSystemVolume=T.prototype.Md;var dd=function(b,c,d){var e={type:"setappstate"};void 0!=c&&(e.statusText=c);void 0!=d&&(e.dialData=d);b.da.send("SystemSender",e)};T.prototype.Nc=function(b){this.da.send("SystemSender",{type:"startheartbeat",maxInactivity:b})};T.prototype.setInactivityTimeout=T.prototype.Nc;T.prototype.Oa=function(b,c){if("urn:x-cast:com.google.cast.system"==b)throw Error("Protected namespace");if(0!=b.lastIndexOf("urn:x-cast:",0))throw Error("Invalid namespace prefix");if(!this.s[b]){if(this.tc)throw Error("New namespaces can not be requested after start has been called");this.s[b]=new S(b,this.ka,Ga(this.P),c);qb(this,ha(rb,this.s[b]))}if(c&&this.s[b].pa!=c)throw Error("Invalid messageType for the namespace");return this.s[b]};T.prototype.getCastMessageBus=T.prototype.Oa;T.prototype.Kc=function(b){this.da.send("SystemSender",{type:"sendfeedbackmessage",message:b})};T.prototype.sendFeedbackMessage=T.prototype.Kc;T.prototype.Vd=function(b){b=b.data;switch(b.type){case"opened":I(U,"Underlying message bus is open");var c=Ga(this.s),d=this.A.statusText;b=this.A.dialData;var e={type:"ready"};d&&(e.statusText=d);b&&(e.dialData=b);e.activeNamespaces=c;e.version="2.0.0";e.messagesVersion="1.0";this.da.send("SystemSender",e);this.A.maxInactivity&&this.Nc(this.A.maxInactivity);break;case"closed":this.dc();break;case"error":this.dispatchEvent("error");break;case"ready":c=b.launchingSenderId;d=Ga(this.s);this.Bb=b.version;this.xb=!fd(this,this.Qd);var f=b.deviceCapabilities;this.nc=f?Ia(f):{};this.Eb={id:b.applicationId,name:b.applicationName,sessionId:b.sessionId,namespaces:d,launchingSenderId:c};this.ya="ready";for(e in this.s)this.s[e].Tb=!0;this.Xa&&(this.Xa=!1,dd(this,this.A.statusText,this.A.dialData));I(U,"Dispatching CastReceiverManager system ready event");c=new md(this.Eb);this.onReady&&this.onReady(c);this.dispatchEvent(c);break;case"senderconnected":c={id:b.senderId,userAgent:b.userAgent};if(cd(c.id))I(U,"Ignored connection from "+c.id);else{I(U,"Dispatching CastReceiverManager sender connected event ["+c.id+"]");Ha(this.P,c.id)&&H(U,"Unexpected connected message for already connected sender: "+c.id);this.P[c.id]=c;b=new id(c.id,c.userAgent);for(d in this.s)e=this.s[d],f=c.id,Ha(e.w,f)?H(Hc,"Unexpected sender already registered ["+e.O+", "+f+"]"):(I(Hc,"Registering sender ["+e.O+", "+f+"]"),e.w[f]=null);this.onSenderConnected&&this.onSenderConnected(b);this.dispatchEvent(b)}break;case"senderdisconnected":d=b.senderId;b=b.reason;if(cd(d))I(U,"Ignored disconnection from "+d);else{switch(b){case"closed_by_peer":b="requested_by_sender";break;case"transport_invalid_message":b="error";break;default:b="unknown"}I(U,"Dispatching sender disconnected event ["+d+"] Reason: "+b);if(Ha(this.P,d)){e=this.P[d].userAgent;delete this.P[d];b=new hd(d,e,b);for(c in this.s)e=this.s[c],f=d,Ha(e.w,f)&&(I(Hc,"Unregistering sender ["+e.O+", "+f+"]"),e.w[f]&&e.w[f].close(),delete e.w[f]);this.onSenderDisconnected&&this.onSenderDisconnected(b);this.dispatchEvent(b)}else H(U,"Unknown sender disconnected: "+d)}break;case"volumechanged":this.Uc=c={level:b.level,muted:b.muted};I(U,"Dispatching system volume changed event ["+c.level+", "+c.muted+"]");c=new ld(c);this.onSystemVolumeChanged&&this.onSystemVolumeChanged(c);this.dispatchEvent(c);break;case"visibilitychanged":this.xb||(c=b.visible,ed(this,m(c)?c:null));break;case"standbychanged":!this.xb&&(c=b.standby,c=m(c)?c:null,c!=this.Ua)&&(I(U,"Dispatching standby changed event "+c),this.Ua=c,c=new kd(1==c),this.onStandbyChanged&&this.onStandbyChanged(c),this.dispatchEvent(c));break;case"maxvideoresolutionchanged":c=b.height;I(U,"Dispatching maxvideoresolutionchanged "+c);c=new pd(c);this.onMaxVideoResolutionChanged&&this.onMaxVideoResolutionChanged(c);this.dispatchEvent(c);break;case"hdroutputtypechanged":this.Zb&&this.Zb(b.hdrType);break;case"screenresolutionchanged":break;case"feedbackstarted":I(U,"Dispatching feedback started event");c=new od();this.onFeedbackStarted?this.onFeedbackStarted(c):this.Kc("");break;default:throw Error("Unexpected message type: "+b.type)}};var ed=function(b,c){c==b.Va?I(U,"Ignoring visibility changed event, state is already "+c):(I(U,"Dispatching visibility changed event "+c),b.Va=c,c=new jd(0!=c),b.onVisibilityChanged&&b.onVisibilityChanged(c),b.dispatchEvent(c))};T.prototype.Bc=function(){this.xb&&ed(this,"visible"==document.visibilityState)};T.prototype.dc=function(){I(U,"Dispatching shutdown event");this.qc();this.ya="startinginbackground"==this.ya?"stoppinginbackground":"stopping";for(var b in this.s)this.s[b].Tb=!1;b=new nd();this.onShutdown&&this.onShutdown(b);this.dispatchEvent(b)};var fd=function(b,c){if(!c)return H(U,"Version not provided"),!1;if(!b.Bb)return H(U,"No System Version"),!1;var d=c.split(".");if(!d.length)return H(U,"Version provided is not valid: "+c),!1;var e=b.Bb.split(".");if(!e.length)return H(U,"System Version format is not valid "+b.Bb),!1;for(var f=0;f<d.length;f++){var g=parseInt(d[f],10);if(isNaN(g))return H(U,"Version is not numeric: "+c),!1;var h=e.length>f?parseInt(e[f],10):0;if(isNaN(h))return H(U,"System Version is not numeric: "+b.Bb),!1;if(g>h)return!1}return!0};T.prototype.m=function(){N.prototype.m.call(this),window&&M(window,"unload",this.dc,!1,this),document&&M(document,"visibilitychange",this.Bc,!1,this),delete T.Qb,pb(U,"Disposed "+this.T())};T.prototype.addEventListener=function(b,c,d,e){L(this,b,c,d,e)};T.prototype.addEventListener=T.prototype.addEventListener;T.prototype.removeEventListener=function(b,c,d,e){M(this,b,c,d,e)};T.prototype.removeEventListener=T.prototype.removeEventListener;T.prototype.dispatchEvent=function(b){return N.prototype.dispatchEvent.call(this,b)};T.prototype.dispatchEvent=T.prototype.dispatchEvent;o(T);T.getInstance=T.$;var gd=null,U=F("cast.receiver.CastReceiverManager");T.EventType={READY:"ready",SHUTDOWN:"shutdown",SENDER_CONNECTED:"senderconnected",SENDER_DISCONNECTED:"senderdisconnected",ERROR:"error",SYSTEM_VOLUME_CHANGED:"systemvolumechanged",VISIBILITY_CHANGED:"visibilitychanged",STANDBY_CHANGED:"standbychanged",MAX_VIDEO_RESOLUTION_CHANGED:"maxvideoresolutionchanged",FEEDBACK_STARTED:"feedbackstarted"};var V=function(b,c){K.call(this,b),this.data=c};c(V,K);T.Event=V;t("cast.receiver.system.DisconnectReason",{REQUESTED_BY_SENDER:"requested_by_sender",ERROR:"error",UNKNOWN:"unknown"});var hd=function(b,c,d){V.call(this,"senderdisconnected",b),this.senderId=b,this.userAgent=c,this.reason=d};c(hd,V);T.SenderDisconnectedEvent=hd;var id=function(b,c){V.call(this,"senderconnected",b),this.senderId=b,this.userAgent=c};c(id,V);T.SenderConnectedEvent=id;var jd=function(b){V.call(this,"visibilitychanged",b),this.isVisible=b};c(jd,V);T.VisibilityChangedEvent=jd;var kd=function(b){V.call(this,"standbychanged",null),this.isStandby=b};c(kd,V);T.StandbyChangedEvent=kd;var ld=function(b){V.call(this,"systemvolumechanged",b),this.data=b};c(ld,V);T.SystemVolumeChangedEvent=ld;var md=function(b){V.call(this,"ready",b),this.data=b};c(md,V);T.ReadyEvent=md;var nd=function(){V.call(this,"shutdown",null)};c(nd,V);T.ShutdownEvent=nd;var od=function(){V.call(this,"feedbackstarted",null)};c(od,V);T.FeedbackStartedEvent=od;var pd=function(b){V.call(this,"maxvideoresolutionchanged",null),this.height=b};c(pd,V);T.MaxVideoResolutionChangedEvent=pd;T.Config=function(){this.dialData=this.maxInactivity=this.statusText=void 0};var qd={maxInactivity:10},rd=function(){this.Y=T.$(),this.N=this.Y.Oa("urn:x-cast:com.google.cast.broadcast","JSON"),this.N.onMessage=this.J.bind(this)};rd.prototype.J=function(b){if(this.Y.qb())ob(sd,"Ignoring broadcast request, system is ready.");else{b=b.data;var c=b.type;if("APPLICATION_BROADCAST"!=c)H(sd,"Ignoring message type: "+c);else if(c=b.namespace){var d=this.Y.s[c]||null;if(d)switch(c){case"urn:x-cast:com.google.cast.media":var e=JSON.parse(b.message);if("PRECACHE"!=e.type){H(sd,"Unsupported type for media namespace: "+e.type);break}d.Ya(new Gc(c,"__broadcast__",b.message));break;default:H(sd,"Unsupported namespace: "+b.namespace)}else H(sd,"Invalid message bus for namespace: "+c)}else H(sd,"Missing namespace: "+c)}};o(rd);var sd=F("cast.receiver.BroadcastManager");t("cast.receiver.BroadcastManager.NAMESPACE_PREFIX","urn:x-cast:");t("cast.receiver.BroadcastManager.BroadcastRequest",function(){});var td=function(){return!(!v.__platform__||!v.__platform__.metrics)};t("cast.receiver.analytics.logEvent",function(b){td()&&v.__platform__.metrics.logEventToUma(b)});t("cast.receiver.analytics.logBool",function(b,c){td()&&v.__platform__.metrics.logBoolToUma(b,c)});t("cast.receiver.analytics.logInt",function(b,c){td()&&v.__platform__.metrics.logIntToUma(b,c)});t("cast.receiver.analytics.logHistogramValue",function(b,c,d,e,f){td()&&v.__platform__.metrics.logHistogramValueToUma(b,c,d,e,f)});P=function(){this.onDisplayStatus=this.onUserAction=this.onLoadBySearch=this.onLoadByEntity=this.onSetCredentials=null,this.N=T.$().Oa("urn:x-cast:com.google.cast.cac","JSON"),this.N.onMessage=this.J.bind(this),this.zb=new z()};t("cast.receiver.CommandAndControlManager",P);P.prototype.J=function(b){var c=b.data,d=c.type;b=b.senderId;var e;switch(d){case"SET_CREDENTIALS":e=this.onSetCredentials;break;case"LOAD_BY_ENTITY":e=this.onLoadByEntity;break;case"LOAD_BY_SEARCH":e=this.onLoadBySearch;break;case"USER_ACTION":e=this.onUserAction;break;case"DISPLAY_STATUS":e=this.onDisplayStatus;break;case"SUCCESS":case"ERROR":d=c.requestId;(b=this.zb.get(d))?(this.zb.remove(d),b.resolve(c)):ob(xd,"No matching request for response "+JSON.stringify(c));return;default:this.K("Unsupported event "+d,b,c,"INVALID_REQUEST");return}e?ud(this,b,c,e):this.K("Handler for "+d+" not implemented",b,c,"INVALID_COMMAND")};var ud=function(b,c,d,e){e=e(d),fc(e).then(function(e){b.N.send(c,wd(d,e))},function(e){b.K("Got a rejected promise "+JSON.stringify(e),c,d,"APP_ERROR")})},vd=function(b,c,d){H(xd,b);b=new zd(d);b.requestId=c.requestId;return b},wd=function(b,c){if(!c)return vd("No response data",b,"APP_ERROR");switch(c.type){case"SUCCESS":case"ERROR":return c.requestId=b.requestId,c}return vd("Invalid response data "+JSON.stringify(c),b,"APP_ERROR")};P.prototype.K=function(b,c,d,e){this.N.send(c,vd(b,d,e))};P.prototype.Wd=function(b,c){var d=ia();if(Qa(this.zb.I,d))return Promise.reject(Error("Duplicate request"));b=new yd(b,c);b.requestId=d;this.N.send("system-0",b);d=gc();this.zb.set(b.requestId,d);return Promise.resolve(d.Zd)};P.prototype.playString=P.prototype.Wd;o(P);P.getInstance=P.$;P.NAMESPACE="urn:x-cast:com.google.cast.cac";var xd=F("cast.receiver.CommandAndControlManager");P.MessageType={SET_CREDENTIALS:"SET_CREDENTIALS",LOAD_BY_ENTITY:"LOAD_BY_ENTITY",LOAD_BY_SEARCH:"LOAD_BY_SEARCH",USER_ACTION:"USER_ACTION",DISPLAY_STATUS:"DISPLAY_STATUS",PLAY_STRING:"PLAY_STRING",SUCCESS:"SUCCESS",ERROR:"ERROR"};P.PlayStringId={FREE_TRIAL_ABOUT_TO_EXPIRE:"FREE_TRIAL_ABOUT_TO_EXPIRE",SUBSCRIPTION_ABOUT_TO_EXPIRE:"SUBSCRIPTION_ABOUT_TO_EXPIRE",STREAM_HIJACKED:"STREAM_HIJACKED"};D=function(b){this.type=b};P.RequestData=D;o=function(){this.type="SET_CREDENTIALS"};c(o,D);P.SetCredentialsRequestData=o;o=function(){this.type="LOAD_BY_ENTITY"};c(o,D);P.LoadByEntityRequestData=o;o=function(){this.type="LOAD_BY_SEARCH"};c(o,D);P.LoadBySearchRequestData=o;var yd=function(b,c){this.type="PLAY_STRING",this.stringId=b,this.arguments=c};c(yd,D);P.PlayStringRequestData=yd;P.UserAction={LIKE:"LIKE",DISLIKE:"DISLIKE",FOLLOW:"FOLLOW",UNFOLLOW:"UNFOLLOW",FLAG:"FLAG",SKIP_AD:"SKIP_AD"};P.UserActionContext={UNKNOWN_CONTEXT:"UNKNOWN_CONTEXT",TRACK:"TRACK",ALBUM:"ALBUM",ARTIST:"ARTIST",PLAYLIST:"PLAYLIST",EPISODE:"EPISODE",SERIES:"SERIES",MOVIE:"MOVIE",CHANNEL:"CHANNEL",TEAM:"TEAM",PLAYER:"PLAYER",COACH:"COACH"};o=function(){this.type="USER_ACTION"};c(o,D);P.UserActionRequestData=o;o=function(){this.type="DISPLAY_STATUS"};c(o,D);P.DisplayStatusRequestData=o;P.ErrorCode={APP_ERROR:"APP_ERROR",NOT_SUPPORTED:"NOT_SUPPORTED",AUTHENTICATION_EXPIRED:"AUTHENTICATION_EXPIRED",PREMIUM_ACCOUNT_REQUIRED:"PREMIUM_ACCOUNT_REQUIRED",CONCURRENT_STREAM_LIMIT:"CONCURRENT_STREAM_LIMIT",PARENTAL_CONTROL_RESTRICTED:"PARENTAL_CONTROL_RESTRICTED",NOT_AVAILABLE_IN_REGION:"NOT_AVAILABLE_IN_REGION",CONTENT_ALREADY_PLAYING:"CONTENT_ALREADY_PLAYING",INVALID_COMMAND:"INVALID_COMMAND",INVALID_REQUEST:"INVALID_REQUEST"};o=function(b){this.type=b};c(o,D);P.ResponseData=o;D=function(b){this.type="SUCCESS",this.status=b};c(D,o);P.SuccessResponseData=D;var zd=function(b,c){this.type="ERROR",this.code=b,this.reason=c};c(zd,o);P.ErrorResponseData=zd;D=!(!v.__platform__||!v.__platform__.crypto);t("cast.receiver.cryptokeys.getKeyByName",v.__platform__&&v.__platform__.cryptokeys?v.__platform__.cryptokeys.getKeyByName:window.cryptokeys&&window.cryptokeys.getKeyByName);t("cast.receiver.crypto.decrypt",D?v.__platform__.crypto.decrypt:window.crypto.subtle.decrypt);t("cast.receiver.crypto.encrypt",D?v.__platform__.crypto.encrypt:window.crypto.subtle.encrypt);t("cast.receiver.crypto.sign",D?v.__platform__.crypto.sign:window.crypto.subtle.sign);t("cast.receiver.crypto.unwrapKey",D?v.__platform__.crypto.unwrapKey:window.crypto.subtle.unwrapKey);t("cast.receiver.crypto.verify",D?v.__platform__.crypto.verify:window.crypto.subtle.verify);t("cast.receiver.crypto.wrapKey",D?v.__platform__.crypto.wrapKey:window.crypto.subtle.wrapKey);var Ad=/#(.)(.)(.)(.)/,Bd=function(b){if(!Cd.test(b))throw Error("'"+b+"' is not a valid alpha hex color");5==b.length&&(b=b.replace(Ad,"#$1$1$2$2$3$3$4$4"));b=b.toLowerCase();return[parseInt(b.substr(1,2),16),parseInt(b.substr(3,2),16),parseInt(b.substr(5,2),16),parseInt(b.substr(7,2),16)/255]},Cd=/^#(?:[0-9a-f]{4}){1,2}$/i,Dd=function(b){var c=b.slice(0);c[3]=Math.round(1e3*b[3])/1e3;return"rgba("+c.join(",")+")"},Ed=!Va&&!A||A&&9<=Number(B)||Va&&C("1.9.1");A&&C("9");var Fd=function(b,c,d){function e(d){d&&c.appendChild(p(d)?b.createTextNode(d):d)}for(var f=1;f<d.length;f++){var g=d[f];if(!da(g)||ea(g)&&0<g.nodeType)e(g);else{var h;a:{if(g&&"number"==typeof g.length){if(ea(g)){h="function"==typeof g.item||"string"==typeof g.item;break a}if(r(g)){h="function"==typeof g.item;break a}}h=!1}xa(h?Ba(g):g,e)}}},Gd=function(b){this.jb=b||l.document||document};x=Gd.prototype;x.getElementsByTagName=function(b,c){return(c||this.jb).getElementsByTagName(String(b))};x.createElement=function(b){return this.jb.createElement(String(b))};x.createTextNode=function(b){return this.jb.createTextNode(String(b))};x.appendChild=function(b,c){b.appendChild(c)};x.append=function(b,c){var d=b;w(d,"Node cannot be null or undefined.");Fd(9==d.nodeType?d:d.ownerDocument||d.document,b,arguments)};x.canHaveChildren=function(b){if(1!=b.nodeType)return!1;switch(b.tagName){case"APPLET":case"AREA":case"BASE":case"BR":case"COL":case"COMMAND":case"EMBED":case"FRAME":case"HR":case"IMG":case"INPUT":case"IFRAME":case"ISINDEX":case"KEYGEN":case"LINK":case"NOFRAMES":case"NOSCRIPT":case"META":case"OBJECT":case"PARAM":case"SCRIPT":case"SOURCE":case"STYLE":case"TRACK":case"WBR":return!1}return!0};x.removeNode=function(b){return b&&b.parentNode?b.parentNode.removeChild(b):null};x.oc=function(b){return Ed&&void 0!=b.children?b.children:ya(b.childNodes,function(b){return 1==b.nodeType})};x.contains=function(b,c){if(!b||!c)return!1;if(b.contains&&1==c.nodeType)return b==c||b.contains(c);if("undefined"!=typeof b.compareDocumentPosition)return b==c||!!(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b};var Hd=function(b,c,d,e){J.call(this);this.b=b;this.ib=this.Ab=null;this.za=[];this.Jb=!1;this.Gb="cast-captions-"+Math.floor(1e6*Math.random()).toString();this.ad="["+this.Gb+'="true"]::cue ';this.bd=new RegExp(/^[\.'":%,;\s\-0-9a-z]+$/i);b=ba(c);for(c=b.next();!c.done;c=b.next()){c=c.value;var f=c.trackContentId;if("TEXT"==c.type&&f){var g=c.trackContentType;(0==oa("vtt",f.substr(f.length-3,3))||m(g)&&0==oa(g,"text/vtt"))&&(f=document.createElement("track"),f.src=c.trackContentId,f.id=c.trackId,f.label=c.name,f.srclang=c.language,f.kind=(c.subtype||"CAPTIONS").toLowerCase(),this.za.push(f),this.b.appendChild(f))}}Pd(this);e&&Sd(this,e);Kd(this,d)};c(Hd,J);Hd.prototype.T=function(){return"TextTracksManager"};var Id=function(b,c){b=ba(b.za);for(var d=b.next();!d.done;d=b.next()){var d=d.value,e=d.track;c(d)?e.mode="showing":(e.mode="showing",e.mode="disabled")}},Jd=function(b){return b.za.map(function(b){return parseInt(b.id,10)})},Kd=function(b,c){Id(b,function(b){return 0<=va(c,parseInt(b.id,10))})},Ld=function(b,c){Id(b,function(b){return ja(c,b.srclang)})},Md=function(b){var c=[];b=ba(b.za);for(var d=b.next();!d.done;d=b.next())d=d.value,"showing"==d.track.mode&&c.push(parseInt(d.id,10));return c},Nd=function(b){b.ib&&(b.b.removeAttribute(b.Gb),document.head.removeChild(b.ib),b.Ab=null)},Od=function(b){b.Jb&&(b.b.removeAttribute("crossorigin"),b.Jb=!1)},W=function(b,c,d){1==d||b.bd.test(c)?b.Ab.insertRule(b.ad+"{ "+c+" }",b.Ab.cssRules.length):ob(Td,"Invalid css cue: "+c)},Pd=function(b){Nd(b);Od(b);var c=la||(la=new Gd()),d=c.jb,e=c.createElement("STYLE");e.type="text/css";c.getElementsByTagName("HEAD")[0].appendChild(e);e.styleSheet?e.styleSheet.cssText="":e.appendChild(d.createTextNode(""));b.ib=e;b.Ab=b.ib.sheet;W(b,"font-size: 4.1vh;");W(b,"font-family: monospace;");W(b,"font-style: normal;");W(b,"font-weight: normal;");W(b,"background-color: black;");W(b,"color: white;");b.b.setAttribute(b.Gb,!0);0<b.za.length&&!b.b.getAttribute("crossorigin")&&(b.b.setAttribute("crossorigin","anonymous"),b.Jb=!0)},Qd=function(b,c){var d;try{d=Dd(Bd(b))}catch(c){ob(Td,"Invalid color: "+b)}if(d)switch(b="rgba(204, 204, 204, "+parseInt(b.substring(7,9),16)+")",c){case"OUTLINE":return"text-shadow: 0 0 4px "+d+", 0 0 4px "+d+", 0 0 4px "+d+", 0 0 4px "+d+";";case"DROP_SHADOW":return"text-shadow: 0px 2px 3px "+d+", 0px 2px 4px "+d+", 0px 2px 5px "+d+";";case"RAISED":return"text-shadow: 1px 1px "+d+", 2px 2px "+d+", 3px 3px "+d+";";case"DEPRESSED":return"text-shadow: 1px 1px "+b+", 0 1px "+b+", -1px -1px "+d+", 0 -1px "+d+";"}return""},Rd=function(b){switch(b){case"BOLD":return"font-weight: bold;";case"BOLD_ITALIC":return"font-style: italic; font-weight: bold;";case"ITALIC":return"font-style: italic;"}return"font-style: normal;"},Sd=function(b,c){if(m(c.foregroundColor))try{var d=Dd(Bd(c.foregroundColor));W(b,"color: "+d+";",!0)}catch(b){ob(Td,"Invalid color: "+c.foregroundColor)}if(m(c.backgroundColor))try{var e=Dd(Bd(c.backgroundColor));W(b,"background-color: "+e+";",!0)}catch(b){ob(Td,"Invalid color: "+c.backgroundColor)}m(c.fontScale)&&W(b,"font-size: "+100*c.fontScale+"%;");if(m(c.fontFamily)||m(c.fontGenericFamily)){var d=c.fontFamily,e=c.fontGenericFamily,f="font-family: ",g="";m(d)&&(f+='"'+d+'"',g=", ");if(m(e)){var h;switch(e){case"SANS_SERIF":h='"Droid Sans", sans-serif';break;case"MONOSPACED_SANS_SERIF":h='"Droid Sans Mono", monospace';break;case"SERIF":h='"Droid Serif", serif';break;case"MONOSPACED_SERIF":h='"Cutive Mono"';break;case"CASUAL":h='"Short Stack"';break;case"CURSIVE":h="Quintessential";break;case"SMALL_CAPITALS":h='"Alegreya Sans SC"'}f+=g+h}W(b,f+";")}m(c.fontStyle)&&W(b,Rd(c.fontStyle));m(c.edgeType)&&(h=m(c.foregroundColor)?c.foregroundColor:"#FFFFFFFF",c=m(c.edgeColor)?Qd(c.edgeColor,c.edgeType):Qd(h,c.edgeType),W(b,c,!0))};Hd.prototype.m=function(){J.prototype.m.call(this);for(var b=ba(this.za),c=b.next();!c.done;c=b.next())this.b.removeChild(c.value);this.za.length=0;Nd(this);Od(this);G(Td,E,"Disposed "+this.T())};var Td=F("cast.receiver.TextTracksManager"),Ud=function(b,c){this.D=b,this.b=c,this.Ub=this.Kb=this.Lb=n,this.Fa=0,this.U=this.Na=null,this.Ec=0,this.l=this.u=null,this.Ta=!1,this.ob=!0,L(this.b,"error",this.Xb,!1,this),L(this.b,"ended",this.vb,!1,this),L(this.b,"loadedmetadata",this.ac,!1,this),I(this.D,"Using default Player")};x=Ud.prototype;x.Dc=function(b,c,d,e){Wd(this),this.ob=b,this.Fa=c,this.Ec=e||0,this.U=d||null};x.Xb=function(b){Wd(this),this.Lb(b)};x.vb=function(){Wd(this),this.Kb()};x.ac=function(){this.u&&this.l&&Kd(this.u,this.l),this.Ub()};x.registerErrorCallback=function(b){this.Lb=b};x.registerEndedCallback=function(b){this.Kb=b};x.registerLoadCallback=function(b){this.Ub=b};x.unregisterErrorCallback=function(){this.Lb=n};x.unregisterEndedCallback=function(){this.Kb=n};x.unregisterLoadCallback=function(){this.Ub=n};var Vd=function(b){var c=b.b.duration;if(isNaN(c)||null==b.U)return c;if(null!=b.Na)return b.Na;b.Na=0<=b.U?Math.min(b.Ec+b.U,c):Math.max(c+b.U,b.Fa);return b.Na},Wd=function(b){null!=b.U&&(M(b.b,"timeupdate",b.Cc,!1,b),b.Na=null,b.U=null)};Ud.prototype.Cc=function(){Xd(this)};var Xd=function(b){if(null==b.U)return!1;var c=Vd(b);return isNaN(c)?!1:b.b.currentTime>=c?(b.vb(),!0):!1};x=Ud.prototype;x.load=function(b,c,d,e,f){this.u&&(this.u.Z(),this.u=null),this.Ta=!1,e&&e.tracks&&this.b&&(this.u&&this.u.Z(),this.u=new Hd(this.b,e.tracks,e.activeTrackIds||[],e.textTrackStyle||null),e.language&&Ld(this.u,e.language)),null!=this.U&&L(this.b,"timeupdate",this.Cc,!1,this),f||(this.Fa=d&&0<d?d:0,I(this.D,"Load - contentId: "+b+" autoplay: "+c+" time: "+this.Fa),this.b.autoplay=!1,b&&(this.b.src=b),this.b.autoplay=c,this.b.load())};x.reset=function(){this.Ta=!1,this.u&&(this.u.Z(),this.u=null),this.l=null,this.b.removeAttribute("src"),this.Fa=0,this.b.load(),Wd(this)};x.play=function(){this.Ta=!1,this.b.play()};x.seek=function(b,c){this.b.currentTime!=b&&(this.b.currentTime=b),Xd(this)||("PLAYBACK_START"==c&&this.b.paused?this.b.play():"PLAYBACK_PAUSE"!=c||this.b.paused||this.b.pause())};x.pause=function(){this.Ta=!0,this.b.pause()};x.getState=function(){null==this.ob&&(this.ob=this.b.autoplay);return this.b.paused||isNaN(this.b.duration)?this.b.duration&&(this.b.currentTime||0==this.b.currentTime)&&this.b.currentTime<Vd(this)?this.b.currentTime==this.Fa&&this.ob&&!this.Ta?"BUFFERING":"PAUSED":"IDLE":"PLAYING"};x.getCurrentTimeSec=function(){var b=Vd(this);return isNaN(b)?this.b.currentTime:this.b.currentTime<b?this.b.currentTime:b};x.getDurationSec=function(){return Vd(this)};x.getVolume=function(){return{level:this.b.volume,muted:this.b.muted}};x.setVolume=function(b){m(b.level)&&(this.b.volume=b.level),m(b.muted)&&(this.b.muted=b.muted)};x.editTracksInfo=function(b){if(this.u){if(b.textTrackStyle){var c=this.u,d=b.textTrackStyle;Pd(c);Sd(c,d)}b.language?Ld(this.u,b.language):b.activeTrackIds&&Kd(this.u,b.activeTrackIds)}Yd(this,b.activeTrackIds);return this.l};var Yd=function(b,c){b.l=c?c.slice(0):b.l;b.l=b.l||[];if(b.u){var d=Jd(b.u);b.l=b.l.filter(function(b){return!d.includes(b)}).concat(Md(b.u))}0==b.l.length&&(b.l=null)},Zd=function(b){J.call(this),this.Qa=b,this.i={}};u(Zd,J);var $d=[];x=Zd.prototype;x.Ia=function(b,c,d,e){"array"!=ca(c)&&(c&&($d[0]=c.toString()),c=$d);for(var f=0;f<c.length;f++){var g=L(b,c[f],d||this.handleEvent,e||!1,this.Qa||this);if(!g)break;this.i[g.key]=g}return this};x.ic=function(b,c,d,e,f){if("array"==ca(c))for(var g=0;g<c.length;g++)this.ic(b,c[g],d,e,f);else d=d||this.handleEvent,f=f||this.Qa||this,d=Nb(d),e=!!e,c=b&&b[vb]?b.Pa(c,d,e,f):b?(b=Lb(b))?b.Pa(c,d,e,f):null:null,c&&(Gb(c),delete this.i[c.key]);return this};x.fc=function(){Ea(this.i,function(b,c){this.i.hasOwnProperty(c)&&Gb(b)},this),this.i={}};x.m=function(){Zd.ab.m.call(this),this.fc()};x.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae={we:"persistent-release-message"},be=new Uint8Array([43,248,102,128,198,229,78,36,190,35,15,129,90,96,110,178]),X=function(b,c){N.call(this),this.Pd=c,this.H=b.createSession("persistent-license"),this.sessionId="",this.expiration=this.H.expiration,this.closed=this.H.closed,this.keyStatuses=this.H.keyStatuses,this.Qa=new Zd(this),qb(this,ha(rb,this.Qa))};c(X,N);t("cast.receiver.eme.KeySession",X);X.createSession=function(b,c){a:{for(var d in ae)if(ae[d]==c)break a;throw Error("Unknown key session type: "+c)}b=new X(b,c);b.Qa.Ia(b.H,"message",b.Ic).Ia(b.H,"keystatuseschange",b.Ic);return b};X.prototype.generateRequest=function(b,c){if("persistent-release-message"==this.Pd){if("cenc"!=b)throw Error("Only cenc initDataType is supported for persistent-release-message session type.");var d=new Uint8Array([0,0,0,0,112,115,115,104,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2]);d.set(be,12);new DataView(d.buffer).setUint32(0,d.length);var e=new Uint8Array(c.byteLength+d.byteLength);e.set(new Uint8Array(c),0);e.set(d,c.byteLength);c=e}return this.H.generateRequest(b,c).then(s(function(){this.sessionId=this.H.sessionId},this))};X.prototype.generateRequest=X.prototype.generateRequest;X.prototype.load=function(b){return this.H.load(b)};X.prototype.load=X.prototype.load;X.prototype.update=function(b){return this.H.update(b)};X.prototype.update=X.prototype.update;X.prototype.close=function(){return this.H.close()};X.prototype.close=X.prototype.close;X.prototype.remove=function(){return this.H.remove()};X.prototype.remove=X.prototype.remove;X.prototype.Ic=function(b){var c=new K(b.type);Ka(c,b.Da);c.target=this;this.dispatchEvent(c)};var ce=F("cast");t("cast.receiver.logger",ce);t("cast.receiver.LoggerLevel",{DEBUG:0,VERBOSE:500,INFO:800,WARNING:900,ERROR:1e3,NONE:1500});ce.Oc=function(b){ce&&ce.hc(jb(b))};ce.setLevelValue=ce.Oc;if(ce){o=1e3;if(document.currentScript){P=document.currentScript.src;(P.includes("/df/cast/sdk/")||P.includes("/staging/cast/sdk/"))&&(o=800)}D=parseInt(Ac("log-level-cast-receiver"),10);ce.Oc(D||o)}var de=function(){this.M=[],this.R=[]};de.prototype.enqueue=function(b){this.R.push(b)};var ee=function(b){0==b.M.length&&(b.M=b.R,b.M.reverse(),b.R=[]);return b.M.pop()};x=de.prototype;x.Rb=function(){return 0==this.M.length&&0==this.R.length};x.clear=function(){this.M=[],this.R=[]};x.contains=function(b){return 0<=va(this.M,b)||0<=va(this.R,b)};x.remove=function(b){var c;c=this.M;var d=wa(c,b);0<=d?(Aa(c,d),c=!0):c=!1;return c||za(this.R,b)};x.rc=function(){for(var b=[],c=this.M.length-1;0<=c;--c)b.push(this.M[c]);for(var d=this.R.length,c=0;c<d;++c)b.push(this.R[c]);return b};var fe=function(b){this.itemId=b,this.customData=this.activeTrackIds=this.preloadTime=this.playbackDuration=this.startTime=this.autoplay=this.media=void 0};t("cast.receiver.media.QueueItem",fe);fe.prototype.clone=function(b){var c=new fe(this.itemId);c.autoplay=this.autoplay;c.startTime=this.startTime;c.playbackDuration=this.playbackDuration;c.preloadTime=this.preloadTime;c.activeTrackIds=this.activeTrackIds;c.customData=this.customData;(!m(b)||b)&&(c.media=this.media);return c};var Y=function(b,c,d){this.a=b,this.V=c,this.h=d};t("cast.receiver.MediaQueue",Y);Y.prototype.pc=function(b){if(!m(b)||b)return this.a;for(var c=[],d=0;d<this.a.length;d++)c.push(this.a[d].clone(b));return c};Y.prototype.getItems=Y.prototype.pc;Y.prototype.Ed=function(){return this.a.length};Y.prototype.getLength=Y.prototype.Ed;Y.prototype.Id=function(){return this.V};Y.prototype.getRepeatMode=Y.prototype.Id;Y.prototype.Cd=function(){if(0>this.h)return null;var b=this.a[this.h].itemId;ta(b);return b};Y.prototype.getCurrentItemId=Y.prototype.Cd;Y.prototype.Ea=function(){return 0>this.h?null:this.a[this.h]};Y.prototype.getCurrentItem=Y.prototype.Ea;var ge=function(b,c){for(var d=[],e=0;e<c.length;e++)for(var f=0;f<b.a.length;f++)if(c[e]==b.a[f].itemId){d.push(c[e]);break}return d},he=function(b){return"REPEAT_ALL_AND_SHUFFLE"==b.V},ie=function(b,c){for(var d=0;d<b.a.length;d++)if(c==b.a[d].itemId)return d;return-1},je=function(b){return"REPEAT_ALL_AND_SHUFFLE"==b.V||"REPEAT_ALL"==b.V};Y.prototype.reset=function(){this.h=-1};var ke=function(b,c){c=ie(b,c);if(-1==c||b.h==c)return!1;b.h=c;return!0},le=function(b,c,d){if(0>b.h)return"QUEUE_ENDED";c=b.h+c;var e=!1;c>=b.a.length?(c=je(b)?c%b.a.length:-1,e=!0):0>c&&(c=je(b)?b.a.length+(c+1)%b.a.length-1:0,e=!0);d&&(b.h=c);return-1==c?"QUEUE_ENDED":e?he(b)?(me(b),"QUEUE_SHUFFLED"):"QUEUE_LOOP":"QUEUE_ACTIVE"},me=function(b){var c=b.a.length,d,e;if(!(3>b.a.length))for(;0<c;)e=Math.floor(Math.random()*c),--c,d=b.a[e],b.a[e]=b.a[c],b.a[c]=d},ne=function(b){var c=this;this.Ac=b;this.X=null;this.sc="sdr";this.Gc=function(){c.Ac()}};B=function(b,c,d){N.call(this);var e=this,f=T.$();rd.$();this.oa=d||"local";this.sb=f.Oa("urn:x-cast:com.google.cast.media","JSON");this.ba=0;this.Wa=this.ma=null;this.Xd=1;this.pe=c||15;this.Sc=this.xc=this.Ha=this.la=this.g=this.c=null;this.aa=!1;this.l=this.ja=this.o=null;this.pb=!0;this.ea=null;this.Fb=this.Zc.bind(this);this.f=null;this.Cb=!1;this.sa=null;this.Vb=1;this.yb=-1;this.rb=new de();this.Sa=!1;this.customizedStatusCallback=this.cd;this.onLoad=this.kd;this.onPlay=this.od;this.onPlayAgain=this.nd;this.onSeek=this.ud;this.onPause=this.md;this.onStop=this.wd;this.onSetVolume=this.vd;this.onEditTracksInfo=this.ed;this.onQueueLoad=this.rd;this.onQueueInsert=this.qd;this.onQueueUpdate=this.mc;this.onQueueRemove=this.sd;this.onQueueReorder=this.td;this.onMetadataLoaded=this.ld;this.onLoadMetadataError=this.jd;this.onEnded=this.fd;this.onQueueEnded=this.pd;this.onAbort=n;this.onError=this.gd;this.onMediaStatus=this.onLocalRequestError=n;this.onCancelPreload=this.onPreload=this.onPrecache=null;this.onGetStatus=this.hd;this.eb=new ne(this.j.bind(this,!1));f.Zb=function(b){var c=e.eb;c.sc=b;c.Ac()};this.Pc(b);this.sb.onMessage=this.$b.bind(this);this.ea=uc(this.Fb,1e3)};c(B,N);t("cast.receiver.MediaManager",B);B.prototype.T=function(){return"MediaManager"};B.prototype.Fd=function(){return this.g?this.g.media||null:null};B.prototype.getMediaInformation=B.prototype.Fd;B.prototype.Gd=function(){return this.f};B.prototype.getMediaQueue=B.prototype.Gd;B.prototype.Od=function(b,c,d,e,f){b=new Ge(b),b.insertBefore=null!=c?c:void 0,b.currentItemIndex=null!=d?d:void 0,b.currentItemId=null!=e?e:void 0,b.currentTime=null!=f?f:void 0,b.type="QUEUE_INSERT",re(this,this.oa,b)};B.prototype.insertQueueItems=B.prototype.Od;B.prototype.be=function(b,c,d){b=new He(b),b.currentItemId=null!=c?c:void 0,b.currentTime=null!=d?d:void 0,b.type="QUEUE_REMOVE",re(this,this.oa,b)};B.prototype.removeQueueItems=B.prototype.be;B.prototype.ie=function(b,c,d){c=!m(c)||c;if(d&&!c)throw Error("No broadcast call but status customData has been provided");this.g&&(this.g.media=b);c&&this.j(!0,null,d)};B.prototype.setMediaInformation=B.prototype.ie;var oe=function(b){for(var c=0;c<b.length;c++)if(!m(b[c].trackId)||!m(b[c].type))return!1;return!0},pe=function(b,c){if(!c)return!0;if(!b)return!1;b=ba(b);for(var d=b.next();!d.done;d=b.next())if(d=d.value,"TEXT"==d.type&&m(d.language)&&ja(d.language,c))return!0;return!1},qe=function(b,c){if(!c||0==c.length)return!0;if(!b||c.length>b.length)return H(Z,"Too many track IDs"),!1;for(var d=0,e=0,f=0;f<c.length;f++){for(var g=!1,h=0;h<b.length;h++)if(c[f]==b[h].trackId){g=!0;break}if(!g)return H(Z,"Track ID does not exist: "+c[f]),!1;"AUDIO"==b[h].type?e++:"VIDEO"==b[h].type&&d++;if(1<e||1<d)return H(Z,"Maximum one active video and one active audio track supported"),!1}return!0},re=function(b,c,d){d.mediaSessionId=b.ba,b.$b(new Ic("message",c,d))};B.prototype.$b=function(b){var c=b.data,d=c.type;if(!this.Sa||this.rb.Rb()&&"LOAD"==d){b=b.senderId;var e;e=c.type;var f=c.requestId;if(q(f)&&f==Math.floor(f)){var g=!1;void 0!=c.mediaSessionId&&c.mediaSessionId!=this.ba?(H(Z,"Invalid media session ID: "+c.mediaSessionId+"  does not match the expected ID: "+this.ba),g=!0):"LOAD"!=e&&"PLAY_AGAIN"!=e&&"GET_STATUS"!=e&&"QUEUE_LOAD"!=e&&"PRECACHE"!=e&&(m(c.mediaSessionId)?"IDLE"==se(this)&&(H(Z,"Unexpected command, player is in IDLE state so the media session ID is not valid yet"),g=!0):(H(Z,"Invalid media session ID, it is undefined"),g=!0));g?(this.wa(b,f,"INVALID_REQUEST","INVALID_MEDIA_SESSION_ID"),e=!1):(G(Z,E,"MediaManager message received"),e=!0)}else H(Z,"Ignoring request, requestId is not an integer: "+f),e=!1;if(e){e=c.requestId;delete c.type;f=null;switch(d){case"LOAD":this.Cb=!1;f=xe(this,b,c,!0);break;case"GET_STATUS":I(Z,"Dispatching MediaManager getStatus event");c=new $("getstatus",c,b);this.onGetStatus&&this.onGetStatus(c);this.dispatchEvent(c);f=null;break;case"PLAY":I(Z,"Dispatching MediaManager play event");c=new $("play",c,b);this.onPlay&&this.onPlay(c);this.dispatchEvent(c);f=null;break;case"PLAY_AGAIN":I(Z,"Dispatching MediaManager play again event");c=new $("playagain",c,b);this.onPlayAgain&&this.onPlayAgain(c);this.dispatchEvent(c);f=null;break;case"SEEK":m(c.currentTime)||m(c.relativeTime)?(I(Z,"Dispatching MediaManager seek event"),c=new $("seek",c,b),this.onSeek&&this.onSeek(c),this.dispatchEvent(c),f=null):(H(Z,"currentTime or relativeTime is required"),f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"});break;case"STOP":I(Z,"Dispatching MediaManager stop event");c=new $("stop",c,b);this.onStop&&this.onStop(c);this.dispatchEvent(c);f=null;break;case"PAUSE":I(Z,"Dispatching MediaManager pause event");c=new $("pause",c,b);this.onPause&&this.onPause(c);this.dispatchEvent(c);f=null;break;case"SET_VOLUME":c.volume&&(m(c.volume.level)||m(c.volume.muted))?void 0!=c.volume.level&&0>c.volume.level||1<c.volume.level?(H(Z,"volume level is invalid"),f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"}):(I(Z,"Dispatching MediaManager setvolume event"),c=new $("setvolume",c,b),this.onSetVolume&&this.onSetVolume(c),this.dispatchEvent(c),f=null):(H(Z,"volume is invalid"),f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"});break;case"EDIT_TRACKS_INFO":I(Z,"Dispatching MediaManager ediTracksInfo event");qe(this.g.media.tracks,c.activeTrackIds)?(d=new $("edittracksinfo",c,b),c.textTrackStyle&&(this.g.media.textTrackStyle=c.textTrackStyle),c.activeTrackIds&&(this.l=c.activeTrackIds),this.onEditTracksInfo&&this.onEditTracksInfo(d),this.dispatchEvent(d),f=null):(H(Z,"Invalid track info"),f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"});break;case"QUEUE_LOAD":this.Cb=!0;I(Z,"Dispatching MediaManager queueLoad event");d=!1;if(m(c.startIndex)&&(!q(c.startIndex)||0>c.startIndex))H(Z,"Invalid startIndex"),f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};else{f=(c.startIndex||0)+1;if(!c.items||c.items.length<f)H(Z,"Invalid number of items"),d=!0;else if(c.repeatMode&&!Wc(c.repeatMode))H(Z,"Invalid repeatMode"),d=!0;else for(f=0;f<c.items.length;f++)c.items[f].media?m(c.items[f].itemId)?(H(Z,"ItemId is not undefined, element at index: "+f),d=!0):c.items[f].itemId=this.Vb++:(H(Z,"Media is mandatory, missing in element at index: "+f),d=!0);d?f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"}:(c.items=Be(c.items),c=new $("queueload",c,b),this.onQueueLoad&&this.onQueueLoad(c),this.dispatchEvent(c),f=null)}break;case"QUEUE_INSERT":this.Cb=!0;I(Z,"Dispatching MediaManager queueInsert event");d=!1;if(this.f)if(c.items&&0!=c.items.length)if(m(c.currentItemId)&&m(c.currentItemIndex))H(Z,"Maximum one currentItem must be provided"),d=!0;else if(m(c.currentItemIndex)&&(!q(c.currentItemIndex)||0>c.currentItemIndex||c.currentItemIndex>=c.items.length))H(Z,"Invalid currentItemIndex"),d=!0;else if(m(c.currentItemId)&&(!q(c.currentItemId)||0>c.currentItemId))H(Z,"Invalid currentItemId"),d=!0;else for(f=0;f<c.items.length;f++)if(q(c.items[f].itemId)){H(Z,"Item contains an itemId at index: "+f);d=!0;break}else c.items[f].itemId=this.Vb++;else H(Z,"No items to insert"),d=!0;else H(Z,"Queue does not exist"),d=!0;d?f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"}:(c.items=Be(c.items),c=new $("queueinsert",c,b),this.onQueueInsert&&this.onQueueInsert(c),this.dispatchEvent(c),f=null);break;case"QUEUE_UPDATE":I(Z,"Dispatching MediaManager queueUpdate event");d=!1;this.f?c.items&&!Ae(c.items)?d=!0:c.repeatMode&&!Wc(c.repeatMode)&&(H(Z,"Invalid repeatMode"),d=!0):(H(Z,"Queue does not exist"),d=!0);if(d)f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};else{if(c.items&&0<c.items.length){for(var d=this.f,f=c.items,g=[],h=0;h<f.length;h++)for(var i=0;i<d.a.length;i++)if(f[h].itemId==d.a[i].itemId){g.push(f[h]);break}c.items=Be(g)}c=new $("queueupdate",c,b);this.onQueueUpdate&&this.onQueueUpdate(c);this.dispatchEvent(c);f=null}break;case"QUEUE_REMOVE":I(Z,"Dispatching MediaManager queueRemove event");d=!1;this.f?c.itemIds&&0!=c.itemIds.length?ze(c.itemIds)||(d=!0):(H(Z,"No itemIds to remove"),d=!0):(H(Z,"Queue does not exist"),d=!0);d?f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"}:(c.itemIds&&(c.itemIds=ge(this.f,c.itemIds)),c=new $("queueremove",c,b),this.onQueueRemove&&this.onQueueRemove(c),this.dispatchEvent(c),f=null);break;case"QUEUE_REORDER":I(Z,"Dispatching MediaManager queueReorder event");d=!1;this.f?c.itemIds&&0!=c.itemIds.length?ze(c.itemIds)?m(c.insertBefore)&&0<=va(c.itemIds,c.insertBefore)&&(H(Z,"insertBefore can not be one of the reordered items"),d=!0):d=!0:(H(Z,"No itemIds to reorder"),d=!0):(H(Z,"Queue does not exist"),d=!0);d?f={type:"INVALID_REQUEST",reason:"INVALID_PARAMS"}:(c.itemIds&&(c.itemIds=ge(this.f,c.itemIds)),c=new $("queuereorder",c,b),this.onQueueReorder&&this.onQueueReorder(c),this.dispatchEvent(c),f=null);break;case"PRECACHE":c=new $("precache",c,"__broadcast__");this.onPrecache&&this.onPrecache(c);this.dispatchEvent(c);break;default:H(Z,"Unexpected message type: "+d),f={type:"INVALID_REQUEST",reason:"INVALID_COMMAND"}}f&&(H(Z,"Sending error: "+f.type+" "+f.reason),this.onLocalRequestError&&b==this.oa?(f.requestId=e,this.onLocalRequestError(f)):this.wa(b,e,f.type,f.reason))}}else this.rb.enqueue(b)};var se=function(b){if(!b.g)return"IDLE";var c=b.c.getState();return"PLAYING"==c&&b.aa?"BUFFERING":c},te=function(b,c,d,e){var f={type:"MEDIA_STATUS"},g=b.o&&b.o.message.media||null;if(!b.g&&!b.la&&!g)return f.status=[],f;var h={mediaSessionId:b.ba,playbackRate:b.Xd,playerState:se(b),currentTime:b.c.getCurrentTimeSec(),supportedMediaCommands:b.pe,volume:b.c.getVolume()};b.l&&(h.activeTrackIds=b.l);b.sa&&(h.preloadedItemId=b.sa);var i=b.eb,i=i.X?i.X.videoWidth:0,j=b.eb,j=j.X?j.X.videoHeight:0;0<i&&0<j&&(h.videoInfo=new Uc(i,j,b.eb.sc));b.g?(c&&(h.media=b.g.media||void 0),h.currentItemId=b.g.itemId):(b.la&&(c&&(h.media=b.la.media||void 0),h.currentItemId=b.la.itemId,b.la=null),b.f&&(i=b.f.Ea()))&&(h.loadingItemId=i.itemId);"IDLE"==h.playerState?(b.ja&&(h.idleReason=b.ja),g&&(h.extendedStatus=new Vc("LOADING",g))):b.ja=null;void 0!=d&&(h.customData=d);b.f&&(e&&(h.items=b.f.pc(c)),h.repeatMode=b.f.V);b.customizedStatusCallback?(b=b.customizedStatusCallback(h),null==b?f=null:f.status=[b]):f.status=[h];return f},ue=function(b){null!=b.Wa&&(l.clearTimeout(b.Wa),b.Wa=null)},ve=function(b){var c=b.c.getCurrentTimeSec();b.Ha=c;b.xc=c;b.Sc=Date.now();null!=b.ea&&l.clearTimeout(b.ea);b.ea=uc(b.Fb,1e3)};B.prototype.Zc=function(){this.ea=uc(this.Fb,1e3);var b=se(this);if("IDLE"!=b&&"PAUSED"!=b){b=this.Ha;this.Ha=this.c.getCurrentTimeSec();var c=this.aa;this.aa=100>1e3*(this.Ha-b);c!=this.aa?(G(Z,E,"Buffering state changed, isPlayerBuffering: "+this.aa+" old time: "+b+" current time: "+this.Ha),this.j(!1)):this.aa||(b=1e3*(this.Ha-this.xc)-(Date.now()-this.Sc),1e3<b||-1e3>b?(G(Z,E,"Time drifted: "+b),this.j(!1)):this.g&&this.f&&(b=this.f,(b=0>b.h?null:"REPEAT_SINGLE"==b.V?b.a[b.h]:b.h+1>=b.a.length&&(he(b)||"REPEAT_OFF"==b.V)?null:b.a[(b.h+1)%b.a.length])&&q(b.preloadTime)&&this.g.media&&!this.o&&De(this,b.preloadTime)&&this.sa!=b.itemId&&(this.onPreload?(ta(b.itemId),c=new Fe(b.itemId),c.requestId=0,c.mediaSessionId=this.ba,c.autoplay=b.autoplay,c.currentTime=b.startTime,c.customData=b.customData||null,c.activeTrackIds=b.activeTrackIds,c.media=b.media,c=new $("preload",c,""),ta(b.itemId),this.sa=b.itemId,I(Z,"Sending preload event: "+JSON.stringify(c)),this.onPreload(c)&&this.j(!1)):I(Z,"Not sending preload event"))))}};B.prototype.j=function(b,c,d,e){this.c?(G(Z,E,"Sending broadcast status message"),b=te(this,b,d,e),null!=b)&&(this.onMediaStatus&&b.status&&this.onMediaStatus(b.status[0]||null),b.requestId=c||0,this.sb.kc(b),ve(this)):H(Z,"Not sending broadcast status message, state is invalid")};B.prototype.broadcastStatus=B.prototype.j;B.prototype.ge=function(b){G(Z,E,"Setting IDLE reason: "+b),this.ja=b};B.prototype.setIdleReason=B.prototype.ge;B.prototype.wa=function(b,c,d,e,f){I(Z,"Sending error message to "+b);var g={};g.requestId=c;g.type=d;e&&(g.reason=e);f&&(g.customData=f);this.sb.send(b,g)};B.prototype.sendError=B.prototype.wa;B.prototype.Mc=function(b,c,d,e,f){this.c?(G(Z,E,"Sending status message to "+b),d=te(this,d,e,f),null!=d)&&(this.onMediaStatus&&d.status&&this.onMediaStatus(d.status[0]||null),d.requestId=c,this.sb.send(b,d),ve(this)):(H(Z,"State is invalid"),this.wa(b,c,"INVALID_PLAYER_STATE",null,e))};B.prototype.sendStatus=B.prototype.Mc;B.prototype.cd=function(b){return b};var we=function(b){b.o=null;if(b.Sa)for(b.Sa=!1;!b.rb.Rb()&&!b.Sa;)b.$b(ee(b.rb))};B.prototype.load=function(b){b.type="LOAD",re(this,this.oa,b)};B.prototype.load=B.prototype.load;B.prototype.ae=function(b){b.type="QUEUE_LOAD",re(this,this.oa,b)};B.prototype.queueLoad=B.prototype.ae;var xe=function(b,c,d,e,f,g){I(Z,"Dispatching MediaManager load event");I(Z,"Load message received:"+JSON.stringify(d));var h=!1;d.media?d.media.tracks&&!oe(d.media.tracks)?(H(Z,"Invalid tracks information"),h=!0):d.activeTrackIds&&!qe(d.media.tracks,d.activeTrackIds)&&(h=!0):(H(Z,"Media is mandatory"),h=!0);if(h)return g&&g(),{type:"INVALID_REQUEST",reason:"INVALID_PARAMS"};b.o?b.gc("LOAD_CANCELLED"):b.g&&(b.va("INTERRUPTED",!1),g=b.j.bind(b,!0));b.o={senderId:c,message:d};g&&g();b.l=d.activeTrackIds||null;b.Sa=!0;e&&(b.ba++,f?b.f=f:(e=new fe(b.Vb++),e.media=d.media,e.autoplay=d.autoplay,e.activeTrackIds=d.activeTrackIds,e.customData=d.customData,b.f=new Y([e],"REPEAT_OFF",0)));b.g=b.f&&b.f.Ea();ue(b);b.ma=d;b.pb&&b.c.Dc&&b.c.Dc(m(d.autoplay)?d.autoplay:!0,0<d.currentTime?d.currentTime:0,b.g.playbackDuration,b.g.startTime);c=new $("load",d,c);b.onLoad&&b.onLoad(c);b.dispatchEvent(c);g||b.j(!0);return b.sa=null};B.prototype.kd=function(b){b=b.data;if(b.media&&b.media.contentId){var c=m(b.autoplay)?b.autoplay:!0;b.media.tracks?this.c.load(b.media.contentId,c,b.currentTime,{tracks:b.media.tracks,activeTrackIds:b.activeTrackIds,textTrackStyle:b.media.textTrackStyle}):this.c.load(b.media.contentId,c,b.currentTime)}};B.prototype.Sd=function(b){if(!this.o)return!1;b.tracks=b.tracks||void 0;if(b.tracks&&!oe(b.tracks))return H(Z,"Invalid tracks information"),!1;if(b.activeTrackIds&&!qe(b.tracks,b.activeTrackIds))return H(Z,"Invalid active tracks"),!1;this.l=b.activeTrackIds||null;if(this.f){var c=this.f.Ea();c&&c.media&&(c.media.tracks=b.tracks,c.media.textTrackStyle=b.textTrackStyle||void 0)}this.c.load("",!1,void 0,b,!0);return!0};B.prototype.loadTracksInfo=B.prototype.Sd;B.prototype.Pc=function(b){if(b!=this.c){this.c&&(this.c.unregisterErrorCallback(),this.c.unregisterEndedCallback(),this.c.unregisterLoadCallback());this.c=(this.pb=b.getState?!1:!0)?new Ud(Z,b):b;this.c.registerErrorCallback(this.Xb.bind(this));this.c.registerEndedCallback(this.vb.bind(this));this.c.registerLoadCallback(this.ac.bind(this));var c=this.eb;c.X&&c.X.removeEventListener("resize",c.Gc);var d=null;b.tagName&&"video"==b.tagName.toLowerCase()?d=b:(b=document.getElementsByTagName("video"),1==b.length&&(d=b[0]));c.X=d;c.X&&c.X.addEventListener("resize",c.Gc)}};B.prototype.setMediaElement=B.prototype.Pc;B.prototype.ac=function(){this.o&&((I(Z,"Metadata loaded"),this.g&&this.g.media&&(this.g.media.duration=this.c.getDurationSec()),this.aa=!0,this.onMetadataLoaded)?this.onMetadataLoaded(this.o):we(this))};B.prototype.ld=function(b){this.pb&&b.message&&void 0!=b.message.currentTime&&b.message.currentTime!=this.c.getCurrentTimeSec()&&this.c.seek(b.message.currentTime),this.Lc()};B.prototype.Xb=function(b){this.o?(H(Z,"Load metadata error: "+b),this.onLoadMetadataError)?this.onLoadMetadataError(this.o):we(this):this.onError&&this.onError(b)};B.prototype.gc=function(b,c){this.o?(b=b||"LOAD_FAILED",this.o.senderId==this.oa?this.onLocalRequestError&&this.onLocalRequestError({type:b}):this.wa(this.o.senderId,this.o.message.requestId,b,null,c),we(this)):H(Z,"Not sending LOAD error as there is no on going LOAD request")};B.prototype.sendLoadError=B.prototype.gc;B.prototype.Lc=function(b){if(this.o){var c=this.o.message.requestId;this.j(!0,c,b,0!=c);we(this)}else H(Z,"Not sending status as there is no on going LOAD request")};B.prototype.sendLoadComplete=B.prototype.Lc;x=B.prototype;x.gd=function(){this.va("ERROR")};x.jd=function(){this.o&&""==this.o.senderId&&this.o.message&&0==this.o.message.requestId?this.va("ERROR",!0):(this.va("ERROR",!1),this.gc("LOAD_FAILED"))};x.vb=function(){this.onEnded&&this.onEnded()};x.fd=function(){if(this.f){var b=-1!=this.yb?this.yb:void 0;this.yb=-1;ye(this,"REPEAT_SINGLE"==this.f.V?0:1,!1,b,void 0,void 0,void 0,"FINISHED")}};x.pd=function(b,c){this.va(b,!0,c)};var ye=function(b,c,d,e,f,g,h,i){i=i||"INTERRUPTED";if(b.f&&"QUEUE_ENDED"!=le(b.f,c,!1)){var j=le(b.f,c,!0);I(Z,"After "+c+" jump, transition is: "+j);(c=Ce(b,b.f.Ea(),void 0,h))?(b.g&&(b.l=null,b.ja=i,b.la=b.g,b.g=null,"QUEUE_SHUFFLED"==j&&(g=!0),"INTERRUPTED"==b.ja)&&b.onAbort(),xe(b,"",c,!1,void 0,b.j.bind(b,d,e,f,g))):b.onQueueEnded&&b.onQueueEnded(i,e)}else b.onQueueEnded&&b.onQueueEnded(i,e)};x=B.prototype;x.hd=function(b){G(Z,E,"onGetStatus");var c=b.data;G(Z,E,"onGetStatus: "+JSON.stringify(c));var d=!0,e=!0;c.options&&(c.options&1&&(d=!1),c.options&1&&(e=!1));this.Mc(b.senderId,b.data.requestId,d,null,e)};x.od=function(b){G(Z,E,"onPlay"),this.c.play(),this.j(!1,b.data.requestId)};x.nd=function(b){G(Z,E,"onPlayAgain"),this.g?(this.c.seek(0),this.c.play(),this.j(!1,b.data.requestId)):this.ma&&(this.ma.type="LOAD",this.ma.autoplay=!0,re(this,this.oa,this.ma))};x.ud=function(b){b=b.data;G(Z,E,"onSeek: "+JSON.stringify(b));var c=m(b.relativeTime)?this.c.getCurrentTimeSec()+b.relativeTime:b.currentTime;ta(c);this.c.seek(c,b.resumeState);"PAUSED"!=this.c.getState()&&(this.aa=!0);this.c.getCurrentTimeSec()<this.c.getDurationSec()?this.j(!1,b.requestId):this.yb=b.requestId};x.wd=function(b){this.va("CANCELLED",!0,b.data.requestId)};x.va=function(b,c,d,e){var f=this;c=!m(c)||c;if((e||d)&&!c)throw Error("customData and requestId should only be provided in broadcast mode");this.g?(this.f=null,this.c.reset(),this.l=null,b&&(this.ja=b),this.la=this.g,this.g=null,c&&this.j(!1,d,e,void 0)):I(Z,"Nothing to reset, Media is already null");this.ma&&(ue(this),this.Wa=uc(function(){f.ma=null,f.Wa=null},9e5));b&&"INTERRUPTED"==b&&this.onAbort()};B.prototype.resetMediaElement=B.prototype.va;B.prototype.md=function(b){this.c.pause(),this.j(!1,b.data.requestId)};B.prototype.vd=function(b){b=b.data,this.c.setVolume(b.volume),this.j(!1,b.requestId)};B.prototype.ed=function(b){var c=b.data;pe(this.g.media.tracks,c.language)?(b={activeTrackIds:c.activeTrackIds,language:c.language,textTrackStyle:c.textTrackStyle},this.c.editTracksInfo&&(this.l=this.c.editTracksInfo(b)),this.j(c.textTrackStyle?!0:!1,c.requestId)):(H(Z,"Invalid track language"),this.wa(b.senderId,c.requestId,"INVALID_REQUEST","LANGUAGE_NOT_SUPPORTED"))};var ze=function(b){if(2>b.length)return!0;for(var c=0;c<b.length;c++)for(var d=c+1;d<b.length;d++)if(b[c]==b[d])return H(Z,"Duplicate itemId: "+b[c]+"at positions:"+c+" "+d),!1;return!0},Ae=function(b){for(var c=0;c<b.length;c++){if(!q(b[c].itemId))return H(Z,"Invalid itemId at position: "+c),!1;for(var d=c+1;d<b.length;d++){if(!q(b[d].itemId))return H(Z,"Invalid itemId at position: "+d),!1;if(b[c].itemId==b[d].itemId)return H(Z,"Duplicate itemId: "+b[c].itemId+"at positions:"+c+" "+d),!1}}return!0},Be=function(b){for(var c=[],d=0;d<b.length;d++){var e=new fe(b[d].itemId);e.media=b[d].media;e.autoplay=b[d].autoplay;e.startTime=b[d].startTime;e.playbackDuration=b[d].playbackDuration;e.preloadTime=b[d].preloadTime;e.activeTrackIds=b[d].activeTrackIds;e.customData=b[d].customData;c.push(e)}return c},Ce=function(b,c,d,e){if(!c)return null;var f=new Ee();f.requestId=d||0;f.mediaSessionId=b.ba;f.type="LOAD";f.autoplay=c.autoplay;f.currentTime=m(e)?e:c.startTime;f.activeTrackIds=c.activeTrackIds;f.customData=c.customData||null;f.media=c.media;return f},De=function(b,c){if(b.g.media.duration-b.c.getCurrentTimeSec()<=c)return!0;if(null==b.sa)return!1;b.sa=null;if(!b.onCancelPreload)return!1;c=new aa();c.requestId=0;c.mediaSessionId=b.ba;c=new $("cancelpreload",c,"");I(Z,"Sending cancel preload event: "+JSON.stringify(c));b.onCancelPreload(c)&&b.j(!1);return!1};x=B.prototype;x.rd=function(b){var c=b.data,d=new Y(c.items,c.repeatMode||"REPEAT_OFF",c.startIndex||0);(c=Ce(this,d.Ea(),c.requestId,c.currentTime))?xe(this,b.senderId,c,!0,d):H(Z,"Queue Load request is invalid")};x.qd=function(b){b=b.data;I(Z,"Queue insert data: "+JSON.stringify(b));var c=!1;m(b.currentItemId)&&(c=ke(this.f,b.currentItemId));m(b.currentItemIndex)&&(c=!0);var d=this.f,e=b.items,f=b.insertBefore,g=b.currentItemIndex,f=q(f)?ie(d,f):d.a.length,f=-1==f?d.a.length:f;ha(Ca,d.a,f,0).apply(null,e);m(g)?d.h=f+g:d.h>=f&&(d.h+=e.length);c?ye(this,0,!0,b.requestId,b.customData,!0,b.currentTime):this.j(!0,b.requestId,b.customData,!0)};x.mc=function(b){var c=b.data;if(this.Cb){I(Z,"Queue update data: "+JSON.stringify(c));var d=!1;b=!1;q(c.currentItemId)&&(b=ke(this.f,c.currentItemId));q(c.jump)&&(b=!0);c.repeatMode&&(this.f.V=c.repeatMode);if(c.items&&0<c.items.length){for(var d=this.f,e=c.items,f=0;f<e.length;f++)for(var g=0;g<d.a.length;g++)e[f].itemId==d.a[g].itemId&&(d.a[g]=e[f]);d=!0}c.shuffle&&(me(this.f),b=!0);b?ye(this,c.jump||0,d,c.requestId,c.customData,d,c.currentTime):this.j(d,c.requestId,c.customData,d)}else b=b.senderId,"__inject__"==b&&this.onQueueUpdate==this.mc?this.wa(b,c.requestId,"INVALID_REQUEST","INVALID_COMMAND"):(I(Z,"QUEUE_UPDATE request ignored"),this.j(!1,c.requestId))};x.sd=function(b){b=b.data;I(Z,"Queue remove data: "+JSON.stringify(b));var c=!1;q(b.currentItemId)&&(c=ke(this.f,b.currentItemId));if(b.itemIds&&0!=b.itemIds.length){if(!c){for(var c=this.f,d=b.itemIds,e=!1,f=0;f<d.length;f++)for(var g=0;g<c.a.length;g++)if(d[f]==c.a[g].itemId){c.a.splice(g,1);c.h==g?e=!0:c.h>g&&c.h--;break}c.h>=c.a.length&&(c.h=je(c)?0:-1,he(c)&&0==c.h&&me(c));c=e}c?ye(this,0,!1,b.requestId,b.customData,!0,b.currentTime):this.j(!1,b.requestId,b.customData,!0)}else H(Z,"No itemIds to remove")};x.td=function(b){b=b.data;I(Z,"Queue reorder data: "+JSON.stringify(b));var c=!1,d=!1;q(b.currentItemId)&&(d=ke(this.f,b.currentItemId));if(b.itemIds&&0<b.itemIds.length){var c=this.f,e=b.itemIds,f=b.insertBefore;if(e&&0!=e.length){for(var g=c.a[c.h].itemId,h=m(f)?f:-1,f=c.a.length-e.length,i=[],j=-1==h?!0:!1,k=0;k<c.a.length;k++)0<=va(e,c.a[k].itemId)?j||c.a[k].itemId!=e[0]||(f=i.length):(i.push(c.a[k]),h==c.a[k].itemId&&(f=i.length-1,j=!0));h=[];for(j=0;j<e.length;j++){a:{for(k=0;k<c.a.length;k++)if(e[j]==c.a[k].itemId){k=c.a[k];break a}k=null}h.push(k)}ha(Ca,i,f,0).apply(null,h);c.a=i;m(g)&&ke(c,g)}c=!0}d?ye(this,0,!1,b.requestId,b.customData,c,b.currentTime):this.j(!1,b.requestId,b.customData,c)};x.m=function(){N.prototype.m.call(this),null!=this.ea&&l.clearTimeout(this.ea),ue(this),G(Z,E,"Disposed "+this.T())};x.addEventListener=function(b,c,d,e){L(this,b,c,d,e)};B.prototype.addEventListener=B.prototype.addEventListener;B.prototype.removeEventListener=function(b,c,d,e){M(this,b,c,d,e)};B.prototype.removeEventListener=B.prototype.removeEventListener;B.prototype.dispatchEvent=function(b){return N.prototype.dispatchEvent.call(this,b)};B.prototype.dispatchEvent=B.prototype.dispatchEvent;var Z=F("cast.receiver.MediaManager");B.EventType={LOAD:"load",STOP:"stop",PAUSE:"pause",PLAY:"play",PLAY_AGAIN:"playagain",SEEK:"seek",SET_VOLUME:"setvolume",GET_STATUS:"getstatus",EDIT_TRACKS_INFO:"edittracksinfo",QUEUE_LOAD:"queueload",QUEUE_INSERT:"queueinsert",QUEUE_UPDATE:"queueupdate",QUEUE_REMOVE:"queueremove",QUEUE_REORDER:"queuereorder",PRECACHE:"precache",PRELOAD:"preload",CANCEL_PRELOAD:"cancelpreload"};var $=function(b,c,d){K.call(this,b),this.data=c,this.senderId=d};c($,K);B.Event=$;var aa=function(){this.type=void 0,this.requestId=0,this.mediaSessionId=void 0,this.customData=null};B.RequestData=aa;var Ee=function(){aa.call(this),this.media=new Sc(),this.autoplay=!1,this.currentTime=0,this.activeTrackIds=void 0};c(Ee,aa);B.LoadRequestData=Ee;var Fe=function(b){Ee.call(this),this.itemId=b};c(Fe,Ee);B.PreloadRequestData=Fe;C=function(b){aa.call(this),this.data=b};c(C,aa);B.PrecacheRequestData=C;u=function(){aa.call(this),this.volume=new Tc()};c(u,aa);B.VolumeRequestData=u;P=function(){aa.call(this),this.textTrackStyle=this.language=this.activeTrackIds=void 0};c(P,aa);B.EditTracksInfoData=P;D=function(){aa.call(this),this.resumeState=void 0,this.currentTime=0,this.relativeTime=void 0};c(D,aa);B.SeekRequestData=D;o=function(){aa.call(this),this.options=void 0};c(o,aa);B.GetStatusRequestData=o;t=function(b){aa.call(this),this.repeatMode=void 0,this.items=b,this.currentTime=this.startIndex=void 0};c(t,aa);B.QueueLoadRequestData=t;var Ge=function(b){aa.call(this),this.currentTime=this.currentItemId=this.currentItemIndex=this.insertBefore=void 0,this.items=b};c(Ge,aa);B.QueueInsertRequestData=Ge;x=function(){aa.call(this),this.shuffle=this.repeatMode=this.items=this.jump=this.currentTime=this.currentItemId=void 0};c(x,aa);B.QueueUpdateRequestData=x;var He=function(b){aa.call(this),this.currentTime=this.currentItemId=void 0,this.itemIds=b};c(He,aa);B.QueueRemoveRequestData=He;C=function(b){aa.call(this),this.insertBefore=this.currentTime=this.currentItemId=void 0,this.itemIds=b};c(C,aa);B.QueueReorderRequestData=C;B.LoadInfo=function(b,c){this.message=b,this.senderId=c}}).call(window),f.exports=window.cast.receiver}),null);
__d("ChromecastReceiverSDKV2",["ChromecastReceiver","setTV2Breakpoint"],(function(a,b,c,d,e,f){"use strict";b("setTV2Breakpoint")("Before SDK"),e.exports=b("ChromecastReceiver")}),null);
__d("ChromecastReceiverSDKV2Wrapper",["cr:1886210"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1886210");e.exports=a}),null);
__d("TV2UniqueIDs",["guid"],(function(a,b,c,d,e,f){"use strict";f.makeTV2VideoCastRequestID=a;f.makeTV2VideoExperienceQueueEntryID=c;f.makeTV2ToastID=d;f.makeTV2RelatedVideosRequestID=e;f.makeTV2ChainingSessionID=i;var g=new Map();function h(a){var b;b=(b=g.get(a))!=null?b:0;g.set(a,b+1);return""+a+b.toString(36)}function a(){return h("id_tv2_vcr_")}function c(){return h("id_tv2_veqe_")}function d(){return h("id_tv2_toast_")}function e(){return h("id_tv2_rvr_")}function i(){return b("guid")()}}),null);
__d("TV2CommsParseUtils",["TV2UniqueIDs","err","getTV2DebuggingEnabled"],(function(a,b,c,d,e,f){"use strict";f.parseJSONString=h;f.parseObject=i;f.parseOptionalObject=c;f.parseArray=j;f.parseStringArray=k;f.parseNonEmptyString=l;f.parseOptionalNonEmptyString=m;f.parseOptionalString=n;f.parseNumber=p;f.parseOptionalNumber=d;f.parseOptionalStringishBoolean=e;f.parseOptionalBoolean=q;f.parseBoolean=r;f.parseVideoCastingPayloadBackgroundImage=s;f.parseVideoCastingPayloadPreferredThumbnail=t;f.parseVideoCastingPayloadListJSONAsTV2VideoCastRequestArray=v;f.parseVideoCastingPayloadJSONAsTV2VideoCastRequest=w;f.parseVideoCastingPayloadAsTV2VideoCastRequest=x;f.parseTV2CommsFBAppOutboundMessageFromJSON=z;f.parseCastingReceiverResponseMessageFromJSON=A;function g(a){return a===null?"null":a===""?"empty string":Array.isArray(a)?"array":typeof a==="object"?"object with keys: "+JSON.stringify(Object.keys(a).sort()):typeof a}function h(a,c,d){if(typeof a!=="string"||a===""){var e=b("err")("Message parse error: %s expected JSON string, got %s",d,g(a));throw e}try{e=JSON.parse(a);return c(e,d)}catch(c){if("messageFormat"in c&&typeof c.messageFormat==="string"&&"messageParams"in c&&Array.isArray(c.messageParams))throw c;else{a=b("err")("Message parse error: %s expected JSON string, got error: %s",d,c.message);throw a}}}function i(a,c){if(typeof a!=="object"||a==null){c=b("err")("Message parse error: %s expected object, got %s",c,g(a));throw c}return a}function c(a,c){if(a==null)return null;if(typeof a!=="object"||a==null){c=b("err")("Message parse error: %s expected object, got %s",c,g(a));throw c}return a}function j(a,c){if(!Array.isArray(a)){c=b("err")("Message parse error: %s expected array, got %s",c,g(a));throw c}return a}function k(a,c){if(!Array.isArray(a)){var d=b("err")("Message parse error: %s expected array, got %s",c,g(a));throw d}d=a.map(function(a){return l(a,c)});return d}function l(a,c){if(typeof a!=="string"||a===""){c=b("err")("Message parse error: %s expected non-empty string, got %s",c,g(a));throw c}return a}function m(a,c){if(a==null)return null;if(typeof a!=="string"||a===""){c=b("err")("Message parse error: %s expected optional non-empty string, got %s",c,g(a));throw c}return a}function n(a,c){if(a==null)return null;if(typeof a!=="string"){c=b("err")("Message parse error: %s expected optional string, got %s",c,g(a));throw c}return a}function o(a,c){if(a==null)return null;if(!(typeof a==="number"&&Number.isFinite(a)||typeof a==="string"&&a!=="")){c=b("err")("Message parse error: %s expected optional non-empty string or number, got %s",c,g(a));throw c}return a}function p(a,c){if(typeof a!=="number"||!Number.isFinite(a)){c=b("err")("Message parse error: %s expected finite number, got %s",c,g(a));throw c}return a}function d(a,c){if(a==null)return null;if(typeof a!=="number"||!Number.isFinite(a)){c=b("err")("Message parse error: %s expected optional finite number, got %s",c,g(a));throw c}return a}function e(a,b){return a==="true"||a===!0}function q(a,b,c){c===void 0&&(c=!1);return a==null?c:a===!0}function r(a,c){if(typeof a!=="boolean"){c=b("err")("Parse error: %s expected boolean, got %s",c,g(a));throw c}return a}function s(a,b){a=a!=null?i(a,b):null;if(a==null)return null;var c=l(a.uri,b+".uri"),d=p(a.width,b+".width");a=p(a.height,b+".height");return{height:a,uri:c,width:d}}function t(a,b){a=a!=null?i(a,b):null;if(a==null)return null;a=i(a.image,b+".image");a=l(a.uri,b+".image.uri");return{uri:a}}function u(a,b){if(a==null)return null;a=j(a,b);return a.map(function(a,b){return l(a,"["+b+"]")})}function v(a,b){return h(a,function(b,a){b=j(b,a);return b.map(function(b,c){c=a+"."+c;return x(i(b,c),c)})},b)}function w(a,b){return h(a,function(b,a){return x(i(b,a),a)},b)}function x(c,d){var e=l(c.access_token,d+".access_token"),f=String(o(c.app_id,d+".app_id")),g=n(c.app_version,d+".app_version"),h=s(c.background_image,d+".background_image"),i=m(c.channel_token,d+".channel_token"),j=m(c.channel_session_id,d+".channel_session_id"),p=n(c.end_cursor,d+".end_cursor")||null,r=q(c.from_next_video_query,d+".from_next_video_query"),v=q(c.is_ad,d+".is_ad"),w=u(c.dash_prefetched_representation_ids,d+".dash_prefetched_representation_ids"),x=m(c.entry_point,d+".entry_point"),y=m(c.player_origin===""?null:c.player_origin,d+".player_origin"),z=m(c.player_suborigin===""?null:c.player_suborigin,d+".player_suborigin"),A=t(c.preferred_thumbnail,d+".preferred_thumbnail"),B=m(c.video_channel_id,d+".video_channel_id"),C=l(c.root_video_id,d+".root_video_id"),D=b("getTV2DebuggingEnabled")()?/\bvideo_id=([0-9]+)\b/.exec(a.location.search):null;D=D&&D[1]?D[1]:l(c.video_id,d+".video_id");c=c.tracking_codes!=null?k(c.tracking_codes,d+".tracking_codes"):null;return{accessToken:e,appID:f,appVersion:g,backgroundImage:h,chainingEnabled:!1,channelSessionID:j,channelToken:i,dashPrefetchedRepresentationIDs:w,endCursor:p,entryPoint:x,fromNextVideoQuery:r,isAd:v,playerOrigin:y,playerSuborigin:z,preferredThumbnail:A,rootVideoID:C,startTimestamp:0,trackingCodes:c,videoCastRequestID:b("TV2UniqueIDs").makeTV2VideoCastRequestID(),videoChannelID:B,videoID:D}}function y(a,c){a=i(a,c);c=l(a.type,c+".type");switch(c){case"version_response":return a;case"version_launch_response":return a;case"experience_state":return a;case"command_result":return a;case"duration_change":return a;case"status_update":return a}c=b("err")("Parse error: %s expected response message type, got %s","parseTV2CommsFBAppOutboundMessageFromObject",g(a));throw c}function z(a){return h(a,y,".")}function A(a){a=z(a);switch(a.type){case"version_response":case"version_launch_response":case"experience_state":case"command_result":return a}a=b("err")("Parse error: %s expected response message type, got %s","parseCastingReceiverResponseMessageFromJSON",g(a));throw a}}),null);
__d("XTVNextVideoAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/cast/async/nextvideo/",{after_cursor:{type:"String"},app_id:{type:"String"},channel_token:{type:"String",required:!0},is_ad:{type:"Bool",defaultValue:!1},root_video_id:{type:"String",required:!0},player_origin:{type:"String"}})}),null);
__d("TV2RelatedVideosRequest",["CometAsyncFetchError","ErrorMetadata","Promise","QuickPerformanceLogger","TV2CommsParseUtils","TV2UniqueIDs","XTVNextVideoAsyncController","cometAsyncFetch","err","getErrorSafe","promiseDone","setTV2Breakpoint"],(function(a,b,c,d,e,f){"use strict";f.createAndStartTV2RelatedVideosRequest=a;var g=0;function a(a,c){var d=g++,e=null,f=!1,h=b("TV2UniqueIDs").makeTV2RelatedVideosRequestID(),i={destroy:function(){e=null},relatedVideosRequestID:h};b("promiseDone")(b("Promise").resolve().then(function(){var c=a.channelToken,g=a.endCursor;if(c==null||c==="")return{relatedVideosRequestID:h,type:"channel_token_empty"};if(a.fromNextVideoQuery&&(g==null||g===""))return{relatedVideosRequestID:h,type:"channel_ended"};c=b("XTVNextVideoAsyncController").getURIBuilder().setString("after_cursor",g).setString("app_id",a.appID).setString("channel_token",a.channelToken).setBool("is_ad",a.isAd).setString("root_video_id",a.rootVideoID).setString("player_origin",a.playerOrigin).getURI();e=b("cometAsyncFetch")(c.toString(),{data:{},method:"POST"});b("setTV2Breakpoint")("TV2RelatedVideosRequest:promise",e);f=!0;b("QuickPerformanceLogger").markerStart(62128132,d);return e.then(function(a){if(!e)return null;e=null;b("QuickPerformanceLogger").markerEnd(62128132,2,d);f=!1;a=b("TV2CommsParseUtils").parseVideoCastingPayloadListJSONAsTV2VideoCastRequestArray(a,"cometAsyncFetchResponsePayload");if(a.length>0)return{entries:a,relatedVideosRequestID:h,type:"loaded"};else return{relatedVideosRequestID:h,type:"channel_ended"}},function(a){if(!e)return null;e=null;b("QuickPerformanceLogger").markerEnd(62128132,3,d);f=!1;throw a})})["catch"](function(a){if(a instanceof b("CometAsyncFetchError")){var c=a.toString();c=b("err")("XTVNextVideoAsyncController network error: (CometAsyncFetchError) %s",JSON.stringify({errorCode:a.errorCode,errorRawTransport:a.errorRawTransport,errorRawTransportStatus:a.errorRawTransportStatus,errorType:a.errorType,toString:c.slice(0,300)+(c.length>300?"...":"")}))}else typeof a==="object"&&a!=null&&"error"in a&&"errorMsg"in a&&"errorType"in a?c=b("err")("XTVNextVideoAsyncController network error: %s",JSON.stringify({error:a.error,errorMsg:a.errorMsg,errorType:a.errorType})):c=b("getErrorSafe")(a);a=(a=c.metadata)!=null?a:new(b("ErrorMetadata"))();var d=a.getAll().find(function(a){var b=a[0],c=a[1];a[2];return b==="COMET_VIDEO"&&c==="ERROR_LOCATION"});d==null&&a.addEntry("COMET_VIDEO","ERROR_LOCATION","TV2RelatedVideosRequest:catch");c.metadata=a;return{error:c,relatedVideosRequestID:h,type:"error"}}).then(function(a){if(!a)return;f&&(b("QuickPerformanceLogger").markerEnd(62128132,3,d),f=!1);b("setTV2Breakpoint")("TV2RelatedVideosRequest:result:"+a.type,a);c(a)}));return i}}),null);
__d("TV2RelayEnvironment",["CometRelayEnvironmentFactory","RelayFBEnvironmentDefinitions","URI","UrlMap"],(function(a,b,c,d,e,f){"use strict";f.createTV2RelayEnvironment=a;var g,h="2.5",i="graphql";function j(a){a=a.accessToken;return new(g||(g=b("URI")))(b("UrlMap").resolve("graph_domain")+"/v"+h+"/"+i).setQueryData({access_token:a,fb_tv_app:1,fb_tv_casting_receiver_v2:1})}function a(a){var c=j({accessToken:a}),d=b("RelayFBEnvironmentDefinitions").createEnvironmentFactory(function(d){d=b("CometRelayEnvironmentFactory").configEnvironment({actorID:d,graphURI:c});var e=a.slice(0,5)+"..."+a.slice(-5);d.configName="TV2RelayEnvironment ("+e+")";return d}).getForActorID("0");return d}}),null);
__d("TV2UpNextInterstitialState",[],(function(a,b,c,d,e,f){"use strict";a={makeInitialState:function(){return null},resetOnCurrentEntryChanged:function(a){var b=a.clockTimestamp,c=a.forCurrentQueueEntry,d=a.isUserInitiated;a=a.upNextConfig;c=c&&!d;return{upNextConfig:a,upNextExpirationTimestampMs:c?b+a.countdown_seconds*1e3:null,upNextVisibility:c?"up_next_pending_visible":"up_next_hidden"}},markShown:function(a){if(a==null)return a;switch(a.upNextVisibility){case"up_next_pending_visible":return babelHelpers["extends"]({},a,{upNextVisibility:"up_next_visible"});default:return a}},markSeen:function(a){if(a==null)return a;switch(a.upNextVisibility){case"up_next_pending_visible":case"up_next_visible":return babelHelpers["extends"]({},a,{upNextExpirationTimestampMs:null,upNextVisibility:"up_next_seen"});default:return a}}};f.TV2UpNextInterstitialStateReducers=a}),null);
__d("TV2VideoExperienceQuery",["CometRelay","TV2VideoExperienceQuery.graphql","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.useTV2VideoExperienceQuery=a;var g,h=g!==void 0?g:g=b("TV2VideoExperienceQuery.graphql");f.TV2VideoExperienceQueryQuery=h;function a(a){a=b("CometRelay").usePreloadedQuery(h,a);if(!a)throw b("unrecoverableViolation")("usePreloadedQuery returned empty value","comet_tv_casting");return a}}),null);
__d("TV2VideoExperienceQueueEntryState",["CometRelay","TV2RelatedVideosRequest","TV2RelayEnvironment","TV2UniqueIDs","TV2UpNextInterstitialState","TV2VideoExperienceQuery","TV2VideoExperienceQueueState","WebPixelRatio","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a={getRelayEnvironment:function(a){return a.relayEnvironment},getVideoExperienceQueryReference:function(a){return a.videoExperienceQueryReference},getVideoCastRequest:function(a){return a.videoCastRequest},getVideoID:function(a){return a.videoCastRequest.videoID},getBlurredThumbnailURL:function(a){a=a.videoCastRequest.backgroundImage;if(a==null)return null;a=a.uri;return a},getPreferredThumbnailURL:function(a){a=a.videoCastRequest.preferredThumbnail;if(a==null)return null;a=a.uri;return a},getIsRelatedVideo:function(a){return a.videoCastRequest.fromNextVideoQuery},getRelatedVideosRootQueueEntryID:function(a){var b;return(b=a.relatedToQueueEntryID)!=null?b:a.queueEntryID},getCountRelatedVideosRemaining:function(a){a=a.relatedVideosQueue;return a!=null?b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getQueueLength(a):0},getVolatileIsLastObservedVideoPlayerStatePlaying:function(a){a=a.lastObservedVideoPlayerStateRef.current;return(a==null?void 0:a.state)==="play"},getVolatileIsLastObservedVideoPlayerStateEnded:function(a){a=a.lastObservedVideoPlayerStateRef.current;return(a==null?void 0:a.state)==="ended"}};f.TV2VideoExperienceQueueEntryStateSelectors=a;var g={make:function(a){var c=a.relatedToQueueEntryID,d=a.relayEnvironmentToReuse;a=a.videoCastRequest;d={chainingDepthLevel:0,chainingSessionID:null,lastObservedVideoPlayerStateRef:{current:null},queueEntryID:b("TV2UniqueIDs").makeTV2VideoExperienceQueueEntryID(),relatedToQueueEntryID:(c=c)!=null?c:null,relatedVideosCanFetchAgain:!0,relatedVideosQueue:null,relatedVideosRequest:null,relayEnvironment:(c=d)!=null?c:null,upNextInterstitialState:b("TV2UpNextInterstitialState").TV2UpNextInterstitialStateReducers.makeInitialState(),videoCastRequest:a,videoExperienceQueryReference:null};return d},update:function(a,b){b=b(a);if(b.videoExperienceQueryReference!==a.videoExperienceQueryReference){(a=a.videoExperienceQueryReference)==null?void 0:a.dispose()}return b},destroy:function(a){(a=a.videoExperienceQueryReference)==null?void 0:a.dispose()},deriveChainingInfo:function(a,c){return g.update(a,function(a){return babelHelpers["extends"]({},a,{chainingDepthLevel:c.chainingDepthLevel+1,chainingSessionID:(a=c.chainingSessionID)!=null?a:b("TV2UniqueIDs").makeTV2ChainingSessionID()})})},sideEffectfulStartFetchingVideoExperience:function(a){var c,d,e=a.videoCastRequest;c=(c=a.relayEnvironment)!=null?c:b("TV2RelayEnvironment").createTV2RelayEnvironment(e.accessToken);d=(d=a.videoExperienceQueryReference)!=null?d:b("CometRelay").loadQuery(c,b("TV2VideoExperienceQuery").TV2VideoExperienceQueryQuery,{scale:b("WebPixelRatio").get(),video_id:e.videoID},{fetchPolicy:"store-and-network"});return c===a.relayEnvironment&&d===a.videoExperienceQueryReference?a:babelHelpers["extends"]({},a,{relayEnvironment:c,videoExperienceQueryReference:d})},sideEffectfulUpdateLastObservedVideoPlayerState:function(a,b){a.lastObservedVideoPlayerStateRef.current=b;return a},sideEffectfulStartFetchingRelatedVideos:function(a,c,d){if(a.relatedVideosRequest!=null)return a;var e=a.relatedVideosCanFetchAgain,f=a.relatedVideosQueue;if(c.fix_repeated_fetch_related_videos&&e!==!0)return a;e=f!=null?b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getLastQueueEntry(f):null;if(f!=null&&(b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getQueueLength(f)>1||e!=null&&e.videoCastRequest.endCursor==null||c.fix_repeated_fetch_related_videos&&e==null))return a;c=(f=e==null?void 0:e.videoCastRequest)!=null?f:a.videoCastRequest;e=b("TV2RelatedVideosRequest").createAndStartTV2RelatedVideosRequest(c,d);return babelHelpers["extends"]({},a,{relatedVideosRequest:e})},updateWithRelatedVideosRequestCompleted:function(a,c){var d=a.relatedVideosRequest;if(d!=null&&c.relatedVideosRequestID===d.relatedVideosRequestID){var e=a.relatedVideosQueue,f;switch(c.type){case"loaded":var h,i=(h=e)!=null?h:b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.make();c.entries.forEach(function(c){i=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.appendToQueue(i,g.make({relatedToQueueEntryID:a.queueEntryID,relayEnvironmentToReuse:a.relayEnvironment,videoCastRequest:c}))});e=i;f=!0;break;case"channel_token_empty":f=!1;break;case"channel_ended":f=!1;break;case"error":f=!1;break;default:c.type;throw b("unrecoverableViolation")("Unexpected related videos result type: "+c.type,"comet_tv_casting")}d.destroy();return babelHelpers["extends"]({},a,{relatedVideosCanFetchAgain:f,relatedVideosQueue:e,relatedVideosRequest:null})}return a},updateRelatedVideosQueue:function(a,b){if(a.relatedVideosQueue==null)return a;b=b(a.relatedVideosQueue);return b===a.relatedVideosQueue?a:babelHelpers["extends"]({},a,{relatedVideosQueue:b})},takeAndRemoveNextRelatedVideo:function(a,c){c.current=null;return g.updateRelatedVideosQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.takeAndRemoveFirstQueueEntry(a,c)})},updateUpNext:function(a,b){b=b(a.upNextInterstitialState);return b!==a.upNextInterstitialState?babelHelpers["extends"]({},a,{upNextInterstitialState:b}):a}};f.TV2VideoExperienceQueueEntryStateReducers=g}),null);
__d("TV2VideoExperienceQueueState",["TV2VideoExperienceQueueEntryState","shallowEqual"],(function(a,b,c,d,e,f){"use strict";var g={getQueueIndex:function(a){return a.index},getQueueLength:function(a){return a.entries.length},findQueueEntry:function(a,b){b=(a=a.entries.find(b))!=null?a:null;return b},findQueueEntryIndex:function(a,b){a=a.entries.findIndex(b);return a},forEachQueueEntry:function(a,b){a.entries.forEach(b)},getQueueEntryByIndex:function(a,b){var c;c=(c=a.entries.length)!=null?c:0;if(c<=0)return null;b=b;if(b>=c)return null;while(b<0)b+=c;c=a.entries[b];return(a=c)!=null?a:null},getCurrentQueueEntry:function(a){return g.getQueueEntryByIndex(a,a.index)},getNextQueueEntry:function(a){return g.getQueueEntryByIndex(a,a.index+1)},getLastQueueEntry:function(a){return g.getQueueEntryByIndex(a,-1)},hasNextRelatedVideoEntry:function(a){var c=g.getCurrentQueueEntry(a);if(c!=null){var d=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getRelatedVideosRootQueueEntryID(c);c=g.findQueueEntry(a,function(a){return a.queueEntryID===d});if(c!=null)return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getCountRelatedVideosRemaining(c)>0}return!1}};f.TV2VideoExperienceQueueStateSelectors=g;var h={make:function(){return{entries:[],index:0}},appendToQueue:function(a,b){return babelHelpers["extends"]({},a,{entries:[].concat(a.entries,[b])})},insertIntoQueueAfterCurrent:function(a,b){return babelHelpers["extends"]({},a,{entries:[].concat(a.entries.slice(0,a.index+1),[b],a.entries.slice(a.index+1))})},moveCurrentIndexToDirection:function(a,b){b=a.index+b;return b<0||b>=a.entries.length?a:babelHelpers["extends"]({},a,{index:b})},moveCurrentIndexToNext:function(a){return h.moveCurrentIndexToDirection(a,1)},moveCurrentIndexToPrev:function(a){return h.moveCurrentIndexToDirection(a,-1)},updateSingleQueueEntry:function(a,c,d){var e=a.entries.map(function(a){return a.queueEntryID===c?b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.update(a,d):a});return e===a.entries||e.length===a.entries.length&&e.every(function(c,d){return b("shallowEqual")(c,a.entries[d])})?a:babelHelpers["extends"]({},a,{entries:e})},updateQueueEntries:function(a,c,d){d===void 0&&(d=!1);var e=g.getCurrentQueueEntry(a);c=c(a.entries);if(c===a.entries||c.length===a.entries.length&&c.every(function(c,d){return b("shallowEqual")(c,a.entries[d])}))return a;var f=c.findIndex(function(a){return a.queueEntryID===(e==null?void 0:e.queueEntryID)});f=f>=0?f:0;if(!d){var h=new Map();a.entries.forEach(function(a){h.set(a.queueEntryID,a)});c.forEach(function(a){h["delete"](a.queueEntryID)});h.forEach(function(a){b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.destroy(a)})}return babelHelpers["extends"]({},a,{entries:c,index:f})},takeAndRemoveFirstQueueEntry:function(a,b){b.current=null;return h.updateQueueEntries(a,function(a){var c=a[0];a=a.slice(1);b.current=c;return a},!0)},moveNextRelatedVideoIntoQueueIfAtEndOfQueue:function(a){a=a;var c=g.getCurrentQueueEntry(a),d=g.getLastQueueEntry(a);d=c!=null&&d!=null&&c.queueEntryID===d.queueEntryID;if(!d)return a;if(c!=null){var e={current:null};d=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getRelatedVideosRootQueueEntryID(c);a=h.updateSingleQueueEntry(a,d,function(a){return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.takeAndRemoveNextRelatedVideo(a,e)});d=e.current;d!=null&&(a=h.appendToQueue(a,b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.deriveChainingInfo(d,c)))}return a},sideEffectfulStartFetchingVideoExperience:function(a,c,d){if(c<=0)return a;var e=g.getQueueIndex(a);return e<0?a:h.updateQueueEntries(a,function(a){return a.map(function(a,f){a=a;f>=e&&f<e+c&&(a=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.sideEffectfulStartFetchingVideoExperience(a));a=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.updateRelatedVideosQueue(a,function(a){return h.sideEffectfulStartFetchingVideoExperience(a,d,0)});return a})})}};f.TV2VideoExperienceQueueStateReducers=h}),null);
__d("TV2VideoExperienceState",["TV2VideoExperienceQueueState","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g={getExperienceInfoForFBAppProtocol:function(a){return a.experienceInfoForFBAppProtocol},getQueue:function(a){return a.queue},getCurrentQueueEntry:function(a){a=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getCurrentQueueEntry(g.getQueue(a));if(a==null)throw b("unrecoverableViolation")("Unexpected empty queue in video experience state","comet_tv_casting");return a},getLastQueueEntry:function(a){a=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getLastQueueEntry(g.getQueue(a));if(a==null)throw b("unrecoverableViolation")("Unexpected empty queue in video experience state","comet_tv_casting");return a}};f.TV2VideoExperienceStateSelectors=g;a={makeOrReuse:function(a,c){a=a.experienceInfoForFBAppProtocol;return c!=null&&c.experienceInfoForFBAppProtocol.experienceName===a.experienceName&&c.experienceInfoForFBAppProtocol.experienceKey===a.experienceKey?c:{experienceInfoForFBAppProtocol:a,isIdle:!1,queue:b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.make(),type:"video_experience"}},updateQueue:function(a,b){b=b(a.queue);return b===a.queue?a:babelHelpers["extends"]({},a,{queue:b})},markIdle:function(a,b){return b===a.isIdle?a:babelHelpers["extends"]({},a,{isIdle:b})}};f.TV2VideoExperienceStateReducers=a}),null);
__d("TV2AppExperienceState",["TV2VideoExperienceState"],(function(a,b,c,d,e,f){"use strict";var g={castToVideoExperience:function(a){var b=null;switch(a.type){case"video_experience":b=a;break}return b}};f.TV2AppExperienceStateSelectors=g;a={makeIdleExperience:function(){return{type:"idle_experience"}},makeOrReuseVideoExperience:function(a,c){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.makeOrReuse(a,c!=null?g.castToVideoExperience(c):null)},makeShutdownExperience:function(){return{type:"shutdown_experience"}}};f.TV2AppExperienceStateReducers=a}),null);
__d("getTV2DebugTimeoutsEnabled",["getTV2DebuggingEnabled","getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return b("getTV2DebuggingEnabled")()&&b("getTV2QueryStringCheatcode")("tv2_debug_timeouts")}}),null);
__d("TV2ExperimentsConfig",["DateConsts","ErrorNormalizeUtils","TV2CommsParseUtils","getErrorSafe","getTV2DebugTimeoutsEnabled","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.parseFromGraphQL=a;var g={example_experiment:!1,fix_repeated_fetch_related_videos:!1,idle_experience_idle_timeout_ms:null,memory_usage_logging:!1,send_status_update_and_duration_change_on_player_mounted:!1,shutdown_on_video_idle_screen_timeout:!1,shutdown_sequence_enabled:!1,stop_chaining_if_user_inactive_for_ms:null,toasts_enabled:!1,up_next_interstitial:null,video_experience_idle_screen_idle_timeout_ms:null,video_experience_idle_timeout_ms:null};f.TV2ExperimentsConfigDefault=g;function h(a){return b("getTV2DebugTimeoutsEnabled")()&&typeof a==="number"?Math.min(.01*a,2*b("DateConsts").MS_PER_MIN):a}function a(a,c){var d,e=(d=b("TV2CommsParseUtils")).parseJSONString(a,d.parseObject,c);return babelHelpers["extends"]({},g,{example_experiment:f("example_experiment",d.parseBoolean),fix_repeated_fetch_related_videos:f("fix_repeated_fetch_related_videos",d.parseBoolean),idle_experience_idle_timeout_ms:h(f("idle_experience_idle_timeout_ms",d.parseOptionalNumber)),memory_usage_logging:f("memory_usage_logging",d.parseBoolean),send_status_update_and_duration_change_on_player_mounted:f("send_status_update_and_duration_change_on_player_mounted",d.parseBoolean),shutdown_on_video_idle_screen_timeout:f("shutdown_on_video_idle_screen_timeout",d.parseBoolean),shutdown_sequence_enabled:f("shutdown_sequence_enabled",d.parseBoolean),stop_chaining_if_user_inactive_for_ms:h(f("stop_chaining_if_user_inactive_for_ms",d.parseOptionalNumber)),toasts_enabled:f("toasts_enabled",d.parseBoolean),up_next_interstitial:f("up_next_interstitial",function(c,a){c=b("TV2CommsParseUtils").parseOptionalObject(c,a);return c?{countdown_seconds:b("TV2CommsParseUtils").parseNumber(c.countdown_seconds,a+".countdown_seconds")}:null}),video_experience_idle_screen_idle_timeout_ms:h(f("video_experience_idle_screen_idle_timeout_ms",d.parseOptionalNumber)),video_experience_idle_timeout_ms:h(f("video_experience_idle_timeout_ms",d.parseOptionalNumber))});function f(a,d){try{return d(e[a],c+"."+a)}catch(c){d=b("ErrorNormalizeUtils").normalizeError(b("getErrorSafe")(c));b("recoverableViolation")("TV2ExperimentsConfig."+a+": "+d.message,"comet_tv_casting");return g[a]}}}}),null);
__d("TV2ExperimentsState",["TV2ExperimentsConfig","deepEquals"],(function(a,b,c,d,e,f){"use strict";a={makeInitialState:function(){return{experimentsConfig:b("TV2ExperimentsConfig").TV2ExperimentsConfigDefault,version:0}},getExperimentsConfig:function(a){return a.experimentsConfig},updateExperimentsConfig:function(a,c){return b("deepEquals")(c,a.experimentsConfig)?a:babelHelpers["extends"]({},a,{experimentsConfig:c,version:a.version+1})}};f.TV2ExperimentsState=a}),null);
__d("TV2MemoryUsageLoggerLazy",["JSResourceForInteraction"],(function(a,b,c,d,e,f){"use strict";var g=0,h=b("JSResourceForInteraction")("CometMemoryLogger").__setRef("TV2MemoryUsageLoggerLazy"),i=null,j=h.getModuleIfRequireable();j&&k(j);function k(a){a.init(),a.setNavigationCount(g),j=a}function a(){if(j)return;if(i)return;i=h.load()["finally"](function(){i=null;var a=h.getModuleIfRequireable();a&&k(a)})}function c(){g++,j&&j.setNavigationCount(g)}d={incrementNavigationCount:c,loadAndInit:a};e.exports=d}),null);
__d("TV2Timeout",["clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";f.makeTV2Timeout=a;function a(){var a=null,c=null;function d(){a!=null&&b("clearTimeout")(a),a=null,c=null,f.plannedTime=null,f.triggered=!1}function e(){var b=c;a=null;c=null;f.plannedTime=null;f.triggered=!0;b&&b()}var f={plannedTime:null,triggered:!1,update:function(g,h,i){if(h==null){d();return}switch(i){case"reset":d();f.plannedTime=Date.now()+h;f.triggered=!1;c=g;a=b("setTimeout")(e,h);break;case"stop":d();break;case"keep":c=g;break;default:i}}};return f}}),null);
__d("TV2ToastsState",["TV2UniqueIDs","TV2VideoExperienceQueueEntryState","setTimeout","shallowEqual"],(function(a,b,c,d,e,f){"use strict";var g=10,h=3,i={makeAddedToQueue:function(a){a=a.queueEntry;var c=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getBlurredThumbnailURL(a);a=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoID(a);var d=c!=null?"not_loaded":"empty";a={debugVideoID:a,toastID:b("TV2UniqueIDs").makeTV2ToastID(),toastImageState:d,toastImageURL:c,toastState:d==="empty"?"ready":"initial",type:"added_to_queue"};return a},updateWithImageLoaded:function(a){var b=babelHelpers["extends"]({},a,{toastImageState:"loaded",toastState:a.toastState==="initial"?"ready":a.toastState});return b.toastImageState!==a.toastImageState||b.toastState!==a.toastState?b:a},updateWithSeen:function(a){return a.toastState!=="seen"?babelHelpers["extends"]({},a,{toastState:"seen"}):a}};f.TV2ToastEntryStateReducers=i;a={getToastsForUI:function(a){return a.entries.slice(0,h)}};f.TV2ToastsStateSelectors=a;var j={make:function(){return{entries:[]}},insertIntoToasts:function(a,b,c){c===void 0&&(c=function(){return!0});var d=a.entries.filter(c);a=j.updateEachToast(a,function(a,b){if(!c(a))return null;return b<d.length-(g-1)?i.updateWithSeen(a):a});return babelHelpers["extends"]({},a,{entries:[].concat(a.entries,[b])})},updateEachToast:function(a,c){var d=!1,e=a.entries.map(function(a,e){e=c(a,e);if(!b("shallowEqual")(e,a)){d=!0;return e}return a});return!d?a:{entries:e.filter(Boolean)}},sideEffectfulStartLoadingToastImages:function(a,c){return j.updateEachToast(a,function(a){var d=a.toastImageState,e=a.toastImageURL;if(e!=null&&d==="not_loaded"){d=new Image();d.onload=d.onerror=function(){c({toastID:a.toastID,toastImageURL:e})};d.src=e;d.complete&&b("setTimeout")(function(){c({toastID:a.toastID,toastImageURL:e})},0);return babelHelpers["extends"]({},a,{toastImageState:"loading"})}return a})}};f.TV2ToastsStateReducers=j}),null);
__d("getTV2DebugFetchRelatedVideosImmediately",["getTV2DebuggingEnabled","getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return b("getTV2DebuggingEnabled")()&&b("getTV2QueryStringCheatcode")("tv2_debug_load_related_videos_immediately")}}),null);
__d("getTV2DebugOverlayEnabled",["getTV2DebuggingEnabled","getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return b("getTV2DebuggingEnabled")()&&b("getTV2QueryStringCheatcode")("tv2_debug_overlay")}}),null);
__d("getTV2DebugShutdownEnabled",["getTV2DebuggingEnabled","getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return b("getTV2DebuggingEnabled")()&&b("getTV2QueryStringCheatcode")("tv2_debug_shutdown")}}),null);
__d("getTV2DebugUpNextEnabled",["getTV2DebuggingEnabled","getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return b("getTV2DebuggingEnabled")()&&b("getTV2QueryStringCheatcode")("tv2_debug_up_next")}}),null);
__d("getTV2DebuggingOnDesktop",["getTV2DebuggingEnabled"],(function(a,b,c,d,e,f){"use strict";e.exports=c;function c(){return b("getTV2DebuggingEnabled")()&&a.navigator.hardwareConcurrency>2}}),null);
__d("TV2AppState",["Promise","TV2AppExperienceState","TV2ExperimentsState","TV2MemoryUsageLoggerLazy","TV2Timeout","TV2ToastsState","TV2UpNextInterstitialState","TV2VideoExperienceQueueEntryState","TV2VideoExperienceQueueState","TV2VideoExperienceState","getTV2DebugFetchRelatedVideosImmediately","getTV2DebugOverlayEnabled","getTV2DebugShutdownEnabled","getTV2DebugUpNextEnabled","getTV2DebuggingOnDesktop","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";f.getTV2AppStateTransitionHandlers=a;f.runTV2AppStateTransitionHandlers=c;var g={getIsLifecycleShutdown:function(a){return a.lifecycleState==="shutdown"},getVideoExperience:function(a){return b("TV2AppExperienceState").TV2AppExperienceStateSelectors.castToVideoExperience(a.experience)},getRelayEnvironment:function(a){a=g.getVideoExperience(a);a=a!=null?b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getCurrentQueueEntry(a):null;return a!=null?b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getRelayEnvironment(a):null},getExperienceInfoForFBAppProtocol:function(a){a=g.getVideoExperience(a);a=a!=null?b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getExperienceInfoForFBAppProtocol(a):null;return a},getCurrentQueueEntry:function(a){a=g.getVideoExperience(a);a=a!=null?b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getCurrentQueueEntry(a):null;return a},getLastQueueEntry:function(a){a=g.getVideoExperience(a);a=a!=null?b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getLastQueueEntry(a):null;return a},getCurrentVideoCastRequest:function(a){a=g.getCurrentQueueEntry(a);a=a!=null?b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoCastRequest(a):null;return a},getCurrentVideoCastRequestID:function(a){a=g.getCurrentVideoCastRequest(a);return a!=null?a.videoCastRequestID:null},getExperimentsConfig:function(a){return b("TV2ExperimentsState").TV2ExperimentsState.getExperimentsConfig(a.experiments)}};f.TV2AppStateSelectors=g;var h={make:function(){return{debugOverlayEnabled:b("getTV2DebugOverlayEnabled")(),experience:b("TV2AppExperienceState").TV2AppExperienceStateReducers.makeIdleExperience(),experienceReactError:null,experienceReactKey:0,experiments:b("TV2ExperimentsState").TV2ExperimentsState.makeInitialState(),lastObservedUserActivityTimestampRef:{current:null},lifecycleState:"before_first_video_experience",shutdownSequencePromise:null,timeouts:{idle_experience_idle_timeout:b("TV2Timeout").makeTV2Timeout(),video_experience_idle_screen_idle_timeout:b("TV2Timeout").makeTV2Timeout(),video_experience_idle_timeout:b("TV2Timeout").makeTV2Timeout()},toasts:b("TV2ToastsState").TV2ToastsStateReducers.make(),version:0}},setExperienceReactError:function(a,b){return babelHelpers["extends"]({},a,{experienceReactError:b.error})},updateExperience:function(a,b){if(g.getIsLifecycleShutdown(a))return a;b=b(a.experience);if(b===a.experience)return a;var c;b.type==="shutdown_experience"?c="shutdown":a.lifecycleState==="before_first_video_experience"&&b.type==="video_experience"?c="running":c=a.lifecycleState;var d=a;d=babelHelpers["extends"]({},d,{experience:b,lifecycleState:c,version:a.version+1});b=a.experienceReactError!=null&&!(d.experience.type==="video_experience"&&((b=g.getCurrentQueueEntry(d))==null?void 0:b.queueEntryID)===((c=g.getCurrentQueueEntry(a))==null?void 0:c.queueEntryID));d=babelHelpers["extends"]({},d,{experienceReactError:b?null:a.experienceReactError,experienceReactKey:b?a.experienceReactKey+1:a.experienceReactKey});return d},updateVideoExperience:function(a,c){return g.getIsLifecycleShutdown(a)?a:h.updateExperience(a,function(a){var d=b("TV2AppExperienceState").TV2AppExperienceStateSelectors.castToVideoExperience(a);return d!=null?c(d):a})},updateQueueEntries:function(a,c){return h.updateVideoExperience(a,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.updateQueueEntries(a,c)})})},updateSingleQueueEntry:function(a,c,d){return h.updateVideoExperience(a,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.updateSingleQueueEntry(a,c,d)})})},updateToasts:function(a,b){if(g.getIsLifecycleShutdown(a))return a;b=b(a.toasts);return b===a.toasts?a:babelHelpers["extends"]({},a,{toasts:b,version:a.version+1})},updateExperiments:function(a,b){if(g.getIsLifecycleShutdown(a))return a;b=b(a.experiments);return b===a.experiments?a:babelHelpers["extends"]({},a,{experiments:b,version:a.version+1})},transitionToIdleExperience:function(a){return g.getIsLifecycleShutdown(a)?a:h.updateExperience(a,function(a){return a.type==="idle_experience"?a:b("TV2AppExperienceState").TV2AppExperienceStateReducers.makeIdleExperience()})},transitionToShutdownExperience:function(a){return g.getIsLifecycleShutdown(a)?a:h.updateExperience(a,function(a){return a.type==="shutdown_experience"?a:b("TV2AppExperienceState").TV2AppExperienceStateReducers.makeShutdownExperience()})},moveVideoExperienceQueueCurrentIndexToDirection:function(a,c){var d=c.clockTimestamp,e=c.direction,f=c.isUserInitiated,i=b("getTV2DebugUpNextEnabled")()?{countdown_seconds:10}:g.getExperimentsConfig(a).up_next_interstitial;return h.updateVideoExperience(a,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){var c=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.moveCurrentIndexToDirection(a,e);if(c!==a&&i!=null){var g=(a=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getCurrentQueueEntry(c))==null?void 0:a.queueEntryID;c=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.updateQueueEntries(c,function(a){return a.map(function(a){var c=a.queueEntryID===g;return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.updateUpNext(a,function(){return b("TV2UpNextInterstitialState").TV2UpNextInterstitialStateReducers.resetOnCurrentEntryChanged({clockTimestamp:d,forCurrentQueueEntry:c,isUserInitiated:f,upNextConfig:i})})})})}return c})})},transitionToPrevVideo:function(a,b){var c=b.clockTimestamp;b=b.isUserInitiated;return g.getIsLifecycleShutdown(a)?a:h.moveVideoExperienceQueueCurrentIndexToDirection(a,{clockTimestamp:c,direction:-1,isUserInitiated:b})},transitionToNextVideo:function(a,c){var d,e=c.clockTimestamp;c=c.isUserInitiated;if(g.getIsLifecycleShutdown(a))return a;a=a;var f=g.getCurrentQueueEntry(a);if(c&&f!=null&&((d=f.upNextInterstitialState)==null?void 0:d.upNextVisibility)==="up_next_visible")return h.updateSingleQueueEntry(a,f.queueEntryID,function(a){return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.updateUpNext(a,function(a){return b("TV2UpNextInterstitialState").TV2UpNextInterstitialStateReducers.markSeen(a)})});a=h.moveNextRelatedVideoIntoQueueIfAtEndOfQueue(a,{isUserInitiated:c});a=h.moveVideoExperienceQueueCurrentIndexToDirection(a,{clockTimestamp:e,direction:1,isUserInitiated:c});return a},startNewQueue:function(a,c){var d=c.experienceInfoForFBAppProtocol,e=c.videoCastRequest;return h.updateExperience(a,function(a){a=b("TV2AppExperienceState").TV2AppExperienceStateReducers.makeOrReuseVideoExperience({experienceInfoForFBAppProtocol:d},a);return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.appendToQueue(b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.make(),b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.make({videoCastRequest:e}))})})},playVideoNow:function(a,c,d){var e=c.experienceInfoForFBAppProtocol,f=c.videoCastRequest;c=a;c=h.updateExperience(c,function(a){a=b("TV2AppExperienceState").TV2AppExperienceStateReducers.makeOrReuseVideoExperience({experienceInfoForFBAppProtocol:e},a);return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.insertIntoQueueAfterCurrent(a,b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.make({videoCastRequest:f}))})});c=h.transitionToNextVideo(c,{clockTimestamp:d,isUserInitiated:!0});return c},addVideoToQueue:function(a,c){var d=c.experienceInfoForFBAppProtocol,e=c.videoCastRequest;return h.updateExperience(a,function(a){a=b("TV2AppExperienceState").TV2AppExperienceStateReducers.makeOrReuseVideoExperience({experienceInfoForFBAppProtocol:d},a);return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.appendToQueue(a,b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.make({videoCastRequest:e}))})})},moveNextRelatedVideoIntoQueueIfAtEndOfQueue:function(a,c){c=c.isUserInitiated;if(g.getIsLifecycleShutdown(a))return a;var d=a.lastObservedUserActivityTimestampRef.current;d=d!=null?Date.now()-d:null;var e=g.getExperimentsConfig(a);c=!c&&e.stop_chaining_if_user_inactive_for_ms!=null&&e.stop_chaining_if_user_inactive_for_ms>0&&d!=null&&d>e.stop_chaining_if_user_inactive_for_ms;return c?a:h.updateVideoExperience(a,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.moveNextRelatedVideoIntoQueueIfAtEndOfQueue(a)})})},updateEachTimeout:function(a,b){Object.keys(a.timeouts).forEach(function(c){var d=a.timeouts[c];b(c,d)})}};f.TV2AppStateReducers=h;d=h.make();f.initialTV2AppState=d;function i(a,c,d){switch(c.type){case"experience_react_error":return h.setExperienceReactError(a,c);case"user_start_new_queue":return h.startNewQueue(a,c);case"user_play_video_now":return h.playVideoNow(a,c,d);case"user_add_video_to_queue":return h.addVideoToQueue(a,c);case"user_select_prev_video":return h.transitionToPrevVideo(a,{clockTimestamp:d,isUserInitiated:!0});case"user_select_next_video":return h.transitionToNextVideo(a,{clockTimestamp:d,isUserInitiated:!0});case"user_stop_current_experience":return h.transitionToIdleExperience(a);case"debug_shutdown":return h.transitionToShutdownExperience(a);case"debug_video_experience_idle":return h.updateVideoExperience(a,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.markIdle(a,c.isIdle)});case"toast_image_loaded":return h.updateToasts(a,function(a){return b("TV2ToastsState").TV2ToastsStateReducers.updateEachToast(a,function(a){return a.toastImageURL===c.toastImageURL?b("TV2ToastsState").TV2ToastEntryStateReducers.updateWithImageLoaded(a):a})});case"toast_seen":return h.updateToasts(a,function(a){return b("TV2ToastsState").TV2ToastsStateReducers.updateEachToast(a,function(a){return a.toastID===c.toastID?b("TV2ToastsState").TV2ToastEntryStateReducers.updateWithSeen(a):a})});case"toast_unmount_animation_ended":return h.updateToasts(a,function(a){return b("TV2ToastsState").TV2ToastsStateReducers.updateEachToast(a,function(a){return a.toastID===c.toastID?null:a})});case"shutdown_from_comms":return h.transitionToShutdownExperience(a);case"experiments_config_received_from_relay":return h.updateExperiments(a,function(a){return b("TV2ExperimentsState").TV2ExperimentsState.updateExperimentsConfig(a,c.experimentsConfig)});case"related_videos_request_completed":return h.updateSingleQueueEntry(a,c.queueEntryID,function(a){return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.updateWithRelatedVideosRequestCompleted(a,c.relatedVideosRequestResult)});case"video_cast_player_mounted":return a;case"video_cast_player_duration_changed":return a;case"video_cast_player_state_changed":return a;case"timeout_triggered":switch(c.timeoutName){case"idle_experience_idle_timeout":if(a.experience.type==="idle_experience")return h.transitionToShutdownExperience(a);else return a;case"video_experience_idle_timeout":if(a.experience.type==="video_experience")return h.transitionToShutdownExperience(a);else return a;case"video_experience_idle_screen_idle_timeout":if(a.experience.type==="video_experience"){d=g.getExperimentsConfig(a);return d.shutdown_on_video_idle_screen_timeout?h.transitionToShutdownExperience(a):h.transitionToIdleExperience(a)}else return a;default:c.timeoutName;return a}case"up_next_countdown_shown":return h.updateSingleQueueEntry(a,c.queueEntryID,function(a){return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.updateUpNext(a,function(a){return b("TV2UpNextInterstitialState").TV2UpNextInterstitialStateReducers.markShown(a)})});case"up_next_countdown_complete":return h.updateSingleQueueEntry(a,c.queueEntryID,function(a){return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.updateUpNext(a,function(a){return b("TV2UpNextInterstitialState").TV2UpNextInterstitialStateReducers.markSeen(a)})});case"user_pause_current_video":return a;case"user_unpause_current_video":return a;case"user_seek_current_video":return a;default:c.type;b("recoverableViolation")("Unexpected app state action: "+c.type,"comet_tv_casting");return a}}function a(){var a=[function(a){var b=a.action;a=a.pendingState;if(b.source==="from_user"){b=Date.now();a.lastObservedUserActivityTimestampRef.current=b}return a},function(a){var b=a.action;a=a.pendingState;return i(a,b,Date.now())},function(a){var c=a.action,d=a.pendingState;a=a.prevState;var e=g.getCurrentQueueEntry(d);a=g.getCurrentQueueEntry(a);e!=null&&e.queueEntryID!==(a==null?void 0:a.queueEntryID)&&(e.lastObservedVideoPlayerStateRef.current=null);switch(c.type){case"video_cast_player_mounted":case"video_cast_player_duration_changed":case"video_cast_player_state_changed":a=c.queueEntryID;var f=c.videoPlayerState;e=h.updateSingleQueueEntry(d,a,function(a){return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.sideEffectfulUpdateLastObservedVideoPlayerState(a,f)});c=g.getCurrentQueueEntry(e);if(c!=null&&b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVolatileIsLastObservedVideoPlayerStateEnded(c)){var i;e=h.transitionToNextVideo(e,{clockTimestamp:Date.now(),isUserInitiated:!1});a=(a=g.getCurrentQueueEntry(e))==null?void 0:a.queueEntryID;i=(i=g.getLastQueueEntry(e))==null?void 0:i.queueEntryID;a!=null&&i!=null&&a===c.queueEntryID&&a===i&&(e=h.updateVideoExperience(e,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.markIdle(a,!0)}))}return e}return d},function(a){var c=a.action,d=a.pendingState;a=a.prevState;switch(c.type){case"user_add_video_to_queue":c=g.getCurrentQueueEntry(d);a=g.getLastQueueEntry(a);if(c!=null&&a!=null&&c.queueEntryID===a.queueEntryID&&b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVolatileIsLastObservedVideoPlayerStateEnded(c))return h.transitionToNextVideo(d,{clockTimestamp:Date.now(),isUserInitiated:!0})}return d},function(a){var c=a.handleSideEffectEvent,d=a.logger;a=a.pendingState;var e=g.getCurrentQueueEntry(a),f=g.getLastQueueEntry(a);if(e==null||f==null)return a;var i=b("getTV2DebugFetchRelatedVideosImmediately")();i=i||e.queueEntryID===f.queueEntryID&&k(f);if(!i)return a;var j=g.getExperimentsConfig(a);e=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getRelatedVideosRootQueueEntryID(f);return h.updateSingleQueueEntry(a,e,function(a){return b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateReducers.sideEffectfulStartFetchingRelatedVideos(a,j,function(b){c({queueEntryID:a.queueEntryID,relatedVideosRequestResult:b,source:"from_app",type:"related_videos_request_completed"});switch(b.type){case"loaded":break;case"error":d.logTVError({error:b.error,errorLocation:"related_videos_request_completed"});break;case"channel_token_empty":break;case"channel_ended":break;default:b.type}})});function k(a){a=a!=null&&(b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVolatileIsLastObservedVideoPlayerStateEnded(a)||b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVolatileIsLastObservedVideoPlayerStatePlaying(a));return a}},function(a){var b=a.logger;a=a.pendingState;var c=g.getCurrentVideoCastRequest(a);c!=null&&b.overrideAccessToken(c.accessToken);return a},function(a){a=a.pendingState;var c=g.getVideoExperience(a);if(c==null)return a;c=b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getCurrentQueueEntry(c);return c==null?a:h.updateVideoExperience(a,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.updateQueue(a,function(a){return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateReducers.sideEffectfulStartFetchingVideoExperience(a,2,1)})})},function(a){var c=a.pendingState;a=a.prevState;var d=g.getExperimentsConfig(c);if(!d.toasts_enabled)return c;d=g.getVideoExperience(a);if(d!=null){var e=b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getQueue(d);a=g.getVideoExperience(c);d=a!=null?b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getQueue(a):null;var f=[];d!=null&&b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.forEachQueueEntry(d,function(a,c){if(e==null&&c===0)return;if(a.videoCastRequest.fromNextVideoQuery)return;c=e!=null?b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.findQueueEntry(e,function(b){return b.queueEntryID===a.queueEntryID}):null;c||f.push(a)});return h.updateToasts(c,function(a){return f.reduce(function(a,c){return b("TV2ToastsState").TV2ToastsStateReducers.insertIntoToasts(a,b("TV2ToastsState").TV2ToastEntryStateReducers.makeAddedToQueue({queueEntry:c}))},a)})}return c},function(a){var c=a.handleSideEffectEvent;a=a.pendingState;return h.updateToasts(a,function(a){return b("TV2ToastsState").TV2ToastsStateReducers.sideEffectfulStartLoadingToastImages(a,function(a){var b=a.toastID;a=a.toastImageURL;c({source:"from_app",toastID:b,toastImageURL:a,type:"toast_image_loaded"})})})},function(a){var c=a.action;a=a.pendingState;return c.source==="from_user"?h.updateVideoExperience(a,function(a){return b("TV2VideoExperienceState").TV2VideoExperienceStateReducers.markIdle(a,!1)}):a},function(a){var b=a.action,c=a.handleSideEffectEvent,d=a.pendingState,e=a.prevState,f=b.source==="from_user",i=b.source==="from_player",j=g.getExperimentsConfig(d);h.updateEachTimeout(d,function(a,b){function h(){c({source:"from_app",timeoutName:a,type:"timeout_triggered"})}switch(a){case"idle_experience_idle_timeout":b.update(h,j.idle_experience_idle_timeout_ms,function(){if(d.experience.type==="idle_experience")if(d.experience.type!==e.experience.type)return"reset";else return"keep";else return"stop"}());break;case"video_experience_idle_timeout":b.update(h,j.video_experience_idle_timeout_ms,function(){if(d.experience.type==="video_experience")if(d.experience.type!==e.experience.type||f||i)return"reset";else return"keep";else return"stop"}());break;case"video_experience_idle_screen_idle_timeout":var k,l=(k=g.getVideoExperience(d))==null?void 0:k.isIdle,m=(k=g.getVideoExperience(e))==null?void 0:k.isIdle;b.update(h,j.video_experience_idle_screen_idle_timeout_ms,function(){if(d.experience.type==="video_experience")if(l!==m)if(l===!0)return"reset";else return"stop";else return"keep";else return"stop"}());break;default:a}});return d},j,k,l];return a}function j(a){var b=a.logger,c=a.pendingState;a=a.prevState;a=g.getExperienceInfoForFBAppProtocol(a);var d=g.getExperienceInfoForFBAppProtocol(c);a!=null&&(d==null||d.experienceName!==a.experienceName)&&b.logTVEvent("receiver_experience_ended",String(a.experienceName));return c}function k(a){var c=a.comms,d=a.logger;a=a.pendingState;var e=g.getExperimentsConfig(a);if(!e.shutdown_sequence_enabled)return a;if(a.lifecycleState!=="shutdown")return a;if(a.shutdownSequencePromise)return a;e=b("Promise").resolve().then(function(){return d.shutdownLoggerAsync()}).then(function(){c.terminateApp()})["catch"](function(){if(b("getTV2DebuggingOnDesktop")()&&!b("getTV2DebugShutdownEnabled")())return;window.close()});return babelHelpers["extends"]({},a,{shutdownSequencePromise:e})}function l(a){var c=a.pendingState;a=a.prevState;var d=g.getCurrentQueueEntry(c);a=g.getCurrentQueueEntry(a);(d==null?void 0:d.queueEntryID)!==(a==null?void 0:a.queueEntryID)&&b("TV2MemoryUsageLoggerLazy").incrementNavigationCount();return c}function c(a,b){return a.reduce(function(a,b){b=b(a);return babelHelpers["extends"]({},a,{pendingState:b})},b).pendingState}}),null);
__d("getTV2DebugSkip",["getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=b("getTV2QueryStringCheatcode")("tv2_debug_no_skip");if(c)return!1;c=/video_cast_player_state_changed/.test(a)||/\"type\":\"status_update\"/.test(a);return c}}),null);
__d("TV2AppController",["TV2AppState","getTV2DebugSkip","getTV2DebuggingEnabled","removeFromArray","setTV2Breakpoint","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=this,d=a.comms,e=a.initialState,f=a.logger;a=a.scheduleSetReactState;this.$3=[];this.$8=function(a){c.$6(a)};this.$1=d;this.$2=f;this.$4=a;this.$5=e;b("getTV2DebuggingEnabled")()&&(window.__FB_TV_APP_CONTROLLER=this)}var c=a.prototype;c.handleAppCommand=function(a){this.$6(a)};c.handleAppEvent=function(a){this.$6(a),this.$1.notifySendersAboutAppEvent(a)};c.handlePlaybackCommand=function(a){this.$7(a),this.$6(a)};c.getAppCurrentState=function(){return this.$5};c.addPlaybackCommandHandler=function(a){var c=this;this.$3.push(a);return function(){b("removeFromArray")(c.$3,a)}};c.debugHandleSideEffectEvent=function(a){this.$8(a)};c.$6=function(a){var c=this.$1;if(c==null)throw b("unrecoverableViolation")("Missing comms","comet_tv_casting");var d=this.$5,e=d,f=b("TV2AppState").getTV2AppStateTransitionHandlers();e=b("TV2AppState").runTV2AppStateTransitionHandlers(f,{action:a,comms:c,handleSideEffectEvent:this.$8,logger:this.$2,pendingState:e,prevState:d});b("getTV2DebugSkip")("TV2AppController:_performStateTransition:"+a.type)||b("setTV2Breakpoint")("TV2AppController:_performStateTransition:"+a.type,{action:a,pendingState:e,prevState:d});e!==this.$5&&(this.$5=e,this.$4(this.$5))};c.$7=function(a){this.$3.forEach(function(b){b(a)})};return a}();e.exports=a}),null);
__d("TV2AppControllerContext.react",["react"],(function(a,b,c,d,e,f){"use strict";var g;a=g||b("react");c=a.createContext(null);d=c;e.exports=d}),null);
__d("TV2AppStateContext.react",["react"],(function(a,b,c,d,e,f){"use strict";var g;a=g||b("react");c=a.createContext(null);d=c;e.exports=d}),null);
__d("ConnectedTVExperienceNames",[],(function(a,b,c,d,e,f){a=Object.freeze({CHANNEL_VIDEO:"ChannelVideo",FAST_CAST:"FastCast",IDLE:"Idle",INSTALLED_APP:"InstalledApp",SIMPLE_VIDEO:"SimpleVideo",TESTING:"Testing",PHOTO_360:"360Photo"});e.exports=a}),null);
__d("TV2LoggerSessionID",["guid"],(function(a,b,c,d,e,f){"use strict";a=b("guid")();c=a;e.exports=c}),null);
__d("TV2FBAppConnection",["ConnectedTVExperienceNames","Random","SiteData","TV2AppState","TV2CommsParseUtils","TV2LoggerSessionID","TV2VideoExperienceQueueEntryState","TV2VideoExperienceQueueState","TV2VideoExperienceState","err","getTV2DebugLog","objectValues","setTV2Breakpoint"],(function(a,b,c,d,e,f){"use strict";var g=b("getTV2DebugLog")("[TV2FBAppConnection][debugLog] ");c=function(){function c(b,c,d,e,f){this.$7=1,this.$8=null,this.$9=null,this.$10={},this.$5=b,this.$1=c,this.$2=d,this.$3=e,this.$4=f,this.$6=/\bgoogle_cast_bg=true\b/.test(a.location.search)}var d=c.prototype;d.receiveMessage=function(a){var c;g("receiveMessage ("+this.$5+"):",a);var d=(c=b("TV2CommsParseUtils")).parseJSONString(a,c.parseObject,"."),e=c.parseNonEmptyString(d.type,".type"),f=e;c=c.parseNumber(d.num,".num");b("setTV2Breakpoint")("TV2FBAppConnection:receiveMessage:"+e,a);switch(f){case"version_launch":this.$11(d,c);break;case"version_request":this.$12(d,c);break;case"launch":this.$13(d,c);break;case"get_experience_state":this.$14(d,c);break;case"experience_command":this.$15(d,c);break;default:f,this.$16(d,c,e)}};d.$17=function(a){var b=this.$8;b!=null&&b.videoCastRequestID===a&&(this.$8=null,this.$18(b.incomingMessageNumber,b.experienceInfoForFBAppProtocol),this.$19(b.experienceInfoForFBAppProtocol))};d.$20=function(a){var b=this.$8;b!=null&&(this.$8=null,this.$21(b.incomingMessageNumber,a))};d.$22=function(a){var b=this.$9;b!=null&&b.videoCastRequestID===a&&(this.$9=null,this.$23(b.incomingMessageNumber,0))};d.$24=function(a){var b=this.$9;b!=null&&(this.$9=null,this.$25(b.incomingMessageNumber,a))};d.notifySendersAboutAppEvent=function(a){switch(a.type){case"experience_react_error":break;case"experiments_config_received_from_relay":break;case"video_cast_player_mounted":this.$17(a.videoCastRequestID);this.$22(a.videoCastRequestID);var c=this.$2();c=c!=null?b("TV2AppState").TV2AppStateSelectors.getExperimentsConfig(c):null;c!=null&&c.send_status_update_and_duration_change_on_player_mounted&&(this.$26({videoCastRequestID:a.videoCastRequestID,videoPlayerState:a.videoPlayerState}),this.$27({videoCastRequestID:a.videoCastRequestID,videoPlayerState:a.videoPlayerState}));break;case"video_cast_player_duration_changed":this.$27({videoCastRequestID:a.videoCastRequestID,videoPlayerState:a.videoPlayerState});break;case"video_cast_player_state_changed":this.$4.setTvPlayerInstanceKey(a.videoPlayerState.playerInstanceKey);this.$4.setTvPlayerVersion(a.videoPlayerState.playerVersion);this.$26({videoCastRequestID:a.videoCastRequestID,videoPlayerState:a.videoPlayerState});break;case"toast_seen":break;case"toast_unmount_animation_ended":break;case"up_next_countdown_shown":break;case"up_next_countdown_complete":break;default:a.type}};d.$27=function(a){var b=a.videoCastRequestID;a=a.videoPlayerState;this.$10[b]=a;b=Date.now();this.$3.broadcastMessage("FBAPP_CAST_PROTOCOL",JSON.stringify({timestamp:b,num:this.$7+=2,type:"duration_change",data:{reference_id:0,duration:a.duration}}))};d.$26=function(a){var b=a.videoCastRequestID;a=a.videoPlayerState;this.$10[b]=a;b=Date.now();var c=this.$28(),d=this.$29(a),e=this.$30();this.$3.broadcastMessage("FBAPP_CAST_PROTOCOL",JSON.stringify(babelHelpers["extends"]({timestamp:b,num:this.$7+=2,type:"status_update",data:{reference_id:0,position:a.position,state:a.state,queueCount:e!=null?e.remainingQueueLength:0,video_id:a.videoID,duration:a.duration},receiver_info:c},d!=null&&{player_info:d})))};d.$16=function(a,c,d){b("setTV2Breakpoint")("TV2FBAppConnection:_handleUnsupportedMessage",a);throw b("err")("Message received from a Sender App has unexpected type: "+d)};d.$11=function(a,c){var d;b("setTV2Breakpoint")("TV2FBAppConnection:_handleVersionLaunch",a);a=b("TV2CommsParseUtils").parseObject(a.data,".data");var e=b("TV2CommsParseUtils").parseNonEmptyString(a.name,".data.name");if(b("objectValues")(b("ConnectedTVExperienceNames")).indexOf(e)<0){this.$21(c,"Not found");return}d=(d=b("TV2CommsParseUtils").parseOptionalNonEmptyString(a.client_cast_session,".data.client_cast_session"))!=null?d:this.$31();e=e;this.$32(e);var f=this.$33(e),g=this.$34();(g==null||d!==g.clientCastSessionKey)&&(g={clientCastSessionKey:d,experienceKey:f,experienceName:e});d=this.$35(a.payload,a.params);f=d.accessToken;e=d.appID;this.$4.overrideAccessToken(f);e!=null&&this.$4.overrideClientAppID(e);this.$20("Interrupted");this.$24("Interrupted");this.$8={experienceInfoForFBAppProtocol:g,incomingMessageNumber:c,videoCastRequestID:d.videoCastRequestID};this.$1({experienceInfoForFBAppProtocol:g,source:"from_user",type:"user_start_new_queue",videoCastRequest:d})};d.$33=function(a){var b=1;a=""+a+b;return a};d.$35=function(a,c){var d,e=b("TV2CommsParseUtils").parseVideoCastingPayloadJSONAsTV2VideoCastRequest(a,".data.payload");d=(d=b("TV2CommsParseUtils").parseOptionalObject(c,".data.params"))!=null?d:{};var f=b("TV2CommsParseUtils").parseOptionalStringishBoolean(d.chaining_enabled,".data.params.chaining_enabled");d=(d=b("TV2CommsParseUtils").parseOptionalNumber(d.position,".data.params.position"))!=null?d:0;e=babelHelpers["extends"]({},e,{chainingEnabled:f,startTimestamp:d});b("setTV2Breakpoint")("TV2FBAppConnection:_parsePayloadAndParamsAsTV2VideoCastRequest",{payloadRaw:a,paramsRaw:c,videoCastRequestWithParams:e});return e};d.$21=function(a,c){var d=Date.now(),e=this.$28();d={timestamp:d,num:this.$7+=2,response_num:a,type:"version_launch_response",data:{success:!1,reason:c},receiver_info:e};b("setTV2Breakpoint")("TV2FBAppConnection:_respondToVersionLaunchWithError",{incomingMessageNumber:a,reason:c,response:d});this.$3.sendMessage("FBAPP_CAST_PROTOCOL",this.$5,JSON.stringify(d))};d.$18=function(a,c){var d=Date.now(),e=this.$28();d={timestamp:d,num:this.$7+=2,response_num:a,type:"version_launch_response",data:{success:!0,reason:null,target:c.experienceKey},receiver_info:e};b("setTV2Breakpoint")("TV2FBAppConnection:_respondToVersionLaunchWithSuccess",{incomingMessageNumber:a,experienceInfoForFBAppProtocol:c,response:d});this.$3.sendMessage("FBAPP_CAST_PROTOCOL",this.$5,JSON.stringify(d))};d.$32=function(a){this.$4.logTVEvent("receiver_launching_experience",a)};d.$19=function(a){this.$4.logTVEvent("receiver_launched_experience",JSON.stringify({experience:a.experienceName,target:a.experienceKey}))};d.$12=function(a,c){var d=b("TV2CommsParseUtils").parseObject(a.data,".data");d=(d=b("TV2CommsParseUtils").parseOptionalNonEmptyString(d.client_cast_session,".data.client_cast_session"))!=null?d:this.$31();b("setTV2Breakpoint")("TV2FBAppConnection:_handleVersionRequest",a);this.$36(c,d)};d.$31=function(){return"server_generated_"+b("Random").uint32()};d.$36=function(a,c){var d=this.$34();d!=null&&d.clientCastSessionKey===c?c={success:!0,reason:null,currently_running_experience:d.experienceKey}:c={success:!0,reason:null};d=Date.now();d={timestamp:d,num:this.$7+=2,response_num:a,type:"version_response",data:c};b("setTV2Breakpoint")("TV2FBAppConnection:_respondToVersionRequest",d);this.$3.sendMessage("FBAPP_CAST_PROTOCOL",this.$5,JSON.stringify(d))};d.$13=function(a,c){b("setTV2Breakpoint")("TV2FBAppConnection:_handleLaunch",a)};d.$14=function(a,c){b("setTV2Breakpoint")("TV2FBAppConnection:_handleGetExperienceState",a);a=this.$2();var d={success:!0,reason:null,experience_type:"Idle",experience_specific_state:{}};a=a!=null?b("TV2AppState").TV2AppStateSelectors.getVideoExperience(a):null;if(a!=null){var e=b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getQueue(a);a=b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getCurrentQueueEntry(a);a=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoCastRequest(a);var f=this.$10[a.videoCastRequestID];f={estimated_duration:f!=null?f.duration:null,estimated_play_state:f!=null?f.state:null,estimated_position:f!=null?f.position:null,feedback_disabled:!0,playing_video_id:a.videoID,playing_video_index:b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getQueueIndex(e),queue_count:b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getQueueLength(e)};d={success:!0,reason:null,experience_type:"SimpleVideo",experience_specific_state:f}}a=Date.now();e={timestamp:a,num:this.$7+=2,response_num:c,type:"experience_state",data:d};b("setTV2Breakpoint")("TV2FBAppConnection:_respondToGetExperienceState",e);this.$3.sendMessage("FBAPP_CAST_PROTOCOL",this.$5,JSON.stringify(e))};d.$15=function(a,c){a=b("TV2CommsParseUtils").parseObject(a.data,".data");var d=b("TV2CommsParseUtils").parseNonEmptyString(a.cmd,".data.cmd"),e=d;b("setTV2Breakpoint")("TV2FBAppConnection:_handleExperienceCommand:"+d,a);switch(e){case"turn_on_feedback":this.$37(c);return;case"turn_off_feedback":this.$38(c);return;case"next_video":this.$39(c,a);return;case"play_video":this.$40(c);return;case"pause_video":this.$41(c);return;case"seek_video":this.$42(c,a);return;case"skip_video":this.$43(c);return;case"stop_video":this.$44(c);return;case"stop_experience":this.$45(c);return;default:e;this.$46(c,d);return}};d.$47=function(a,c){var d=Date.now();d={timestamp:d,num:this.$7+=2,response_num:a,type:"command_result",data:c};b("setTV2Breakpoint")("TV2FBAppConnection:_respondToExperienceCommand",d);this.$3.sendMessage("FBAPP_CAST_PROTOCOL",this.$5,JSON.stringify(d))};d.$25=function(a,b){this.$47(a,{success:!1,reason:b,reference_id:null})};d.$23=function(a,b){this.$47(a,{success:!0,reason:null,reference_id:b})};d.$46=function(a,c){b("setTV2Breakpoint")("TV2FBAppConnection:_handleUnsupportedExperienceCommand",{incomingMessageNumber:a,cmdNameRaw:c}),this.$4.logTVError({error:b("err")("unknown command "+c),errorLocation:"TV2CommsFBAppConnection:_handleUnsupportedExperienceCommand"}),this.$25(a,"Unknown command")};d.$37=function(a){b("setTV2Breakpoint")("TV2FBAppConnection:_handleTurnOnFeedbackCommand",{incomingMessageNumber:a}),this.$23(a,null)};d.$38=function(a){b("setTV2Breakpoint")("TV2FBAppConnection:_handleTurnOffFeedbackCommand",{incomingMessageNumber:a}),this.$23(a,null)};d.$39=function(a,c){var d,e;d=(d=b("TV2CommsParseUtils").parseOptionalNonEmptyString(c.payload,".data.payload"))!=null?d:"";e=(e=b("TV2CommsParseUtils").parseOptionalObject(c.params,".data.params"))!=null?e:{};var f=b("TV2CommsParseUtils").parseOptionalStringishBoolean(e.add_to_queue,".data.params.add_to_queue"),g=b("TV2CommsParseUtils").parseOptionalStringishBoolean(e.auto_advance,".data.params.auto_advance");b("setTV2Breakpoint")("TV2FBAppConnection:_handleNextVideoCommand",{incomingMessageNumber:a,data:c,cmdPayloadJSON:d,cmdParams:e});if(!d){this.$4.logTVError({error:b("err")("Next video command has payload missing"),errorLocation:"TV2CommsFBAppConnection:_handleNextVideoCommand"});this.$25(a,"Payload missing");return}c=this.$34();if(c==null){var h=this.$31(),i="ChannelVideo",j=this.$33(i);c={clientCastSessionKey:h,experienceKey:j,experienceName:i}}h=this.$35(d,e);if(!f){j=h.accessToken;this.$4.overrideAccessToken(j)}this.$20("Interrupted");this.$24("Interrupted");this.$9={incomingMessageNumber:a,videoCastRequestID:h.videoCastRequestID};f?this.$1({experienceInfoForFBAppProtocol:c,source:"from_user",type:"user_add_video_to_queue",videoCastRequest:h}):!g?this.$1({experienceInfoForFBAppProtocol:c,source:"from_user",type:"user_start_new_queue",videoCastRequest:h}):this.$1({experienceInfoForFBAppProtocol:c,source:"from_user",type:"user_play_video_now",videoCastRequest:h})};d.$34=function(){var a=this.$2();return a==null?null:b("TV2AppState").TV2AppStateSelectors.getExperienceInfoForFBAppProtocol(a)};d.$48=function(){var a=this.$2();if(a==null)return null;a=b("TV2AppState").TV2AppStateSelectors.getVideoExperience(a);a=a!=null?b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getCurrentQueueEntry(a):null;a=a!=null?b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoCastRequest(a):null;return a!=null?a.videoCastRequestID:null};d.$30=function(){var a=this.$2();if(a==null)return null;a=b("TV2AppState").TV2AppStateSelectors.getVideoExperience(a);if(a==null)return null;a=b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getQueue(a);var c=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getCurrentQueueEntry(a),d=c!=null?b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoCastRequest(c):null,e=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getQueueIndex(a);a=b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.getQueueLength(a);var f=a-e-1;return{currentQueueEntry:c,currentQueueIndex:e,currentVideoCastRequest:d,queueLength:a,remainingQueueLength:f}};d.$49=function(){var a=this.$2();a=a!=null?b("TV2AppState").TV2AppStateSelectors.getVideoExperience(a):null;if(a!=null){a=b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getQueue(a);return b("TV2VideoExperienceQueueState").TV2VideoExperienceQueueStateSelectors.hasNextRelatedVideoEntry(a)}return!1};d.$40=function(a){var c=this.$48();b("setTV2Breakpoint")("TV2FBAppConnection:_handlePlayVideoCommand",{incomingMessageNumber:a,currentVideoCastRequestID:c});if(c!=null){this.$1({source:"from_user",type:"user_unpause_current_video",videoCastRequestID:c});this.$23(a,0);return}else if(this.$49()){this.$1({source:"from_user",type:"user_select_next_video"});this.$23(a,0);return}else this.$4.logTVError({error:b("err")("requested to play - queue empty"),errorLocation:"TV2CommsFBAppConnection:_handlePlayVideoCommand"}),this.$25(a,"queue empty")};d.$41=function(a){var c=this.$48();b("setTV2Breakpoint")("TV2FBAppConnection:_handlePauseVideoCommand",{incomingMessageNumber:a,currentVideoCastRequestID:c});if(c!=null){this.$1({source:"from_user",type:"user_pause_current_video",videoCastRequestID:c});this.$23(a,0);return}this.$23(a,void 0)};d.$42=function(a,c){c=b("TV2CommsParseUtils").parseObject(c.params,".data.params");c=b("TV2CommsParseUtils").parseNumber(c.position,".data.params.position");var d=this.$48();b("setTV2Breakpoint")("TV2FBAppConnection:_handleSeekVideoCommand",{incomingMessageNumber:a,currentVideoCastRequestID:d});d!=null&&(this.$1({seekTargetPosition:c,source:"from_user",type:"user_seek_current_video",videoCastRequestID:d}),this.$23(a,0));this.$23(a,void 0)};d.$43=function(a){var c=this.$48();b("setTV2Breakpoint")("TV2FBAppConnection:_handleSkipVideoCommand",{incomingMessageNumber:a,currentVideoCastRequestID:c});this.$1({source:"from_user",type:"user_select_next_video"});this.$23(a,0)};d.$44=function(a){this.$45(a)};d.$45=function(a){var c=this.$48();b("setTV2Breakpoint")("TV2FBAppConnection:_handleStopExperienceCommand",{incomingMessageNumber:a,currentVideoCastRequestID:c});this.$1({source:"from_user",type:"user_stop_current_experience"});this.$23(a,0)};d.$28=function(){return{cast_receiver_logger_session_id:b("TV2LoggerSessionID"),is_google_cast_bg:this.$6,os_version:this.$3.getDeviceInfo().osVersion,third_party_app_id:this.$3.getDeviceInfo().sdkAppID,web_client_revision:String(b("SiteData").client_revision)}};d.$29=function(a){return a==null?null:{player_instance_key:a.playerInstanceKey,player_version:a.playerVersion}};return c}();e.exports=c}),null);
__d("TV2Comms",["FBLogger","JSScheduler","TV2CommsParseUtils","TV2FBAppConnection","getErrorSafe","getTV2DebugLog","getTV2DebugSkip","setTV2Breakpoint","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("getTV2DebugLog")("[TV2Comms][debugLog] ");a=function(){function a(a){var c=this,d=a.connector;a=a.logger;this.$1=null;this.$2=null;this.$3=[];this.$5=[];this.$6=null;this.$7=new Map();this.$8=new Map();this.$10="not_started";this.$15=function(a){b("setTV2Breakpoint")("TV2Comms:_enqueueAppCommand:"+a.type,a);if(c.$12()){g("_enqueueAppCommand skip (shutting down):",a);b("FBLogger")("comet_tv_casting").warn("Attempted to enqueue app command during shutdown: %s",a.type);return}g("_enqueueAppCommand:",a);c.$3.push(a);c.$14()};this.$16=function(){var a=c.$1;if(a==null){g("_getAppCurrentState skip");return null}a=a.getAppCurrentState();return a};this.$4=d;this.$9=a;d.setCommsInterface(this)}var c=a.prototype;c.startComms=function(){g("startComms",this.$10);switch(this.$10){case"not_started":this.$10="running";this.$4.start();break;case"running":break;case"shutdown_from_comms_waiting_app":break;case"shutdown_from_comms":break;case"shutdown_from_app":break;default:this.$10;break}};c.terminateApp=function(){g("terminateApp",this.$10);switch(this.$10){case"not_started":this.$11("shutdown_from_app");this.$4.terminateApp();break;case"running":this.$11("shutdown_from_app");this.$4.terminateApp();break;case"shutdown_from_comms_waiting_app":this.$10="shutdown_from_comms";this.$4.terminateApp();break;case"shutdown_from_comms":break;case"shutdown_from_app":break;default:this.$10;break}};c.enqueueCommsConnectorEvent=function(a){if(this.$12()){g("enqueueCommsConnectorEvent skip (shutting down):",a);b("FBLogger")("comet_tv_casting").warn("Attempted to enqueue connector event during shutdown: %s",a.type);return}g("enqueueCommsConnectorEvent:",a);this.$5.push(a);this.$13()};c.attachApp=function(a){var c=this;if(this.$12()){g("attachApp after shutdown");a.handleAppCommand({source:"from_app",type:"shutdown_from_comms"});return function(){}}if(this.$1!=null){g("attachApp when an appController exists");throw b("unrecoverableViolation")("Unexpected attachApp: an appController already exists","comet_tv_casting")}g("attachApp");this.$1=a;this.$3.length>0&&this.$14();return function(){g("detachApp"),c.$1=null,c.$3.length=0}};c.$12=function(){return this.$10==="shutdown_from_comms_waiting_app"||this.$10==="shutdown_from_comms"||this.$10==="shutdown_from_app"};c.notifySendersAboutAppEvent=function(a){b("getTV2DebugSkip")("TV2Comms:notifySendersAboutAppEvent:"+a.type)||b("setTV2Breakpoint")("TV2Comms:notifySendersAboutAppEvent:"+a.type,a),this.$8.forEach(function(b){b.notifySendersAboutAppEvent(a)})};c.$14=function(){var a=this;if(this.$12()){g("_scheduleDequeueAppCommand skip (shutting down)");b("FBLogger")("comet_tv_casting").warn("Attempted to schedule dequeue app command during shutdown: %s",this.$3.map(function(a){return a.type}).join(", ")||"(empty)");return}g("_scheduleDequeueAppCommand");this.$2||(this.$2=b("JSScheduler").scheduleNormalPriCallback(function(){a.$2=null,a.$17()}))};c.$17=function(){if(this.$12()){g("_dequeueAppCommand skip (shutting down)");b("FBLogger")("comet_tv_casting").warn("Attempted to dequeue app command during shutdown: %s",this.$3.map(function(a){return a.type}).join(", ")||"(empty)");return}var a=this.$1;if(a==null)return;var c=this.$3.shift();if(c==null){g("_dequeueAppCommand skip (empty queue)");b("FBLogger")("comet_tv_casting").warn("Attempted to dequeue app command from an empty queue");return}g("_dequeueAppCommand:",c);switch(c.type){case"user_pause_current_video":case"user_unpause_current_video":case"user_seek_current_video":a.handlePlaybackCommand(c);return;default:c,a.handleAppCommand(c)}this.$3.length>0&&this.$14()};c.debugExecuteCommand=function(a){this.$15(a)};c.debugGetAppCurrentState=function(){return this.$16()};c.$11=function(a){this.$5.length>0&&b("FBLogger")("comet_tv_casting").warn("Connector events dropped during shutdown: %s",this.$5.map(function(a){return a.type}).join(", "));this.$3.length>0&&b("FBLogger")("comet_tv_casting").warn("App commands dropped during shutdown: %s",this.$3.map(function(a){return a.type}).join(", "));this.$10=a;a=this.$6;a&&(this.$6=null,b("JSScheduler").cancelCallback(a));a=this.$2;a&&(this.$2=null,b("JSScheduler").cancelCallback(a));this.$8.clear();this.$7.clear();this.$5.length=0;this.$3.length=0};c.$13=function(){var a=this;if(this.$12()){g("_scheduleDequeueConnectorEvent skip (shutting down)");b("FBLogger")("comet_tv_casting").warn("Attempted to schedule dequeue connector event during shutdown: %s",this.$5.map(function(a){return a.type}).join(", ")||"(empty)");return}g("_scheduleDequeueConnectorEvent");this.$6||(this.$6=b("JSScheduler").scheduleNormalPriCallback(function(){a.$6=null,a.$18()}))};c.$18=function(){if(this.$12()){g("_dequeueConnectorEvent skip (shutting down)");b("FBLogger")("comet_tv_casting").warn("Attempted to dequeue connector event during shutdown: %s",this.$5.map(function(a){return a.type}).join(", ")||"(empty)");return}var a=this.$5.shift();if(a==null){g("_dequeueConnectorEvent skip (empty queue)");b("FBLogger")("comet_tv_casting").warn("Attempted to dequeue connector event from an empty queue");return}g("_dequeueConnectorEvent:",a);this.$19(a);this.$5.length>0&&this.$13()};c.$20=function(a){if(a.type==="message_received"){a=a.messageDataRaw;a=b("TV2CommsParseUtils").parseJSONString(a,b("TV2CommsParseUtils").parseObject,".");var c=b("TV2CommsParseUtils").parseNonEmptyString(a.type,".type");if(c==="experience_command"||c==="version_launch"){var d;a=b("TV2CommsParseUtils").parseObject(a.data,".data");var e=b("TV2CommsParseUtils").parseOptionalNonEmptyString(a.cmd,".data.cmd");d=(d=b("TV2CommsParseUtils").parseOptionalObject(a.params,".data.params"))!=null?d:{};d=b("TV2CommsParseUtils").parseOptionalStringishBoolean(d.add_to_queue,".data.params.add_to_queue");c=c==="version_launch"||e==="next_video"&&!d;if(c){d=(e=b("TV2CommsParseUtils").parseOptionalNonEmptyString(a.payload,".data.payload"))!=null?e:"";c=b("TV2CommsParseUtils").parseVideoCastingPayloadJSONAsTV2VideoCastRequest(d,".data.payload");a=c.accessToken;this.$9.overrideAccessToken(a)}}}};c.$19=function(a){if(this.$12()){g("_handleConnectorEvent skip (shutting down):",a);b("FBLogger")("comet_tv_casting").warn("Attempted to handle connector event during shutdown: %s",a.type);return}g("_handleConnectorEvent:",a);try{this.$20(a);this.$9.logCommsConnectorEvent(a);switch(a.type){case"ready":break;case"sender_connected":this.$7.set(a.senderID,a.userAgent);break;case"sender_disconnected":this.$8["delete"](a.senderID);this.$7["delete"](a.senderID);break;case"message_sent":break;case"message_received":switch(a.protocol){case"FBAPP_CAST_PROTOCOL":var c=this.$8.get(a.senderID);c==null&&(c=new(b("TV2FBAppConnection"))(a.senderID,this.$15,this.$16,this.$4,this.$9),this.$8.set(a.senderID,c));c.receiveMessage(a.messageDataRaw);break;case"GOOGLE_CAST_MEDIA_PROTOCOL":break;default:a.protocol}break;case"shutdown":this.$11("shutdown_from_comms_waiting_app");c=this.$1;c!=null&&c.handleAppCommand({source:"from_app",type:"shutdown_from_comms"});break;default:a.type}}catch(a){g("_handleConnectorEvent catch:",a),this.$9.logTVError({error:b("getErrorSafe")(a),errorLocation:"TV2Comms:_handleConnectorEvent:catch"})}};return a}();e.exports=a}),null);
__d("TV2MessageTypes",[],(function(a,b,c,d,e,f){"use strict";a="urn:x-cast:com.facebook.fb";f.FBAPP_CAST_PROTOCOL_NAMESPACE=a;b="urn:x-cast:com.google.cast.media";f.GOOGLE_CAST_MEDIA_PROTOCOL_NAMESPACE=b}),null);
__d("TV2CommsChromecastV2Connector",["ChromecastReceiverSDKV2Wrapper","TV2MessageTypes","getTV2DebugBreakpointsEnabled","getTV2DebugLog","getTV2DebugShutdownEnabled","getTV2DebugSkip","getTV2DebuggingEnabled","getTV2DebuggingOnDesktop","setTV2Breakpoint","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("getTV2DebugLog")("[TV2CommsChromecastV2Connector][debugLog] "),h={FBAPP_CAST_PROTOCOL:b("TV2MessageTypes").FBAPP_CAST_PROTOCOL_NAMESPACE,GOOGLE_CAST_MEDIA_PROTOCOL:b("TV2MessageTypes").GOOGLE_CAST_MEDIA_PROTOCOL_NAMESPACE};function i(){try{var a=window.cast.receiver.VERSION;a=typeof a==="string"?a:null;return a}catch(a){return null}}function j(){try{var a=/CrKey\/([\d\.]+)\b/.exec(window.navigator.userAgent);a=a!=null?(a=a[1])!=null?a:null:null;return a}catch(a){return null}}function k(){try{var a=b("ChromecastReceiverSDKV2Wrapper").CastReceiverManager.getInstance();a=a.getApplicationData();return a!=null?a.id:null}catch(a){return null}}a=function(){function a(){var a=this;this.$1=null;this.$2=null;this.$3=null;this.$6=function(b){var c=a.$10("onReady");c.enqueueCommsConnectorEvent({applicationData:b.data,createdTimeMs:Date.now(),type:"ready"})};this.$7=function(b){b=a.$10("onShutdown");b.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),type:"shutdown"})};this.$4=function(b){var c=a.$10("onSenderConnected");c.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),senderID:b.senderId,type:"sender_connected",userAgent:b.userAgent})};this.$5=function(b){var c=a.$10("onSenderDisconnected");c.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),disconnectReason:b.reason,senderID:b.senderId,type:"sender_disconnected",userAgent:b.userAgent})}}var c=a.prototype;c.getDeviceInfo=function(){return{manufacturer:"Google",modelName:"Chromecast",osVersion:j(),sdkAppID:k(),sdkVersion:i()}};c.setCommsInterface=function(a){this.$1=a};c.start=function(){var a=b("ChromecastReceiverSDKV2Wrapper").CastReceiverManager.getInstance();a.onSenderConnected=this.$4;a.onSenderDisconnected=this.$5;a.onReady=this.$6;a.onShutdown=this.$7;this.$3={FBAPP_CAST_PROTOCOL:this.$8(a,"FBAPP_CAST_PROTOCOL"),GOOGLE_CAST_MEDIA_PROTOCOL:this.$8(a,"GOOGLE_CAST_MEDIA_PROTOCOL")};var c=new(b("ChromecastReceiverSDKV2Wrapper").CastReceiverManager.Config)();c.maxInactivity=b("getTV2DebuggingEnabled")()||b("getTV2DebugBreakpointsEnabled")()?6e3:void 0;b("setTV2Breakpoint")("Before SDK start");a.start(c);this.$2=a;b("setTV2Breakpoint")("After SDK start")};c.terminateApp=function(){b("setTV2Breakpoint")("Before SDK terminate");if(b("getTV2DebuggingOnDesktop")()&&!b("getTV2DebugShutdownEnabled")())return;var a=this.$2;a!=null&&a.stop();window.close()};c.sendMessage=function(a,c,d){g("sendMessage to "+a+":",c,d);var e=this.$9(a);b("setTV2Breakpoint")("TV2CommsChromecastV2Connector:sendMessage:"+a,c,d);e.send(c,d);e=this.$10("sendMessage");e.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),messageDataRaw:d,protocol:a,senderID:c,type:"message_sent"})};c.broadcastMessage=function(a,c){var d=b("getTV2DebugSkip")("broadcastMessage to "+a+":"+String(c));d||g("broadcastMessage to "+a+":",c);var e=this.$9(a);d||b("setTV2Breakpoint")("TV2CommsChromecastV2Connector:broadcastMessage:"+a,c);e.broadcast(c)};c.$10=function(a){var c=this.$1;if(!c)throw b("unrecoverableViolation")("Missing comms interface ("+a+")","comet_tv_casting");return c};c.$8=function(a,b){var c=this;a=a.getCastMessageBus(h[b]);a.onMessage=function(a){return c.$11(b,a)};return a};c.$9=function(a){var c=this.$3;if(c==null)throw b("unrecoverableViolation")("Cannot get message bus before comms connector start","comet_tv_casting");c=c[a];return c};c.$11=function(a,b){var c=this.$10("onMessage");c.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),messageDataRaw:b.data,protocol:a,senderID:b.senderId,type:"message_received"})};return a}();e.exports=a}),null);
__d("TV2CommsDebugConnector",["getTV2DebugLog","setTV2Breakpoint","unrecoverableViolation","uuid"],(function(a,b,c,d,e,f){"use strict";var g=b("getTV2DebugLog")("[TV2CommsDebugConnector][debugLog] ");a=function(){function a(){this.$1=null,this.$2=b("uuid")()+":tv2-comms-debug-sender",this.$3="TV2CommsDebugConnector-UserAgent",this.$4="FACEB000",this.$5=!1}var c=a.prototype;c.getDeviceInfo=function(){return{manufacturer:"Facebook",modelName:"TV2CommsDebugConnector",osVersion:null,sdkAppID:this.$5?this.$4:null,sdkVersion:null}};c.setCommsInterface=function(a){this.$1=a};c.start=function(){g("start"),b("setTV2Breakpoint")("After SDK start")};c.terminateApp=function(){g("terminateApp")};c.sendMessage=function(a,b,c){g("sendMessage to "+a+":",b,c);var d=this.$6("sendMessage");d.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),messageDataRaw:c,protocol:a,senderID:b,type:"message_sent"})};c.broadcastMessage=function(a,b){g("broadcastMessage to "+a+":",b)};c.$6=function(a){var c=this.$1;if(!c)throw b("unrecoverableViolation")("Missing comms interface ("+a+")","comet_tv_casting");return c};c.debugReady=function(a){this.$5=!0;var b=this.$6("onReady");b.enqueueCommsConnectorEvent({applicationData:this.$7(a),createdTimeMs:Date.now(),type:"ready"})};c.debugShutdown=function(){var a=this.$6("onShutdown");a.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),type:"shutdown"})};c.debugSenderConnected=function(a){var b=this.$6("onSenderConnected");b.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),senderID:this.$8(a),type:"sender_connected",userAgent:this.$9(a)})};c.debugSenderDisconnected=function(a){var b=this.$6("onSenderDisconnected");b.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),disconnectReason:this.$10(a),senderID:this.$8(a),type:"sender_disconnected",userAgent:this.$9(a)})};c.debugMessageReceived=function(a,b){var c=this.$6("onMessage");c.enqueueCommsConnectorEvent({createdTimeMs:Date.now(),messageDataRaw:this.$7(b),protocol:a,senderID:this.$8(b),type:"message_received"})};c.$8=function(a){a=typeof a==="object"&&a!=null&&typeof a.senderId==="string"?a.senderId:this.$2;return a};c.$9=function(a){a=typeof a==="object"&&a!=null&&typeof a.userAgent==="string"?a.userAgent:this.$3;return a};c.$7=function(a){a=typeof a==="object"&&a!=null&&typeof a.data==="string"?a.data:"";return a};c.$10=function(a){a=typeof a==="object"&&a!=null?a.reason==="REQUESTED_BY_SENDER"?"REQUESTED_BY_SENDER":a.reason==="ERROR"?"ERROR":"UNKNOWN":"UNKNOWN";return a};return a}();e.exports=a}),null);
__d("TV2CommsLoggerErrorGuard",["ErrorPubSub","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a){this.$1=a}var c=a.prototype;c.shutdownLoggerAsync=function(){return this.$1.shutdownLoggerAsync()};c.logCommsConnectorEvent=function(a){this.$2(function(b){return b.logCommsConnectorEvent(a)})};c.logTVEvent=function(a,b){this.$2(function(c){return c.logTVEvent(a,b)})};c.logTVError=function(a){this.$2(function(b){return b.logTVError(a)})};c.overrideAccessToken=function(a){this.$1.overrideAccessToken(a)};c.overrideClientAppID=function(a){this.$1.overrideClientAppID(a)};c.setTvPlayerInstanceKey=function(a){this.$1.setTvPlayerInstanceKey(a)};c.setTvPlayerVersion=function(a){this.$1.setTvPlayerVersion(a)};c.$2=function(a){try{a(this.$1)}catch(a){(g||(g=b("ErrorPubSub"))).reportError(b("getErrorSafe")(a))}};return a}();e.exports=a}),null);
__d("TV2LocalStorage",["CacheStorage"],(function(a,b,c,d,e,f){"use strict";a=new(b("CacheStorage"))("localstorage","_ctv_");c=a;e.exports=c}),null);
__d("TV2LoggerDeviceUniqueID",["TV2LocalStorage","uuid"],(function(a,b,c,d,e,f){"use strict";function a(){var a=b("TV2LocalStorage").get("deviceUniqueIDFallback");if(typeof a==="string")return a;else{a="fallback__"+b("uuid")();b("TV2LocalStorage").set("deviceUniqueIDFallback",a);return a}}c=a();d=c;e.exports=d}),null);
__d("TV2ODS",["ODS","Random"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){c===void 0&&(c=1),b("Random").coinflip(c)&&b("ODS").bumpEntityKey(3327,"tv_casting_receiver_v2",a,c)};f.bumpEntityKey=a}),null);
__d("TVClientConnection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.clientID=a,this.info=b,this.doneHandshake=!1,this.version="",this.clientCastSession=""}var b=a.prototype;b.established=function(){return this.doneHandshake};b.setEstablished=function(a){this.doneHandshake=!0;this.version=a;return this};b.setClientCastSession=function(a){this.clientCastSession=a;return this};b.getClientCastSession=function(){return this.clientCastSession};b.getClientID=function(){return this.clientID};b.getVersion=function(){return this.version};return a}();e.exports=a}),null);
__d("TVCommunicationsManager",["invariant","EventEmitter","TVClientConnection","TVConfigs","TVLogger","TVMessageParser","promiseDone","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=34,i="experience_command",j=new Map([["PLAY","play_video"],["PAUSE","pause_video"],["SEEK","seek_video"]]);a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.$TVCommunicationsManager1=1;c.$TVCommunicationsManager2=new Set();c.$TVCommunicationsManager3=new Map();c.$TVCommunicationsManager4=[];b=b.getCommunicationModules();for(var d=0;d<b.length;++d){var e=b[d];c.$TVCommunicationsManager4[d]=new e(c.$TVCommunicationsManager7.bind(babelHelpers.assertThisInitialized(c)),c.$TVCommunicationsManager8.bind(babelHelpers.assertThisInitialized(c)),c.$TVCommunicationsManager9.bind(babelHelpers.assertThisInitialized(c)),c.$TVCommunicationsManager10.bind(babelHelpers.assertThisInitialized(c)),c.$TVCommunicationsManager11.bind(babelHelpers.assertThisInitialized(c)))}c.$TVCommunicationsManager5=new Map();c.$TVCommunicationsManager6=new Map();return c}var d=c.prototype;d.init=function(){this.$TVCommunicationsManager4.forEach(function(a){a.init()})};d.getCommunicationModules=function(){return this.$TVCommunicationsManager4};d.addConnectionListener=function(a){this.$TVCommunicationsManager2.add(a)};d.removeConnectionListener=function(a){this.$TVCommunicationsManager2["delete"](a)};d.setMessageHandler=function(a,b){this.$TVCommunicationsManager3.set(a,b)};d.removeMessageHandler=function(a){this.$TVCommunicationsManager3["delete"](a)};d.notifyError=function(a){this.$TVCommunicationsManager7("notifyError",a)};d.connectionEstablished=function(a,c,d){var e=this.$TVCommunicationsManager12(a);b("TVLogger").logEvent("receiver_connection_established",JSON.stringify({from:a,version:c}));e.setEstablished(c).setClientCastSession(d);return Array.from(this.$TVCommunicationsManager2).reduce(function(a,b){return Object.assign(a,b(e))},{})};d.sendMessage=function(a){var c=a.getDestination();c||g(0,1164);this.$TVCommunicationsManager12(c);a.setMessageNumber(this.$TVCommunicationsManager1+=2);b("TVLogger").traceEvent({sendto:c,msg:a.serialize()});this.$TVCommunicationsManager4.forEach(function(b){b.sendMessage(c,a)});this.$TVCommunicationsManager13(a.getMessageType())&&b("TVLogger").logEvent("receiver_sent_message",JSON.stringify({to:c,msg:a}))};d.broadcastMessage=function(a){a.setMessageNumber(this.$TVCommunicationsManager1+=2),b("TVLogger").traceEvent({sendto:"broadcast",msg:a.serialize()}),this.$TVCommunicationsManager4.forEach(function(b){b.broadcastMessage(a)})};d.getConnectionsCount=function(){return this.$TVCommunicationsManager5.size};d.$TVCommunicationsManager13=function(a){return b("TVConfigs").logReceiverResponses&&!c.LOG_RESPONSE_MESSAGE_TYPE_BLACKLIST.includes(a)};d.$TVCommunicationsManager12=function(a){var c=this.$TVCommunicationsManager5.get(a);c||(b("TVLogger").traceEvent("Connection not found from "+a),c=new(b("TVClientConnection"))(a,{}),this.$TVCommunicationsManager5.set(a,c));return c};d.$TVCommunicationsManager14=function(a,b){if(a.needsEstablishedConnection()&&!b.established()){var c=this.$TVCommunicationsManager15(b.getClientID()),d=this.$TVCommunicationsManager6.get(c);if(d!==void 0){b.setEstablished(d);return!0}this.$TVCommunicationsManager7("Connection not established",{msg:a,from:b.getClientID(),trimmed_from:c,known_clients:Array.from(this.$TVCommunicationsManager6.keys()),num_connected_clients:this.getConnectionsCount(),connected_clients:Array.from(this.$TVCommunicationsManager5.keys()).slice(0,100)});return!1}return!0};d.$TVCommunicationsManager16=function(a,b){if(a.isMediaNameSpaceMessage(b)){a=j.get(b.type);if(!a)return!1;b.target=window.currentTVExperienceTarget;b.data={};b.data.cmd=a;b.data.params={};b.currentTime&&(b.data.params.position=b.currentTime);b.type=i}return!0};d.$TVCommunicationsManager8=function(a,c,d){var e=this;b("promiseDone")(this.$TVCommunicationsManager17(a,c,d)["catch"](function(a){e.$TVCommunicationsManager7("Error handling message",a)}))};d.$TVCommunicationsManager17=function(a,c,d){var e,f,g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:b("TVLogger").traceEvent({msg:d,from:c});e=this.$TVCommunicationsManager16(a,d);f=this.$TVCommunicationsManager12(c);n.next=5;return b("regeneratorRuntime").awrap(b("TVMessageParser").parse(d));case 5:g=n.sent;g.setSender(c).setConnectionRequired(a.isMediaNameSpaceMessage(d)).setConnection(f);if(!(!e||!this.$TVCommunicationsManager14(g,f))){n.next=9;break}return n.abrupt("return");case 9:b("TVLogger").logEvent("receiver_received_message",JSON.stringify({from:c,data:d}));h=this.$TVCommunicationsManager3.get(g.getTarget());if(!h){n.next=20;break}n.next=14;return b("regeneratorRuntime").awrap(g.operate(h));case 14:i=n.sent;if(!i){n.next=18;break}n.next=18;return b("regeneratorRuntime").awrap(g.handleResult(this,i));case 18:n.next=25;break;case 20:l=((k=d)!=null?(k=k.data)!=null?k.cmd:k:k)||null;if(!(l==="stop_experience")){n.next=23;break}return n.abrupt("return");case 23:m=((j=d)!=null?(j=j.data)!=null?j.type:j:j)||null,this.$TVCommunicationsManager7("No one is listening for target",{target:g.getTarget(),command:l,type:m,namespace:d.namespace,handlers:Array.from(this.$TVCommunicationsManager3.keys())});case 25:case"end":return n.stop()}},null,this)};d.$TVCommunicationsManager9=function(a,d){b("TVLogger").logEvent("receiver_device_connected",JSON.stringify({from:a,connection_info:d}));this.$TVCommunicationsManager5.has(a)&&this.$TVCommunicationsManager18("Multiple connections",d);b("TVLogger").traceEvent({comm:"new connection",from:a,connection_info:d});d=new(b("TVClientConnection"))(a,d);this.$TVCommunicationsManager5.set(a,d);this.emit(c.CONNECTED,d)};d.$TVCommunicationsManager10=function(a,d){b("TVLogger").logEvent("receiver_device_disconnected",JSON.stringify({from:a,connection_info:d}));var e=this.$TVCommunicationsManager5.get(a);!e?this.$TVCommunicationsManager18("Uknown disconnection",d):(this.$TVCommunicationsManager6.set(this.$TVCommunicationsManager15(a),e.getVersion()),this.$TVCommunicationsManager5["delete"](a));b("TVLogger").traceEvent({comm:"lost connection",from:a,connection_info:d});this.emit(c.DISCONNECTED,a)};d.$TVCommunicationsManager11=function(){this.emit(c.TEARDOWN)};d.$TVCommunicationsManager7=function(a,c){var d;if(c!==null&&typeof c!=="string")try{d=JSON.stringify(c)}catch(a){d="Unable to JSON.stringify details: "+a.message}else d=c;b("TVLogger").logError(a,d)};d.$TVCommunicationsManager18=function(a,c){var d;if(c!==null&&typeof c!=="string")try{d=JSON.stringify(c)}catch(a){d="Unable to JSON.stringify details: "+a.message}else d=c;b("TVLogger").logWarn(a,d)};d.$TVCommunicationsManager15=function(a){if(a.length>h)return a.substr(0,h);else return a};return c}(b("EventEmitter"));e.exports=a;a.CONNECTED="connected";a.DISCONNECTED="disconnected";a.TEARDOWN="teardown";a.LOG_RESPONSE_MESSAGE_TYPE_BLACKLIST=["status_update","duration_change"]}),null);
__d("ConnectedTvLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1843753");c=b("FalcoLoggerInternal").create("connected_tv_logging",a);e.exports=c}),null);
__d("ConnectedTvLoggingFalcoEventBuilder",["ConnectedTvLoggingFalcoEvent"],(function(a,b,c,d,e,f){"use strict";var g=100*1024,h=30,i={};a=function(){function a(a){this.$1=babelHelpers["extends"]({},a)}var c=a.prototype;c.currentTally=function(){return i};c.$2=function(){var a=this.$1.event;if(a!=null){i[a]==null&&(i[a]={perf_time_ms:0,total:0,perf_time_samples_ms:[]});if(this.perfTimeMS!=null){var b=parseInt(this.perfTimeMS,10);i[a].perf_time_ms+=b;i[a].total+=1;i[a].perf_time_samples_ms.push(b);i[a].perf_time_samples_ms.length>=h&&i[a].perf_time_samples_ms.shift()}}};c.log=function(a){var c=this;this.$2();b("ConnectedTvLoggingFalcoEvent").log(function(){return c.$1})};c.logVital=function(a){var c=this;this.$2();b("ConnectedTvLoggingFalcoEvent").logImmediately(function(){return c.$1})};c.logImmediately=function(a){var c=this;this.$2();b("ConnectedTvLoggingFalcoEvent").logImmediately(function(){return c.$1})};c.setPerfTimeMs=function(a){this.$1.perf_time_ms=a;this.perfTimeMS=a;return this};c.setEventDescription=function(a){this.$1.event_description=a;return this};c.setErrorMessage=function(a){a!=null&&a.length>g?this.$1.error_message=a.substring(0,g):this.$1.error_message=a;return this};c.setErrorDetails=function(a){a!=null&&a.length>g?this.$1.error_details=a.substring(0,g):this.$1.error_details=a;return this};c.setVideoIDOverride=function(a){this.$1.video_id_override=a;return this};c.setGraphqlQueryName=function(a){this.$1.graphql_query_name=a;return this};c.setExternalLogID=function(a){this.$1.external_log_id=a;return this};c.setExternalLogType=function(a){this.$1.external_log_type=a;return this};c.setPositionInChannel=function(a){this.$1.position_in_channel=a;return this};c.setRetryCount=function(a){this.$1.retry_count=a;return this};c.setSessionFailureCode=function(a){this.$1.session_failure_code=a;return this};c.setSessionFailureDescription=function(a){this.$1.session_failure_description=a;return this};c.setExperienceView=function(a){this.$1.experience_view=a;return this};c.setActionTarget=function(a){this.$1.action_target=a;return this};c.setTabType=function(a){this.$1.tab_type=a;return this};c.setStoryID=function(a){this.$1.story_id=a;return this};c.setViewportDuration=function(a){this.$1.viewport_duration=a;return this};c.setVideoChannelID=function(a){this.$1.video_channel_id=a;return this};c.setExperience=function(a){this.$1.experience=a;return this};c.setCastClientAppID=function(a){this.$1.cast_client_app_id=a;return this};c.setPlaybackIsLiveStreaming=function(a){this.$1.playback_is_live_streaming=a;return this};c.setPlayerVersion=function(a){this.$1.player_version=a;return this};return a}();e.exports=a}),null);
__d("TVError",["ErrorNormalizeUtils","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){var d;d=a.call(this,b)||this;d.message=b;d.details=c;return d}c.parseError=function(a){var c;try{c=JSON.stringify(a)}catch(a){c="JSON.stringify(error) failed: "+a.message}var d="Unable to parse error in _logUnhandledError";c=c||"No error details in _logUnhandledError";if(a){if(typeof a.messageFormat==="string"&&a.messageFormat){var e=typeof a.isNormalizedError==="boolean"&&a.isNormalizedError===!0?a:b("ErrorNormalizeUtils").normalizeError(b("getErrorSafe")(a));d=e.message}else typeof a.message==="string"&&a.message?d=a.message:typeof a.name==="string"&&a.name?d=a.name:typeof a.type==="string"&&a.type?d=a.type:typeof a==="string"&&(d=a);typeof a.details==="string"&&a.details&&(c=a.details)}if(!c||c==='""')try{throw new Error("Call Stack")}catch(a){try{c=JSON.stringify(a)}catch(a){c="JSON.stringify(detailsError) failed: "+a.message}}return{message:d,details:c}};return c}(babelHelpers.wrapNativeSuper(Error));e.exports=a}),null);
__d("TVLoggedOutExperimentsCached",["invariant","CacheStorage","TVExperiments"],(function(a,b,c,d,e,f,g){a=function(){function a(){this.$1=new(b("CacheStorage"))("localstorage","_ctv_"),this.$2="tv_experiments"}var c=a.prototype;c.get=function(a){var c=this.getCachedExperimentsMap(),d=b("TVExperiments")[a];if(!d)return!1;if(d.overrideValue!=null)return d.overrideValue;var e=c[a];if(e===void 0||e.version<d.version){this.$1.set(this.$2,babelHelpers["extends"]({},c,(c={},c[a]=d,c)));return d.value}return e.value};c.getCachedExperimentsMap=function(){return this.$1.get(this.$2)||{}};c.getCachedExperimentsMapForLogging=function(){var a=this.$1.get(this.$2)||{};Object.keys(a).map(function(b){return(a[b]=(b=a[b])==null?void 0:b.value)||""});return a};c.__setForUnitTests=function(a,b){};return a}();c=new a();d=c;e.exports=d}),null);
__d("TVPlatform",["memoize"],(function(a,b,c,d,e,f){"use strict";var g={isAndroidBased:(a=b("memoize"))(function(){return g.isAmazon()||g.isAndroidTV()}),isAmazon:a(function(){return/AFT[MTB]/.test(navigator.userAgent)}),isAmazonFireTVStick:a(function(){return/AFT[MT]/.test(navigator.userAgent)}),isAndroidTV:a(function(){return/\bcom\.facebook\.katana\b/.test(navigator.userAgent)&&!g.isAmazon()||g.isPortalTV()||g.isJIOTV()||g.isNexusPlayer()||g.isNvidiaShield()||g.isSonyTV()}),isPortalTV:a(function(){return/\bcom\.facebook\.aloha\.app\.fbtv\b/.test(navigator.userAgent)}),isNexusPlayer:a(function(){return/\bNexus Player\b/.test(navigator.userAgent)}),isNvidiaShield:a(function(){return/\bSHIELD Android TV\b/.test(navigator.userAgent)}),isSonyTV:a(function(){return/\bBRAVIA\b/.test(navigator.userAgent)}),isGamingForTV:a(function(){return/\bcom\.facebook\.gaming\b/.test(navigator.userAgent)}),isChromecast:a(function(){return!!window.cast}),isHisense:a(function(){return/\bHisense\b/.test(navigator.userAgent)||/\bVIDAA\b/.test(navigator.userAgent)}),isVizio:a(function(){return/\bVizio\b/i.test(navigator.userAgent)}),isLg:a(function(){return/\bWeb0S\b/.test(navigator.userAgent)}),isLgOld:a(function(){return/\bWeb0S\b/.test(navigator.userAgent)&&!/\bChrome\b/.test(navigator.userAgent)}),isClaro:a(function(){return/\bTeleIDEA\b/.test(navigator.userAgent)}),isPersonal:a(function(){return/\bSagemcom-DIW362-CVA\b/.test(navigator.userAgent)||/\bArris, DCX4220\b/.test(navigator.userAgent)||/\bArris, DCX4400\b/.test(navigator.userAgent)}),isJIOTV:a(function(){return/\bJio\b/.test(navigator.userAgent)}),isSamsung:a(function(){return/\bTizen\b/.test(navigator.userAgent)}),isSamsung2017:a(function(){return/\bTizen 3\b/.test(navigator.userAgent)}),isSamsungTizen23:a(function(){return/\bTizen 2.3\b/.test(navigator.userAgent)}),isXbox:a(function(){return/\bXbox\b/.test(navigator.userAgent)}),isWWW:a(function(){for(var a in g){if(a==="isWWW")continue;if(g[a]())return!1}return!0})};Object.freeze(g);c=g;e.exports=c}),null);
__d("TVLogger",["Banzai","ConnectedTvLoggingFalcoEventBuilder","ErrorPubSub","PageHooks","Promise","QuickPerformanceLogger","SiteData","TVError","TVLoggedOutExperimentsCached","TVPlatform","TVUserSessionManager","TVWebAppGlobals","Visibility","guid","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";var g,h;b("PageHooks");var i=500;c=function(){function c(){this.$3=!0;this.$4=b("guid")();this.$5=b("TVWebAppGlobals").getSessionStartTimeMS();this.$6=b("TVWebAppGlobals").getSessionStartTimeMS();this.$7=!1;this.$8=null;this.$10={};this.$11=[];this.$18=null;this.$19=null;this.$20=null;this.$21=null;this.$1=this.onUnhandledError.bind(this);this.$12=null;this.$14=1;this.$15=!b("Visibility").isHidden();this.$16=new Set();var d=b("TVWebAppGlobals").getAppAPI();d?this.$9={appVersion:d.getAppVersion(),duid:d.getDeviceUniqueID(),manufacturer:d.getManufacturer(),modelName:d.getModelName(),osVersion:d.getOSVersion(),thirdPartyAppID:d.getThirdPartyAppID()}:this.$9={appVersion:void 0,duid:void 0,manufacturer:void 0,modelName:void 0,osVersion:void 0,thirdPartyAppID:void 0};c.isConsoleEnabled===null&&(c.isConsoleEnabled=/\bdebugging=1\b/.test(a.location.search)||!!a.DEBUG);c.isGoogleCastBg===null&&(c.isGoogleCastBg=/\bgoogle_cast_bg=true\b/.test(a.location.search));b("QuickPerformanceLogger").markerStartFromNavStart(62128131);b("QuickPerformanceLogger").markerEnd(62128131,2);b("TVPlatform").isSamsungTizen23()?this.getLogger("receiver_loaded").setEventDescription(JSON.stringify({logVital:!1})).log():this.getLogger("receiver_loaded").logVital();a.performance&&a.performance.timing&&this.getLogger("receiver_page_load").setPerfTimeMs(a.performance.timing.responseEnd-this.$5).log();(g||(g=b("ErrorPubSub"))).addListener(this.$1)}var d=c.prototype;d.overrideAccessToken=function(a){this.$18=a};d.overrideClientAppID=function(a){this.$19=a};d.overrideDeviceInfo=function(a){this.$9=a};d.onUnhandledError=function(a){this.$22(a)};d.currentTally=function(){return this.getLogger("receiver_loaded").currentTally()};d.shutdown=function(){(g||(g=b("ErrorPubSub"))).removeListener(this.$1);a.PageHooks.runHooks("onleavehooks");a.PageHooks.runHooks("onunloadhooks");a.PageHooks.runHooks("onafterunloadhooks");return new(b("Promise"))(function(a,c){b("Banzai").flush(a,c)})};d.logQPLStartupEventIfInitialPlayback=function(){c.isInitialPlayback&&(b("QuickPerformanceLogger").markerEnd(62128135,2),c.isInitialPlayback=!1)};d.$23=function(a){var d;d=(d=this.$18)!=null?d:b("TVUserSessionManager").getUserAccessToken();d={event:a,experience:this.$12,most_recent_sender_user_agent:this.$13,tv_app_version:this.$9.appVersion,tv_seq_num:this.$14++,tv_time_ms:Date.now(),tv_session_id:this.$4,campaign_id:this.$2,cast_session_id:this.$8,client_session_start_time_ms:this.$5,is_app_visible:this.$15,device_unique_id:this.$9.duid,manufacturer:this.$9.manufacturer,model_name:this.$9.modelName,os_version:this.$9.osVersion,third_party_app_id:this.$9.thirdPartyAppID,is_google_cast_bg:c.isGoogleCastBg,access_token:d,is_first_load_after_install:b("TVUserSessionManager").isFirstLoadAfterInstall(),tv_player_instance_key:this.$20,tv_player_version:this.$21,tv_web_client_revision:b("SiteData").client_revision.toString()};this.$19!=null&&(d.cast_client_app_id=this.$19);var e=b("TVLoggedOutExperimentsCached").getCachedExperimentsMapForLogging();for(var f=this.$16,g=Array.isArray(f),i=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;j=j();e=babelHelpers["extends"]({},e,j)}d.extra_data=e;if(!this.$10[a]){this.$10[a]=!0;j=(h||(h=b("performanceAbsoluteNow")))();if(a==="receiver_experience_manager_loaded")if(document.hasFocus())b("QuickPerformanceLogger").markerStart(62128130),b("QuickPerformanceLogger").markerStartFromNavStart(62128135),b("QuickPerformanceLogger").markerAnnotate(62128135,{bool:{backgroundLoad:!1}});else{i=function a(){window.removeEventListener("focus",a),b("QuickPerformanceLogger").markerStart(62128130),b("QuickPerformanceLogger").markerStart(62128135),b("QuickPerformanceLogger").markerAnnotate(62128135,{bool:{backgroundLoad:!0}})};window.addEventListener("focus",i)}a==="receiver_device_connected"&&(b("QuickPerformanceLogger").markerEnd(62128130,2),this.$7=!0,this.$6=j);a==="receiver_playback_started"&&this.logQPLStartupEventIfInitialPlayback();d.initial_cast=!0;d.perf_time_ms=Math.floor(j-(this.$7?this.$6:this.$5))}this.$24("timeStamp",a);this.$25({ts:Date.now(),event:a});g=d;return new(b("ConnectedTvLoggingFalcoEventBuilder"))(g)};d.getLogger=function(a){return this.$23(a)};d.$24=function(a){if(c.isConsoleEnabled&&a in console){var b;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];(b=console)[a].apply(b,e)}};d.setIsVisible=function(a){this.$15=a,this.logEvent(a?"app_foregrounded":"app_backgrounded")};d.logEvent=function(a,b,c){b===void 0&&(b=null);c===void 0&&(c=!1);this.$25({event:a,event_description:b});var d=this.getLogger(a);b=this.sanitize(b,a);b&&d.setEventDescription(b);c?d.logVital():d.log()};d.traceEvent=function(a){this.$25(a),this.$24("log",a)};d.$25=function(a){if(!this.$3)return;typeof a==="string"||(a=JSON.stringify(a));this.$11.unshift(a);this.$11.length>i&&(this.$11=this.$11.slice(0,i))};d.getEventsTrace=function(){this.$25({sessionId:this.getSessionID()});return this.$11};d.logUnhandledError=function(a){this.$24("error",a),this.$22(a)};d.$22=function(a){var c=b("TVError").parseError(a),d=c.message;c=c.details;try{var e,f=JSON.parse(c);if(((e=f)!=null?e.loggingSource:e)==="ONUNHANDLEDREJECTION")return;if(((e=f)!=null?e.loggingSource:e)==="FBLOGGER"&&((e=f)!=null?e.type:e)==="warn"&&((e=f)!=null?e.forcedKey:e)==="TVInstalledAppLoginActions")return}catch(a){}this.$25({error:{message:d,details:c,stack:a&&a.stack||new Error().stack}});f=this.sanitize(d,"receiver_error");this.getLogger("receiver_error").setErrorMessage(f).setErrorDetails(c).setVideoIDOverride(this.getVideoID()).logVital()};d.logError=function(a,b){b===void 0&&(b=null),this.$25({error:{message:a,details:b,stack:new Error().stack}}),this.$24("error",a,b),a=this.sanitize(a,"receiver_error"),this.getLogger("receiver_error").setErrorMessage(a).setErrorDetails(b).logVital()};d.logWarn=function(a,b){b===void 0&&(b=null),this.$25({warning:{message:a,details:b}}),this.$24("warn",a,b),a=this.sanitize(a,"receiver_warning"),this.getLogger("receiver_warning").setErrorMessage(a).setErrorDetails(b).log()};d.sanitize=function(a,b){if(!a||!b)return a;switch(b){case"receiver_received_message":case"receiver_error":return a.replace(/\\"access_token\\":\\"[a-z0-9A-Z+/=_\-]*\\"/,'\\"access_token\\":\\"--sanitized--\\"').replace(/\\"channel_token\\":\\"[a-z0-9A-Z+/=_\-]*\\"/,'\\"channel_token\\":\\"--sanitized--\\"');case"launched_app":return a.replace(/token=[a-z0-9A-Z+/=%]*/,"token=--sanitized--");default:return a}};d.getSessionID=function(){return this.$4};d.setCastSessionID=function(a){if(this.$8===a)return;this.$8=a};d.setMostRecentSenderUserAgent=function(a){this.$13=a};d.setCurrentExperience=function(a){this.$12=a};d.setCollectTraceLogs=function(a){a||(this.$11=[]),this.$3=a};d.getCampaignID=function(){return this.$2};d.setCampaignID=function(a){this.$2=a};d.getVideoID=function(){return this.$17};d.setVideoID=function(a){this.$17=a};d.setTvPlayerInstanceKey=function(a){this.$20=a};d.setTvPlayerVersion=function(a){this.$21=a};d.addExtraDataCallback=function(a){this.$16.add(a)};d.removeExtraDataCallback=function(a){this.$16["delete"](a)};d.getIsGoogleCastBG=function(){return c.isGoogleCastBg};d.getDeviceInfo=function(){return this.$9};return c}();c.isConsoleEnabled=null;c.isGoogleCastBg=null;c.isInitialPlayback=!0;d=new c();f=d;e.exports=f}),null);
__d("TVUserSessionManager",["invariant","QE2Logger","TVLoggedOutExperimentsCached","TVLogger","TVSessionStorage","TVWebAppGlobals","fb-error"],(function(a,b,c,d,e,f,g){"use strict";var h=b("fb-error").ErrorDynamicData,i="html_tv_ui_experiments";a=function(){function a(){this.$5=new Map(),this.$6=null,this.$7={}}var c=a.prototype;c.init=function(a){this.$3=b("TVSessionStorage").getAccessToken()||a;this.$4=b("TVSessionStorage").getUserLocale();a=b("TVSessionStorage").getLastLoadTimeMs()||b("TVSessionStorage").getAccessToken()||b("TVSessionStorage").getUserSessions().size>0;this.$1=!a;this.$2=b("TVSessionStorage").getLastLoadTimeMs();b("TVSessionStorage").saveLastLoadTimeMs(Date.now());this.$5=b("TVSessionStorage").getUserSessions();this.$8()};c.getLocale=function(){var a=this.getUserLocale()||b("TVWebAppGlobals").getAppSettings().getTVLocale();return a};c.getUserLocale=function(){return this.$4};c.setUserLocale=function(a){b("TVSessionStorage").saveUserLocale(a),this.$4=a};c.getLastLoadTimeMs=function(){return this.$2};c.isFirstLoadAfterInstall=function(){return this.$1};c.isLoggedIn=function(){return!!this.getUserAccessToken()};c.isUserAccessTokenTemp=function(){return this.$6!==null};c.getUserAccessToken=function(){return this.$6&&this.$6.token||this.$3};c.getTempUserAccessToken=function(){var a;return(a=(a=this.$6)==null?void 0:a.token)!=null?a:null};c.getTempUserAccessSession=function(){return this.$6};c.setUserAccessToken=function(a,c){c===void 0&&(c=!0),this.deleteTempUserAccessToken(),this.$3=a,h.access_token=a,c&&(a?b("TVSessionStorage").saveAccessToken(a):b("TVSessionStorage").deleteAccessToken())};c.isCasterTokenAvailable=function(a){a=b("TVSessionStorage").getCastAccessToken(a);return a!=null};c.setTempUserAccessTokenWithCasterSession=function(a){var c;c=b("TVSessionStorage").getCastAccessToken((c=a.casterId)!=null?c:"");c!=null?this.setTempUserAccessSession(babelHelpers["extends"]({token:c},a)):b("TVLogger").logWarn("Attempting to set access token with unknown caster id")};c.invalidateTempUserAccessToken=function(){if(this.$6!=null){var a;b("TVSessionStorage").deleteCastAccessTokenByToken((a=this.$6)==null?void 0:a.token);this.$6=null}};c.isTempUserAccessToken=function(a){return(a=this.$7[a])!=null?a:!1};c.setTempUserAccessSession=function(a){this.$6=a,this.$7[a.token]=!0,h.access_token=a.token};c.deleteCurrentUserAccessToken=function(){this.$3=null,b("TVSessionStorage").deleteAccessToken(),(!b("TVLoggedOutExperimentsCached").get("userSwitchingEnabled")||b("TVWebAppGlobals").getAppSettings().getDisableUserSwitching())&&b("TVSessionStorage").deleteUserSessions()};c.deleteCurrentSavedUserAccessToken=function(){this.deleteSavedUserAccessToken(this.getCurrentUserID())};c.deleteSavedUserAccessToken=function(a){if(!a)return;a===this.getCurrentUserID()&&this.deleteCurrentUserAccessToken();this.$5["delete"](a)&&b("TVSessionStorage").saveUserSessions(this.$5);this.$8()};c.deleteTempUserAccessToken=function(){this.isUserAccessTokenTemp()&&(this.$6=null,h.access_token=this.$3||null)};c.getAvailableUserSessions=function(){var a=[];this.$5.forEach(function(b){a.push(b)});a.sort(function(a,b){return b.lastSeenTime-a.lastSeenTime});return a};c.updateActiveUserSession=function(a){var c=a.accessToken,d=a.id;c!==this.getUserAccessToken()&&(b("TVLogger").logWarn("updateActiveUserSession has mismatching userAccessToken"),this.setUserAccessToken(c));b("QE2Logger").logExposureForUser(i,d);this.$5.set(d,a);b("TVSessionStorage").saveUserSessions(this.$5);this.$8()};c.switchUserSession=function(a){var c=this.getCurrentUserSession();c&&(c.lastSeenTime=Date.now(),this.$5.set(c.id,c),b("TVSessionStorage").saveUserSessions(this.$5));c=this.$5.get(a);c||g(0,5994);this.setUserAccessToken(c.accessToken);window.location.reload()};c.getCurrentUserSession=function(){for(var a=this.$5.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.accessToken===this.$3)return d}return null};c.getCurrentUserID=function(){var a=this.getCurrentUserSession();return a?a.id:null};c.$8=function(){var a=this.getCurrentUserID(),c=b("TVWebAppGlobals").getAppAPI();c.hasUserSessionSupport()&&c.setCurrentUserID(a||null)};c.getNewInstance=function(){return new a()};return a}();c=new a();d=c;e.exports=d}),null);
__d("TVClientVideoMetadata",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=a}var b=a.prototype;b.getAppID=function(){return this.$1.getAppID()};b.getAppVersion=function(){return this.$1.getAppVersion()};b.getAspectRatio=function(){return this.$1.getAspectRatio()};b.getBackgroundURL=function(){var a;return(a=this.$1.getBackground())==null?void 0:a.uri};b.getCaptionsURL=function(){return this.$1.getCaptionsURL()};b.getDashManifest=function(){return this.$1.getDashManifest()};b.getMetadata=function(){return this.$1};b.getPlayableDurationInMs=function(){return this.$1.getPlayableDurationInMs()};b.getThumbnailURL=function(){var a;return(a=this.$1.getThumbnail())==null?void 0:a.uri};b.getTitle=function(){return this.$1.getTitle()};b.getVideoChannelID=function(){return this.$1.getVideoChannelID()};b.getVideoID=function(){return this.$1.getVideoID()};b.getVideoURL=function(){var a=function(a){return a!=null&&a.length>0},b=this.$1.getVideoURL("DASH");if(a(b))return b;b=this.$1.getVideoURL("PROGRESSIVE");return a(b)?b:this.$1.getVideoURL("HLS")};b.getMessage=function(){return this.$1.getMessage()};b.toString=function(){return JSON.stringify({appID:this.getAppID(),appVersion:this.getAppVersion(),aspectRatio:this.getAspectRatio(),backgroundURL:this.getBackgroundURL(),captionsURL:this.getCaptionsURL(),dashManifest:this.getDashManifest(),durationMs:this.getPlayableDurationInMs(),message:this.getMessage(),thumbnailURL:this.getThumbnailURL(),title:this.getTitle(),videoChannelID:this.getVideoChannelID(),videoID:this.getVideoID(),videoURL:this.getVideoURL()})};return a}();e.exports=a}),null);
__d("TVBaseAppAPI",["CacheStorage","Promise","TVClientVideoMetadata","regeneratorRuntime","uuid"],(function(a,b,c,d,e,f){"use strict";var g=new(b("CacheStorage"))("localstorage","_ctv_");a=function(){function a(){}var c=a.prototype;c.getDeviceUniqueID=function(){var a=g.get("deviceUniqueIDFallback");a||(a="fallback__"+b("uuid")(),g.set("deviceUniqueIDFallback",a));return a};c.getAppVersion=function(){return null};c.getManufacturer=function(){return"unknown"};c.getModelName=function(){return null};c.getOSVersion=function(){return null};c.getThirdPartyAppID=function(){return null};c.canGenVC=function(){return!1};c.genVC=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("genVC() not implemented");case 1:case"end":return a.stop()}},null,this)};c.hasSmartLoginSupport=function(){return!1};c.startSmartLogin=function(a){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("startSmartLogin() not implemented");case 1:case"end":return a.stop()}},null,this)};c.stopSmartLogin=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("stopSmartLogin() not implemented");case 1:case"end":return a.stop()}},null,this)};c.logoutAndReload=function(){window.location.reload()};c.hasScreensaverDisableSupport=function(){return!1};c.enableScreensaver=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("enableScreensaver() not implmented");case 1:case"end":return a.stop()}},null,this)};c.disableScreensaver=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("disableScreensaver() not implmented");case 1:case"end":return a.stop()}},null,this)};c.hasUserSessionSupport=function(){return!1};c.setCurrentUserID=function(a){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("setCurrentUserID() not implemented");case 1:case"end":return a.stop()}},null,this)};c.hasMediaDelegate=function(){return!1};c.onSelectVideo=function(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=new(b("TVClientVideoMetadata"))(a);if(!((c=window)!=null?(c=c.FBTVMediaBridge)!=null?c.onSelectVideo:c:c)){e.next=4;break}e.next=4;return b("regeneratorRuntime").awrap(this.exec("onSelectVideo",function(a){window.FBTVMediaBridge.onSelectVideo(d.toString())}));case 4:case"end":return e.stop()}},null,this)};c.onVideoStateChange=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:if(!((c=window)!=null?(c=c.FBTVMediaBridge)!=null?c.onVideoStateChange:c:c)){d.next=3;break}d.next=3;return b("regeneratorRuntime").awrap(this.exec("onVideoStateChange",function(b){window.FBTVMediaBridge.onVideoStateChange(a.toString())}));case 3:case"end":return d.stop()}},null,this)};c.onPlaybackError=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:if(!((c=window)!=null?(c=c.FBTVMediaBridge)!=null?c.onPlaybackError:c:c)){d.next=3;break}d.next=3;return b("regeneratorRuntime").awrap(this.exec("onPlaybackError",function(b){window.FBTVMediaBridge.onPlaybackError(JSON.stringify(a.serialize()))}));case 3:case"end":return d.stop()}},null,this)};c.onCommMessage=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!((d=window)!=null?(d=d.FBTVCastingBridge)!=null?d.onCommMessage:d:d)){e.next=3;break}e.next=3;return b("regeneratorRuntime").awrap(this.exec("onCommMessage",function(b){window.FBTVCastingBridge.onCommMessage(a,JSON.stringify(c.serialize()))}));case 3:case"end":return e.stop()}},null,this)};c.closeApp=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:window.open("","_self").close();case 1:case"end":return a.stop()}},null,this)};c.hasAppClosedCaptioningSupport=function(){return!1};c.isClosedCaptioningEnabled=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("isClosedCaptioningEnabled() not implmented");case 1:case"end":return a.stop()}},null,this)};c.setClosedCaptioningEnabled=function(a){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:throw new Error("setClosedCaptioningEnabled() not implmented");case 1:case"end":return a.stop()}},null,this)};c.exec=function(a,c,d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d===void 0&&(d=6e4);a=this.constructor.name+":"+a;f.next=4;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(e,f){var g=b("uuid")(),h=window.setTimeout(function(){window[g]&&window[g](new Error('timeout waiting for api call "'+a+'" response from native app'))},d);window[g]=function(b,a){window.clearTimeout(h),delete window[g],b?f(b):e(a)};try{c(g)}catch(a){window[g](a)}}));case 4:e=f.sent;if(!(typeof e==="object"&&e!==null)){f.next=7;break}return f.abrupt("return",e);case 7:if(!(typeof e==="string"&&e.trim().indexOf('{"')===0)){f.next=15;break}f.prev=8;return f.abrupt("return",JSON.parse(e));case 12:f.prev=12;f.t0=f["catch"](8);throw new Error('api call "'+a+'" did not have a valid json response: '+f.t0.message);case 15:throw new Error('api call "'+a+'" did not have a valid response');case 16:case"end":return f.stop()}},null,this,[[8,12]])};return a}();e.exports=a}),null);
__d("TVOutgoingMessage",[],(function(a,b,c,d,e,f){"use strict";var g=2;a=function(){function a(a,b){this.dest=a,this.messageNumber=-1,this.requestMessageNumber=b}var b=a.prototype;b.getDestination=function(){return this.dest};b.setTarget=function(a){this.target=a};b.setMessageNumber=function(a){this.messageNumber=a};b.serialize=function(){var a=this.serializeReceiverInfo();return babelHelpers["extends"]({protocol_version:g,timestamp:Date.now(),num:this.messageNumber,response_num:this.requestMessageNumber,type:this.getMessageType(),data:this.serializeData(),target:this.target},a!=null&&{receiver_info:a})};b.serializeData=function(){return{}};b.serializeReceiverInfo=function(){return null};b.getMessageType=function(){return"unknown"};return a}();e.exports=a}),null);
__d("TVVersionResponse",["TVOutgoingMessage"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){c=a.call(this,c,d)||this;c.result=b;return c}var c=b.prototype;c.getMessageType=function(){return"version_response"};c.serializeData=function(){return this.result};b.successResponse=function(a){a=babelHelpers["extends"]({success:!0,reason:null},a);return a};b.failedResponse=function(a){return{success:!0,reason:a,currently_running_experience:null}};return b}(b("TVOutgoingMessage"));e.exports=a}),null);
__d("TVVersionManager",["TVVersionResponse"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.commManager=a}var c=a.prototype;c.handleVersionRequest=function(a){a=this.commManager.connectionEstablished(a.getSender(),a.getVersionNumber(),a.getClientCastSession());return b("TVVersionResponse").successResponse(a)};return a}();e.exports=a}),null);
__d("TVWebAppSettings",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=this;this.$1=a.allow_deep_link||!1;this.$2=a.app_api;this.$3=a.app_platform||"unknown";this.$4=a.communication_modules||[];this.$5=a.remote_control;this.$6=a.video_player;this.$7=a.inject_components;this.$8=a.initial_payload;this.$9=a.client_token||null;this.$10=a.installed_app;this.$13=a.tv_locale;this.$14=a.touch_enabled||!1;this.$15=a.cursor_enabled||!1;this.$18=a.show_back_button||!1;this.$19=a.show_back_to_news_feed||!1;this.$20=a.use_small_profile_picture||!1;this.$21=a.show_player_ui_on_mouse_click||!1;this.$22=a.show_player_ui_on_mouse_move||!1;this.$23=a.show_player_ui_on_touch_start||!1;this.$11=a.auto_play_experience;this.$16=a.casting;this.$17=a.google_cast_bg;this.$26=a.condense_mode_enabled;this.$27=a.search_bar_auto_focus;this.$28=a.show_watch_icon_on_nav_bar;this.$24=a.show_splash_video==null?!0:a.show_splash_video;this.$25=a.show_keyboard==null?!1:a.show_keyboard;this.$29=a.show_small_publisher_buttons;this.$30=a.hide_play_pause_button||!1;this.$31=a.disable_exit_modal||!1;this.$32=a.show_follow_button_on_top_of_player||!1;this.$33=a.hide_info_button_at_bottom_of_player||!1;this.$34=a.hide_setting_user_profile||!1;this.$35=a.player_nav_controls_on_newline||!1;this.$36=a.exit_immidiately_without_exit_dialog||!1;this.$37=a.gate_video_chaining||!1;this.$38=a.disable_user_switching||!1;this.$39=a.hide_logout_from_settings||!1;this.$40=a.normalize_volume||!1;this.$41=a.disable_cookie_consent||!1;this.$42=a.switch_route_immediately_on_back_press||!1;this.$43=a.request_full_screen||!1;this.$44=a.enable_scrollaway_menu||!1;this.$45=a.player_control_api;this.$46=a.show_sound_button_in_player||!1;this.$47=a.do_not_show_network_dialog||!1;this.$48=a.supports_focus===void 0?!0:a.supports_focus;this.$49=a.hide_player_view_info_buttons||!1;this.$50=a.show_replay_end_screen_on_video_end||!1;this.$51=a.pmv_ad_break_video_ids||[];this.$12=new Map();var c=a.experiment_modules;c&&Object.keys(c).forEach(function(a){b.$12.set(a,c[a])})}var b=a.prototype;b.getAllowDeepLink=function(){return this.$1};b.getAppAPI=function(){return this.$2};b.getAppPlatform=function(){return this.$3};b.getCommunicationModules=function(){return this.$4};b.getRemoteControl=function(){return this.$5};b.getVideoPlayer=function(){return this.$6};b.getInjectedComponents=function(){return this.$7||[]};b.getInitialPayload=function(){return this.$8||null};b.getClientToken=function(){return this.$9};b.getIsInstalledApp=function(){return this.$10};b.getTVLocale=function(){return this.$13};b.getTouchEnabled=function(){return this.$14};b.getCursorEnabled=function(){return this.$15};b.getShowBackButton=function(){return this.$18};b.getShowBackToNewsFeed=function(){return this.$19};b.getUseSmallProfilePicture=function(){return this.$20};b.getShowPlayerUIOnMouseClick=function(){return this.$21};b.getShowPlayerUIOnMouseMove=function(){return this.$22};b.getShowPlayerUIOnTouchStart=function(){return this.$23};b.getShowSplashVideo=function(){return this.$24};b.getShowSoftwareKeyboard=function(){return this.$25};b.getAutoPlayExperience=function(){return this.$11};b.getIsCasting=function(){return this.$16};b.getIsGoogleCastBg=function(){return this.$17};b.getCondenseModeEnabled=function(){return this.$26};b.getSearchBarAutoFocus=function(){return this.$27};b.getShowWatchIconOnNavBar=function(){return this.$28};b.getShowSmallPublisherButtons=function(){return this.$29};b.getHidePlayPauseButton=function(){return this.$30};b.getDisableExitModal=function(){return this.$31};b.getShowFollowButtonOnTopOfPlayer=function(){return this.$32};b.getHideInfoButtomAtBottomOfPlayer=function(){return this.$33};b.getHideSettingUserProfile=function(){return this.$34};b.getIncludeVideoMetadataInMessage=function(){return"portal"===this.$3||"android"===this.$3||"amazon"==this.$3||"xbox"==this.$3||"lg"==this.$3};b.getPlayerNavControlsOnNewline=function(){return this.$35};b.getExitImmediatelyWithoutExitDialog=function(){return this.$36};b.getGateVideoChaining=function(){return this.$37};b.getDisableUserSwitching=function(){return this.$38};b.getHideLogoutFromSettings=function(){return this.$39};b.getNormalizeVolume=function(){return this.$40};b.getDisableCookieConsent=function(){return this.$41};b.getSwitchRouteImmediatelyOnBackPress=function(){return this.$42};b.getRequestFullScreen=function(){return this.$43};b.getEnableScrollawayMenu=function(){return this.$44};b.getPlayerControlAPI=function(){if(this.$45)return new this.$45();else return null};b.getShowSoundButtonInPlayer=function(){return this.$46};b.getExperimentModule=function(a){return!this.$12.has(a)?null:this.$12.get(a)};b.getDoNotShowNetworkDialog=function(){return this.$47};b.getSupportsFocus=function(){return this.$48};b.getHidePlayerViewInfoButtons=function(){return this.$49};b.getShowReplayEndScreenOnVideoEnd=function(){return this.$50};b.getPmvAdBreakVideoIds=function(){return this.$51};return a}();e.exports=a}),null);
__d("TVWebAppGlobals",["Promise","TVBaseAppAPI","TVCommunicationsManager","TVRemoteControlManager","TVVersionManager","TVWebAppSettings","performanceAbsoluteNow"],(function(a,b,c,d,e,f){var g;c=function(){function c(){var c=this;this.$1=new(b("TVWebAppSettings"))({});this.$8=!1;this.$6=a.performance?a.performance.timing.navigationStart:(g||(g=b("performanceAbsoluteNow")))();this.$3=new(b("Promise"))(function(a){c.$4=function(){return a(c)}})}var d=c.prototype;d.init=function(a){var c;this.$1=new(b("TVWebAppSettings"))(a);this.$8=(c=a.use_message_bus)!=null?c:!1;this.$2=new(b("TVCommunicationsManager"))(this.$1);this.$2.init();this.$9=new(b("TVVersionManager"))(this.$2);this.$2.setMessageHandler("version",this.$9);this.$7=a.show_akira_tv;this.$5=new(b("TVRemoteControlManager"))(this.$1);this.$5.init()};d.experienceIsReady=function(){this.$4()};d.onExperienceReady=function(){return this.$3};d.getAppAPI=function(){var a=this.$1.getAppAPI();return a!=null?new a():new(b("TVBaseAppAPI"))()};d.getAppSettings=function(){return this.$1};d.getCommunicationsManager=function(){return this.$2};d.getRemoteControlManager=function(){return this.$5};d.getSessionStartTimeMS=function(){return this.$6};d.getHasMessageBus=function(){return this.$8};d.getShowAkiraTV=function(){return this.$7};d.getVersionManager=function(){return this.$9};return c}();d=new c();f=d;e.exports=f}),null);
__d("TVExperienceCommandResponseMessage",["TVOutgoingMessage"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){c=a.call(this,c,d)||this;c.commandResults=b;return c}var c=b.prototype;c.getMessageType=function(){return"command_result"};c.serializeData=function(){return this.commandResults};b.successResponse=function(a){return{success:!0,reason:null,type:null,activation_code:null,reference_id:a}};b.failedResponse=function(a,b){return{success:!1,reason:b,type:a,reference_id:null}};b.requireActivationResponse=function(a){return{success:!1,reason:"",type:"code_activation",reference_id:null,activation_code:a}};return b}(b("TVOutgoingMessage"));e.exports=a}),null);
__d("TVGenericMessage",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.msg=a,this.data=a.data,this.connectionRequired=!0}a.getHandledType=function(){return""};var c=a.prototype;c.setSender=function(a){this.sender=a;return this};c.getSender=function(){return this.sender};c.getType=function(){return this.msg.type};c.getMessageNumber=function(){return this.msg.num};c.getData=function(){return this.msg.data};c.getTarget=function(){return this.msg.target||"unknown"};c.setConnection=function(a){this.connection=a;return this};c.getConnection=function(){return this.connection};c.handleResult=function(a,c){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:return a.abrupt("return",null);case 1:case"end":return a.stop()}},null,this)};c.getOperation=function(a){return a.handleGenericMessage?a.handleGenericMessage.bind(a):null};c.operate=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=this.getOperation(a);if(c){d.next=3;break}return d.abrupt("return",null);case 3:d.next=5;return b("regeneratorRuntime").awrap(c(this));case 5:return d.abrupt("return",d.sent);case 6:case"end":return d.stop()}},null,this)};c.setConnectionRequired=function(a){this.connectionRequired=a;return this};c.needsEstablishedConnection=function(){return this.connectionRequired};return a}();e.exports=a}),null);
__d("TVExperienceCommandMessage",["TVExperienceCommandResponseMessage","TVGenericMessage","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.data.payload=b.data.payload||"";b.data.params=b.data.params||{};return b}c.getHandledType=function(){return"experience_command"};var d=c.prototype;d.getCommandName=function(){return this.data.cmd};d.getCommandPayload=function(){return this.data.payload};d.getCommandParams=function(){return this.data.params};d.getOperation=function(a){return a.handleCommand?a.handleCommand.bind(a):null};d.handleResult=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=new(b("TVExperienceCommandResponseMessage"))(c,this.getSender(),this.getMessageNumber());e.next=3;return b("regeneratorRuntime").awrap(a.sendMessage(d));case 3:case"end":return e.stop()}},null,this)};return c}(b("TVGenericMessage"));e.exports=a}),null);
__d("TVGetExperienceStateResponseMessage",["TVOutgoingMessage"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){c=a.call(this,c,d)||this;c.commandResults=b;return c}var c=b.prototype;c.getMessageType=function(){return"experience_state"};c.serializeData=function(){return this.commandResults};b.experienceStateResponse=function(a,b){return{success:!0,reason:null,experience_type:a,experience_specific_state:b}};return b}(b("TVOutgoingMessage"));e.exports=a}),null);
__d("TVGetExperienceStateMessage",["TVGenericMessage","TVGetExperienceStateResponseMessage","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getHandledType=function(){return"get_experience_state"};var d=c.prototype;d.getOperation=function(a){return a.getExperienceState?a.getExperienceState.bind(a):null};d.handleResult=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=new(b("TVGetExperienceStateResponseMessage"))(c,this.getSender(),this.getMessageNumber());e.next=3;return b("regeneratorRuntime").awrap(a.sendMessage(d));case 3:case"end":return e.stop()}},null,this)};return c}(b("TVGenericMessage"));e.exports=a}),null);
__d("TVLaunchResponseMessage",["TVOutgoingMessage"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){c=a.call(this,c,d)||this;c.launchResults=b;return c}var c=b.prototype;c.getMessageType=function(){return"launch_response"};c.serializeData=function(){return this.launchResults};b.mergeResponse=function(a,b,c){return babelHelpers["extends"]({},a,{launched:b,target:c})};b.successResponse=function(a,b){return{success:!0,reason:null,launched:a,type:null,target:b,reference_id:null}};b.failedResponse=function(a,b){return{success:!1,reason:b,launched:null,type:a,target:null,reference_id:null}};b.requireActivationResponse=function(a){return{success:!1,reason:"",launched:null,target:null,type:"code_activation",activation_code:a,reference_id:null}};return b}(b("TVOutgoingMessage"));e.exports=a}),null);
__d("TVLaunchMessage",["TVGenericMessage","TVLaunchResponseMessage","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getHandledType=function(){return"launch"};var d=c.prototype;d.getName=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.name:a:a)||""};d.canJoinExperience=function(){var a;return!!((a=this)!=null?(a=a.data)!=null?a.can_join:a:a)};d.getExperienceParams=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.params:a:a)||{}};d.getExperiencePayload=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.payload:a:a)||null};d.getOperation=function(a){return a.handleLaunch?a.handleLaunch.bind(a):null};d.handleResult=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=new(b("TVLaunchResponseMessage"))(c,this.getSender(),this.getMessageNumber());e.next=3;return b("regeneratorRuntime").awrap(a.sendMessage(d));case 3:case"end":return e.stop()}},null,this)};return c}(b("TVGenericMessage"));e.exports=a}),null);
__d("TVVersionRequest",["Random","TVGenericMessage","TVVersionResponse","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;b=a.call(this,b)||this;b.clientCastSession=((c=babelHelpers.assertThisInitialized(b))!=null?(c=c.data)!=null?c.client_cast_session:c:c)||b.$TVVersionRequest1();return b}c.getHandledType=function(){return"version_request"};var d=c.prototype;d.getTarget=function(){return"version"};d.getVersionNumber=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.version:a:a)||""};d.getClientCastSession=function(){return this.clientCastSession};d.getOperation=function(a){return a.handleVersionRequest?a.handleVersionRequest.bind(a):null};d.handleResult=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=new(b("TVVersionResponse"))(c,this.getSender(),this.getMessageNumber());e.next=3;return b("regeneratorRuntime").awrap(a.sendMessage(d));case 3:case"end":return e.stop()}},null,this)};d.needsEstablishedConnection=function(){return!1};d.$TVVersionRequest1=function(){return"server_generated_"+b("Random").uint32()};return c}(b("TVGenericMessage"));e.exports=a}),null);
__d("TVMessageParser",["invariant","TVExperienceCommandMessage","TVGenericMessage","TVGetExperienceStateMessage","TVLaunchMessage","TVVersionLaunchMessage","TVVersionRequest"],(function(a,b,c,d,e,f,g){"use strict";var h=[b("TVLaunchMessage"),b("TVVersionRequest"),b("TVVersionLaunchMessage"),b("TVExperienceCommandMessage"),b("TVGetExperienceStateMessage")];a=function(){function a(){var a=this;this.typesMap=new Map();h.forEach(function(b){a.typesMap.set(b.getHandledType(),function(a){return new b(a)})})}var c=a.prototype;c.parse=function(a){var c=this.typesMap.get(a.type);c||(c=function(a){return new(b("TVGenericMessage"))(a)});c||g(0,4373);return c(a)};return a}();c=new a();e.exports=c}),null);
__d("TVVersionLaunchMessage",["Random","TVGenericMessage","TVVersionLaunchResponse","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;b=a.call(this,b)||this;b.clientCastSession=((c=babelHelpers.assertThisInitialized(b))!=null?(c=c.data)!=null?c.client_cast_session:c:c)||b.$TVVersionLaunchMessage1();return b}c.getHandledType=function(){return"version_launch"};var d=c.prototype;d.getTarget=function(){return"version_launch"};d.getVersionNumber=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.version:a:a)||""};d.getClientCastSession=function(){return this.clientCastSession};d.getName=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.name:a:a)||""};d.canJoinExperience=function(){var a;return!!((a=this)!=null?(a=a.data)!=null?a.can_join:a:a)};d.getExperienceParams=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.params:a:a)||{}};d.getExperiencePayload=function(){var a;return((a=this)!=null?(a=a.data)!=null?a.payload:a:a)||null};d.getOperation=function(a){return function(){var c,d,e,f=arguments;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:if(a.handleVersionRequest){g.next=2;break}return g.abrupt("return",{success:!1,reason:"missing version handler"});case 2:g.next=4;return b("regeneratorRuntime").awrap(a.handleVersionRequest.apply(a,f));case 4:c=g.sent;if(a.handleLaunch){g.next=7;break}return g.abrupt("return",{success:!1,reason:"missing launch handler"});case 7:g.next=9;return b("regeneratorRuntime").awrap(a.handleLaunch.apply(a,f));case 9:d=g.sent;e=babelHelpers["extends"]({},c,d);return g.abrupt("return",e);case 12:case"end":return g.stop()}},null,this)}};d.handleResult=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:d=new(b("TVVersionLaunchResponse"))(c,this.getSender(),this.getMessageNumber());e.next=3;return b("regeneratorRuntime").awrap(a.sendMessage(d));case 3:case"end":return e.stop()}},null,this)};d.needsEstablishedConnection=function(){return!1};d.$TVVersionLaunchMessage1=function(){return"server_generated_"+b("Random").uint32()};return c}(b("TVGenericMessage"));e.exports=a}),null);
__d("TVVersionLaunchResponse",["SiteData","TVLogger","TVOutgoingMessage"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c,d){c=a.call(this,c,d)||this;c.result=b;return c}var d=c.prototype;d.getMessageType=function(){return"version_launch_response"};d.serializeData=function(){return this.result};d.serializeReceiverInfo=function(){return{cast_receiver_logger_session_id:b("TVLogger").getSessionID(),is_google_cast_bg:b("TVLogger").getIsGoogleCastBG()||!1,os_version:b("TVLogger").getDeviceInfo().osVersion||null,third_party_app_id:b("TVLogger").getDeviceInfo().thirdPartyAppID||null,web_client_revision:String(b("SiteData").client_revision)}};c.successResponse=function(a){return babelHelpers["extends"]({success:!0,reason:null},a)};c.failedResponse=function(a){return{success:!0,reason:a,currently_running_experience:null}};return c}(b("TVOutgoingMessage"));e.exports=a}),null);
__d("TVRemoteControlEvent",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a,b){this.$1=a,this.$2=g++,this.$4=b,this.$3=Date.now(),this.$5={}}var b=a.prototype;b.getAction=function(){return this.$1};b.getID=function(){return this.$2};b.getRemoteControl=function(){return this.$4};b.getExtras=function(){return this.$5};b.setExtras=function(a){this.$5=a};return a}();e.exports=a;a.UP="up";a.DOWN="down";a.LEFT="left";a.RIGHT="right";a.SELECT="select";a.PLAY="play";a.PAUSE="pause";a.PLAY_PAUSE="playpause";a.FAST_FORWARD="fastforward";a.REWIND="rewind";a.NEXT="next";a.PREVIOUS="previous";a.BACK="back";a.CAPTIONS="captions";a.CAPTIONS_ON="captionson";a.CAPTIONS_OFF="captionsoff";a.MORE="more";a.DEBUG="debug";a.BUG_REPORT="bugreport";a.LONG_SELECT="longselect";a.SEARCH="search";a.SCROLL_UP="scrollup";a.SCROLL_DOWN="scrolldown";a.SCROLL_LEFT="scrollleft";a.SCROLL_RIGHT="scrollright";a.SEEK="seek";a.STOP="stop";a.EXIT="exit";a.SETTINGS="settings";a.KEYBOARD_INPUT="input";a.ALL_EVENTS=["up","down","left","right","select","play","pause","playpause","fastforward","rewind","next","previous","back","captions","captionson","captionsoff","more","debug","bugreport","longselect","scrollup","scrolldown","scrollleft","scrollright","seek","stop","exit","settings","input"]}),null);
__d("TVRemoteControlManager",["TVChainingManager","TVLogger","TVRemoteControlEvent"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a=a.getRemoteControl();this.$1=new a()}var c=a.prototype;c.init=function(){var a,c=function(a){b("TVLogger").logEvent("receiver_remote_click",JSON.stringify({action:a.getAction()})),b("TVChainingManager").onRemoteButtonPress(a)},d=this.$1;d.addListener((a=b("TVRemoteControlEvent")).UP,c);d.addListener(a.DOWN,c);d.addListener(a.LEFT,c);d.addListener(a.RIGHT,c);d.addListener(a.SELECT,c);d.addListener(a.PLAY,c);d.addListener(a.PAUSE,c);d.addListener(a.PLAY_PAUSE,c);d.addListener(a.FAST_FORWARD,c);d.addListener(a.REWIND,c);d.addListener(a.NEXT,c);d.addListener(a.PREVIOUS,c);d.addListener(a.BACK,c);d.addListener(a.CAPTIONS,c);d.addListener(a.CAPTIONS_ON,c);d.addListener(a.CAPTIONS_OFF,c);d.addListener(a.MORE,c);d.addListener(a.DEBUG,c);d.addListener(a.BUG_REPORT,c)};c.getRemoteControl=function(){return this.$1};return a}();e.exports=a}),null);
__d("TVChainingManager",["EventEmitter","TVLogger","TVUserSessionManager","TVWebAppGlobals","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=3;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$TVChainingManager1=!0,c.$TVChainingManager2=!1,c.$TVChainingManager3=null,c.$TVChainingManager4=!1,c.$TVChainingManager5=[],c.$TVChainingManager9=function(){return{isAutoPlayEnabled:c.isAutoPlayEnabled(),isChainingEnabled:c.isChainingEnabled()}},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.isAutoPlayEnabled=function(){return this.$TVChainingManager1};d.allowChangeChainingFromUI=function(){return this.$TVChainingManager4};d.setAllowChangeChainingFromUI=function(a){this.$TVChainingManager4=a};d.isChainingEnabled=function(){return typeof this.$TVChainingManager3==="boolean"?this.$TVChainingManager3:!0};d.isChainingSettingsInitialized=function(){return this.$TVChainingManager2};d.genChainingSettings=function(){var a,c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:a=b("TVUserSessionManager").getCurrentUserID();c=a===null?"device":a;d=b("TVWebAppGlobals").getAppSettings().getPlayerControlAPI();e.next=5;return b("regeneratorRuntime").awrap(d.genAutoplaySettings(c));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},null,this)};d.allowChaining=function(a){a===void 0&&(a="unknown"),this.$TVChainingManager6(!0,a),a==="settings"&&(this.$TVChainingManager2=!0,this.$TVChainingManager7(!0))};d.disableChaining=function(a){a===void 0&&(a="unknown"),this.$TVChainingManager6(!1,a),a==="settings"&&(this.$TVChainingManager2=!0,this.$TVChainingManager7(!1))};d.addToVideoHistory=function(a){var b;((b=this)!=null?(b=b.$TVChainingManager5)!=null?(b=b[0])!=null?b.videoID:b:b:b)!==a.videoID&&(this.$TVChainingManager5.unshift(a),this.$TVChainingManager5.length>g&&(this.$TVChainingManager5.length=g),this.$TVChainingManager8("music_rights"))};d.onRemoteButtonPress=function(a){this.$TVChainingManager5.length=0,this.$TVChainingManager8("remote_button_press")};d.onReceiveClientCommand=function(a){this.$TVChainingManager5.length=0,this.$TVChainingManager8("client_command")};d.$TVChainingManager8=function(a){var c=this.$TVChainingManager1,d=!0;if(this.$TVChainingManager5.length===g){var e=this.$TVChainingManager5.every(function(a){return a.tags.includes("CONTAINS_NEARLY_COMPLETE_LICENSED")});d=!e}if(c!==d){this.$TVChainingManager1=d;e=babelHelpers["extends"]({reason:a},this.$TVChainingManager9());b("TVLogger").getLogger(d?"autoplay_enabled":"autoplay_disabled").setEventDescription(JSON.stringify(e)).log();this.emit("autoplay_changed",e)}};d.$TVChainingManager7=function(a){var c=b("TVUserSessionManager").getCurrentUserID();c=c===null?"device":c;b("TVWebAppGlobals").getAppSettings().getPlayerControlAPI().setAutoplaySettings(c,a)};d.$TVChainingManager6=function(a,c){if(this.$TVChainingManager3===a)return;this.$TVChainingManager3=a;a=babelHelpers["extends"]({reason:c},this.$TVChainingManager9());b("TVLogger").getLogger(this.$TVChainingManager3?"chaining_enabled":"chaining_disabled").setEventDescription(JSON.stringify(a)).log();this.emit("chaining_changed",a)};return c}(b("EventEmitter"));c=new a();d=c;e.exports=d}),null);
__d("TVSessionStorage",["invariant","CacheStorage","TVLogger","md5"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({ACCESS_TOKEN:"access_token",CAST_ACCESS_TOKEN:"cast_access_token",LAST_LOAD_TIME_MS:"last_load_time_ms",LOCALE:"locale",USER_SESSIONS:"user_sessions",SEARCH_TERMS:"search_terms"}),i="_ctv_",j=new(b("CacheStorage"))("localstorage",i),k=j.useBrowserStorage();a=function(){function a(){}var c=a.prototype;c.$1=function(a,c){c=j.set(a,c);(!k||!c)&&b("TVLogger").getLogger("local_storage_write_error").setEventDescription(i+a).setErrorMessage("could not write to local storage").setErrorDetails(j.getLastSetExceptionMessage()).log()};c.getAccessToken=function(){var a=j.get(h.ACCESS_TOKEN);a=typeof a==="string"?a:null;return a};c.saveAccessToken=function(a){this.$1(h.ACCESS_TOKEN,a)};c.deleteAccessToken=function(){j.remove(h.ACCESS_TOKEN)};c.getCastAccessToken=function(a){var b;a=this.hashUserId(a);b=(b=j.get(h.CAST_ACCESS_TOKEN))!=null?b:{};return b[a]};c.saveCastAccessToken=function(a,b){var c;a=this.hashUserId(a);c=(c=j.get(h.CAST_ACCESS_TOKEN))!=null?c:{};b==null?delete c[a]:c[a]=b;this.$1(h.CAST_ACCESS_TOKEN,c)};c.deleteCastAccessTokenByToken=function(a){var b,c={};b=(b=j.get(h.CAST_ACCESS_TOKEN))!=null?b:{};for(var d in b)b[d]!==a&&(c[d]=b[d]);this.$1(h.CAST_ACCESS_TOKEN,c)};c.hashUserId=function(a){a=(a=a)!=null?a:"unknown";a=(a=b("md5")(a))!=null?a:"unknown";return a};c.getSearchTerms=function(a){var b;a=this.hashUserId(a);b=(b=j.get(h.SEARCH_TERMS))!=null?b:{};return(b=b[a])!=null?b:[]};c.saveSearchTerms=function(a,b){var c;a=this.hashUserId(a);c=(c=j.get(h.SEARCH_TERMS))!=null?c:{};b.length===0?delete c[a]:c[a]=b;this.$1(h.SEARCH_TERMS,c)};c.deleteSearchTerm=function(a){this.saveSearchTerms(a,[])};c.getLastLoadTimeMs=function(){var a=j.get(h.LAST_LOAD_TIME_MS);a=a&&parseFloat(a)>0?parseFloat(a):null;return a};c.saveLastLoadTimeMs=function(a){j.set(h.LAST_LOAD_TIME_MS,a)};c.deleteLastLoadTimeMs=function(){j.remove(h.LAST_LOAD_TIME_MS)};c.getUserLocale=function(){var a=j.get(h.LOCALE);a=typeof a==="string"?a:null;return a};c.saveUserLocale=function(a){j.set(h.LOCALE,a)};c.deleteUserLocale=function(){j.remove(h.LOCALE)};c.getUserSessions=function(){var a=j.get(h.USER_SESSIONS),c=new Map();if(typeof a==="string"&&a.trim().charAt(0)==="{"){var d=a;try{d=JSON.parse(d);if(d){var e=Object.keys(d);for(var f=0;f<e.length;f++){var g=e[f];g=d[g];g=this.$2(g);c.set(g.id,g)}}}catch(a){b("TVLogger").logError("Failed to parse user session JSON from local storage",a.message)}}else if(a&&typeof a==="object"){g=a;try{e=Object.keys(g);for(var f=0;f<e.length;f++){d=e[f];a=g[d];d=this.$2(a);c.set(d.id,d)}}catch(a){b("TVLogger").logError("Failed to process user session object from local storage",a.message)}}return c};c.saveUserSessions=function(a){var b={};for(var a=a.entries(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e[0];e=e[1];b[e.id]=e}j.set(h.USER_SESSIONS,b)};c.deleteUserSessions=function(){j.remove(h.USER_SESSIONS)};c.reset=function(){};c.$2=function(a){a||g(0,2078);typeof a.accessToken==="string"||g(0,12321);typeof a.id==="string"||g(0,12322);typeof a.lastSeenTime==="number"||g(0,12318);typeof a.name==="string"||g(0,12319);typeof a.profilePictureURI==="string"||g(0,12320);return a};return a}();c=new a();d=c;e.exports=d}),null);
__d("TV2Logger",["ErrorMetadata","ErrorNormalizeUtils","ErrorPubSub","Promise","TV2LoggerDeviceUniqueID","TV2ODS","TVLogger","emptyFunction","getTV2DebugLog","setTV2Breakpoint","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g,h=function(a,c,d){b("TVLogger").overrideDeviceInfo(a),b("TVLogger").logEvent(c,d)},i=b("getTV2DebugLog")("[TV2Logger] ","error"),j=b("getTV2DebugLog")("[TV2Logger] ");if(j!==b("emptyFunction")){var k=h;h=function(a,b,c,d){j("logEventToBackend: "+b,{commsConnectorEvent:d,eventDescription:c,loggerDeviceInfo:a}),k(a,b,c,d)}}a=function(){function a(a){var c=a.getCommsConnectorDeviceInfo;this.$2=null;this.$1=function(){var a=c();a={appVersion:a.sdkVersion,duid:b("TV2LoggerDeviceUniqueID"),manufacturer:a.manufacturer,modelName:a.modelName,osVersion:a.osVersion,thirdPartyAppID:a.sdkAppID};return a}}var c=a.prototype;c.shutdownLoggerAsync=function(){if(this.$2)return this.$2;j("shutdownLoggerAsync");this.$2=b("Promise").race([b("Promise").resolve().then(function(){return b("TVLogger").shutdown()}),new(b("Promise"))(function(a){b("setTimeout")(a,3e3)})]).then(function(){j("shutdownLoggerAsync resolve")},function(){j("shutdownLoggerAsync reject")});return this.$2};c.logCommsConnectorEvent=function(a){switch(a.type){case"ready":break;case"sender_connected":h(this.$1(),"receiver_device_connected",JSON.stringify({from:a.senderID,connection_info:{ua:a.userAgent}}),a);break;case"sender_disconnected":h(this.$1(),"receiver_device_disconnected",JSON.stringify({from:a.senderID,connection_info:{ua:a.userAgent,reason:a.disconnectReason}}),a);break;case"message_sent":var c=null,d=!0;try{var e;c=(e=JSON.parse(typeof a.messageDataRaw==="string"?a.messageDataRaw:"null"))!=null?e:null;if(c!=null&&typeof c==="object"){e=function(b){switch(a.protocol){case"FBAPP_CAST_PROTOCOL":switch(b){case"status_update":return"receiver_sent_message.fbapp_cast.status_update";case"duration_change":return"receiver_sent_message.fbapp_cast.duration_change";case"experience_state":return"receiver_sent_message.fbapp_cast.experience_state";case"version_response":return"receiver_sent_message.fbapp_cast.version_response";default:return null}default:return null}}(c.type);e&&(d=!1,b("TV2ODS").bumpEntityKey(e))}}catch(a){}if(d){h(this.$1(),"receiver_sent_message",JSON.stringify({to:a.senderID,msg:{},data:(e=c)!=null?e:a.messageDataRaw}),a)}break;case"message_received":d=null;c=!0;try{d=(e=JSON.parse(typeof a.messageDataRaw==="string"?a.messageDataRaw:"null"))!=null?e:null;if(d!=null&&typeof d==="object"){e=function(b){switch(a.protocol){case"FBAPP_CAST_PROTOCOL":switch(b){case"get_experience_state":return"receiver_received_message.fbapp_cast.get_experience_state";case"version_request":return"receiver_received_message.fbapp_cast.version_request";default:return null}case"GOOGLE_CAST_MEDIA_PROTOCOL":switch(b){case"GET_STATUS":return"receiver_received_message.google_cast.GET_STATUS";default:return null}default:return null}}(d.type);e&&(c=!1,b("TV2ODS").bumpEntityKey(e))}}catch(a){}if(c){h(this.$1(),"receiver_received_message",JSON.stringify({from:a.senderID,data:(e=d)!=null?e:a.messageDataRaw}),a)}break;case"shutdown":break;default:a.type}};c.logTVEvent=function(a,b){b===void 0&&(b=null),h(this.$1(),a,b)};c.logTVError=function(a){var c,d=a.error;a=a.errorLocation;d.type="error";d.project="comet_tv_casting";c=(c=d.metadata)!=null?c:new(b("ErrorMetadata"))();var e=c.getAll().find(function(a){var b=a[0],c=a[1];a[2];return b==="COMET_VIDEO"&&c==="ERROR_LOCATION"});e=e?e[2]:void 0;e==null&&(c.addEntry("COMET_VIDEO","ERROR_LOCATION",a),e=a);d.metadata=c;a=b("ErrorNormalizeUtils").normalizeError(d);i("logTVError: "+a.message,a);b("setTV2Breakpoint")("Log error ("+e+")",a.metadata,a.stack);b("TVLogger").overrideDeviceInfo(this.$1());(g||(g=b("ErrorPubSub"))).reportNormalizedError(a)};c.overrideAccessToken=function(a){b("TVLogger").overrideAccessToken(a)};c.overrideClientAppID=function(a){b("TVLogger").overrideClientAppID(a)};c.setTvPlayerInstanceKey=function(a){b("TVLogger").setTvPlayerInstanceKey(a)};c.setTvPlayerVersion=function(a){b("TVLogger").setTvPlayerVersion(a)};return a}();e.exports=a}),null);
__d("exposeTV2CommsDebug",["Promise","TV2UniqueIDs","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var b=a.comms;a=a.debugConnector;window.__FB_TV_COMMS=b;a&&(window.__FB_TV_DEBUG_CONNECTOR=a)}}),null);
__d("getTV2DebugConnectorEnabled",["getTV2DebuggingEnabled","getTV2QueryStringCheatcode"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return b("getTV2DebuggingEnabled")()&&b("getTV2QueryStringCheatcode")("tv2_debug_connector")}}),null);
__d("useTV2GlobalSingletons",["ExecutionEnvironment","Promise","TV2Comms","TV2CommsChromecastV2Connector","TV2CommsDebugConnector","TV2CommsLoggerErrorGuard","TV2Logger","exposeTV2CommsDebug","getTV2DebugConnectorEnabled","setTV2Breakpoint"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=null;function h(){var a;if(g!=null)return g;b("setTV2Breakpoint")("Before Comms");var c=null;b("getTV2DebugConnectorEnabled")()&&(c=new(b("TV2CommsDebugConnector"))());var d=(a=c)!=null?a:new(b("TV2CommsChromecastV2Connector"))();a=new(b("TV2CommsLoggerErrorGuard"))(new(b("TV2Logger"))({getCommsConnectorDeviceInfo:function(){return d.getDeviceInfo()}}));var e=new(b("TV2Comms"))({connector:d,logger:a});b("exposeTV2CommsDebug")({comms:e,debugConnector:c});g={comms:e,logger:a};e.startComms();return g}b("ExecutionEnvironment").canUseDOM&&h();function a(){if(b("ExecutionEnvironment").canUseDOM)return h();throw new(b("Promise"))(function(){})}}),null);
__d("useTV2Comms",["useTV2GlobalSingletons"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){var a=b("useTV2GlobalSingletons")();a=a.comms;return a}}),null);
__d("useTV2Logger",["useTV2GlobalSingletons"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){var a=b("useTV2GlobalSingletons")();a=a.logger;return a}}),null);
__d("useTV2AppControllerDefinition",["TV2AppController","TV2AppState","react","useStable","useTV2Comms","useTV2Logger"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){var a=b("useTV2Comms")(),c=b("useTV2Logger")(),d=h.useState(b("TV2AppState").initialTV2AppState),e=d[0],f=d[1];d=b("useStable")(function(){return new(b("TV2AppController"))({comms:a,initialState:b("TV2AppState").initialTV2AppState,logger:c,scheduleSetReactState:f})});return{appController:d,appState:e}}}),null);
__d("TV2AppEnvironment.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelayEnvironmentProvider","TV2AppControllerContext.react","TV2AppState","TV2AppStateContext.react","cr:1697896","react","useLayoutEffect_SAFE_FOR_SSR","useTV2AppControllerDefinition","useTV2GlobalSingletons"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.disconnectedScreen,d=a.loadingScreen,e=a.mainScreen;a=a.shutdownScreen;var f=b("useTV2AppControllerDefinition")(),g=f.appController;f=f.appState;var i=b("TV2AppState").TV2AppStateSelectors.getRelayEnvironment(f),j=b("useTV2GlobalSingletons")(),k=j.comms;b("useLayoutEffect_SAFE_FOR_SSR")(function(){return k.attachApp(g)},[k,g]);var l;if(i!=null)l=e;else switch(f.lifecycleState){case"before_first_video_experience":l=d;break;case"running":l=c;break;case"shutdown":l=a;break;default:f.lifecycleState;l=d;break}j=b("cr:1697896")&&f.debugOverlayEnabled?h.jsx(b("CometErrorBoundary.react"),{description:"TV2AppDebugOverlayErrorBoundary",children:h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(b("TV2AppControllerContext.react").Provider,{value:g,children:h.jsx(b("TV2AppStateContext.react").Provider,{value:f,children:h.jsx(b("cr:1697896"),{relayEnvironmentFromAppEnvironment:i})})})})}):null;l=h.jsx(b("TV2AppControllerContext.react").Provider,{value:g,children:h.jsx(b("TV2AppStateContext.react").Provider,{value:f,children:l})});i!=null&&(l=h.jsx(b("CometRelayEnvironmentProvider"),{environment:i,children:l}));return h.jsxs(h.Fragment,{children:[h.jsx(b("CometPlaceholder.react"),{fallback:h.jsx(b("TV2AppControllerContext.react").Provider,{value:g,children:h.jsx(b("TV2AppStateContext.react").Provider,{value:f,children:d})}),children:l}),j]})}}),null);
__d("TV2CastingInstructionsText.react",["fbt","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react");function j(){return i.jsx("svg",{className:"geu9j6xj ikuhgqyd hyy9qwf3 n2m64tlx eit82fzg k11cnd9b bem9yqjk oqkq7c0x",viewBox:"0 0 70 55",children:i.jsx("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",children:i.jsx("g",{fill:"#FFFFFF",transform:"translate(-685.000000, -693.000000)",children:i.jsx("g",{transform:"translate(682.000000, 681.000000)",children:i.jsx("path",{d:"M47.5,58.5833333 L68.875,58.5833333 C71.0615833,58.5833333 72.8333333,56.8115833 72.8333333,54.625 L72.8333333,16.625 C72.8333333,14.4384167 71.0615833,12.6666667 68.875,12.6666667 L7.125,12.6666667 C4.93841667,12.6666667 3.16666667,14.4384167 3.16666667,16.625 L3.16666667,54.625 C3.16666667,56.8115833 4.93841667,58.5833333 7.125,58.5833333 L28.5,58.5833333 L28.5,63.3333333 L47.5,63.3333333 L47.5,58.5833333 Z M9.10416667,17.4166667 L66.8958333,17.4166667 C67.5513333,17.4166667 68.0833333,17.9486667 68.0833333,18.6041667 L68.0833333,52.6458333 C68.0833333,53.3013333 67.5513333,53.8333333 66.8958333,53.8333333 L9.10416667,53.8333333 C8.44866667,53.8333333 7.91666667,53.3013333 7.91666667,52.6458333 L7.91666667,18.6041667 C7.91666667,17.9486667 8.44866667,17.4166667 9.10416667,17.4166667 Z M19,63.3333333 L57,63.3333333 C57.874,63.3333333 58.5833333,64.0426667 58.5833333,64.9166667 C58.5833333,65.7906667 57.874,66.5 57,66.5 L19,66.5 C18.126,66.5 17.4166667,65.7906667 17.4166667,64.9166667 C17.4166667,64.0426667 18.126,63.3333333 19,63.3333333 Z"})})})})})}function a(){var a=i.jsx(j,{});return g._("Tap the {tvIcon} to play videos on your TV.",[g._param("tvIcon",a)])}}),null);
__d("TV2SplashAppLogoIcon.react",["react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){return h.jsx("svg",{className:"djdqplbw ffnxz3v9",viewBox:"0 0 128 128",children:h.jsx("path",{className:"b8iap26w",d:"M128,64 C128,28.65375 99.34625,0 64,0 C28.65375,0 0,28.65375 0,64 C0,95.94425 23.403875,122.42125 54,127.2225 L54,82.5 L37.75,82.5 L37.75,64 L54,64 L54,49.9 C54,33.86 63.55475,25 78.17375,25 C85.175875,25 92.5,26.25 92.5,26.25 L92.5,42 L84.42975,42 C76.479375,42 74,46.933375 74,51.994625 L74,64 L91.75,64 L88.9125,82.5 L74,82.5 L74,127.2225 C104.596125,122.42125 128,95.94425 128,64"})})}}),null);
__d("TV2SplashScreenLayout.react",["react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react");function a(a){var c=a.background;c=c===void 0?"transparent":c;a=a.children;return i.jsx("div",{className:(h||(h=b("stylex"))).dedupe({"bottom-1":"r6bmhgj3","box-sizing-1":"ibamfamh","end-1":"ly7beqam","position-1":"rtyr39pz","start-1":"j8p458pe","top-1":"erhf3nky","align-items-1":"dldryrhz","display-1":"mmelxcy8","flex-direction-1":"pawmy52i","justify-content-1":"tqh1ndx3","text-align-1":"rfzyj2vn"},c==="solid"?{"background-color-1":"ds3bc0hg"}:null,c==="overlay-on-media"?{"background-color-1":"j7k1qbxt"}:null),children:a})}}),null);
__d("TV2ErrorExperience.react",["fbt","ErrorNormalizeUtils","TV2CastingInstructionsText.react","TV2SplashAppLogoIcon.react","TV2SplashScreenLayout.react","TetraTextPairing.react","getTV2DebuggingEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react");function j(a){a=a.debugError;if(!b("getTV2DebuggingEnabled")())return null;var c=b("ErrorNormalizeUtils").normalizeError(a);return i.jsxs("div",{className:"ow03o3ze b2l2kj9x hjuveijz nknqfb1b nfj1gq91 ho5rb3hw",children:["[FB-Only] ",c.message,a.stack!=null?i.jsxs(i.Fragment,{children:[i.jsx("br",{}),a.stack.split("\n").slice(1,6).map(function(a){return a.replace(/\s+\(.+/,"")}).map(function(a,b){return i.jsxs(i.Fragment,{children:[i.jsx("br",{}),a]},b)})]}):null,a.componentStack!=null?i.jsxs(i.Fragment,{children:[i.jsx("br",{}),a.componentStack.split("\n").slice(1,6).map(function(a){return a.replace(/\s+\(.+/,"")}).map(function(a,b){return i.jsxs(i.Fragment,{children:[i.jsx("br",{}),a]},b)})]}):null]})}function a(a){var c=a.canCastAgain;a=a.debugError;return i.jsxs(b("TV2SplashScreenLayout.react"),{children:[i.jsx("div",{className:"nozs936t",children:i.jsx(b("TV2SplashAppLogoIcon.react"),{})}),i.jsx(b("TetraTextPairing.react"),{body:c?i.jsx(b("TV2CastingInstructionsText.react"),{}):null,headline:g._("Sorry, we're having trouble playing this video."),level:1,textAlign:"center"}),i.jsx(j,{debugError:a})]})}}),null);
__d("TV2IdleExperience.react",["TV2SplashAppLogoIcon.react","TV2SplashScreenLayout.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){return h.jsx(b("TV2SplashScreenLayout.react"),{children:h.jsx("div",{className:"",children:h.jsx(b("TV2SplashAppLogoIcon.react"),{})})})}}),null);
__d("useTV2AppState",["TV2AppStateContext.react","react","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){var a=h.useContext(b("TV2AppStateContext.react"));if(a==null)throw b("unrecoverableViolation")("useTV2AppState is called outside of TV2AppEnvironment","comet_tv_casting");return a}}),null);
__d("TV2ShutdownExperience.react",["TV2AppState","TV2SplashAppLogoIcon.react","TV2SplashScreenLayout.react","react","useTV2AppState"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){var a=b("useTV2AppState")();a=b("TV2AppState").TV2AppStateSelectors.getExperimentsConfig(a);a=a.shutdown_sequence_enabled;return h.jsx(b("TV2SplashScreenLayout.react"),{children:h.jsx("div",{className:""+(a?" dg5ygxkp aqatrqsq qgjgwroa dta5lunp":""),children:h.jsx(b("TV2SplashAppLogoIcon.react"),{})})})}}),null);
__d("TV2SplashLoadingIndicator.react",["react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.isVisible;return h.jsxs("div",{className:"jfde6mfb"+(a?"":" eqzuyqdb"),children:[h.jsx("div",{className:"t3188hw9 erhf3nky rtyr39pz nqg1eiw5 qd87k6k0 q60ssuku ixlgs2b1 aumeh6nf l3wn1enu d8jpzq8j nrfm4p27 a0bhed3n eb9bjeee mnafx7cg l4srxqd3"}),h.jsx("div",{className:"t3188hw9 erhf3nky rtyr39pz nqg1eiw5 qd87k6k0 q60ssuku ixlgs2b1 aumeh6nf l3wn1enu d8jpzq8j nrfm4p27 a0bhed3n eb9bjeee mnafx7cg qvvu971e"}),h.jsx("div",{className:"t3188hw9 erhf3nky rtyr39pz nqg1eiw5 qd87k6k0 q60ssuku ixlgs2b1 aumeh6nf l3wn1enu d8jpzq8j nrfm4p27 a0bhed3n eb9bjeee mnafx7cg io28brnt"})]})}}),null);
__d("TV2LoadingExperience.react",["TV2SplashAppLogoIcon.react","TV2SplashLoadingIndicator.react","TV2SplashScreenLayout.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){return h.jsxs(b("TV2SplashScreenLayout.react"),{children:[h.jsx("div",{className:"cq5h4be4",children:h.jsx(b("TV2SplashAppLogoIcon.react"),{})}),h.jsx(b("TV2SplashLoadingIndicator.react"),{isVisible:!0})]})}}),null);
__d("TV2CollectFeedTracking",[],(function(a,b,c,d,e,f){"use strict";f.collectFeedTrackingData=a;function a(a){var b=null;if(a){var c={tn:"","tn-debug":","},d={},e={};for(var f=0;f<a.length;f++){var g=JSON.parse(a[f]);if(!Array.isArray(g))for(var h in g)if(c[h]!==void 0){d[h]===void 0&&(d[h]=[]);var i=g[h];d[h].push(i)}else e[h]===void 0&&(e[h]=g[h])}for(var j in c)d[j]!==void 0&&(e[j]=d[j].join(c[j]));b=e}return b}}),null);
__d("TV2VideoCastRequestContext",["react"],(function(a,b,c,d,e,f){"use strict";var g;a=g||b("react");c=a.createContext(null);c.displayName="TV2VideoCastRequestContext";d=c;e.exports=d}),null);
__d("TV2FullscreenUpsellSplashScreen.react",["BaseImage.react","CometAspectRatioContainer.react","TV2SplashLoadingIndicator.react","TV2SplashScreenLayout.react","err","react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react"),j={container:{bottom:"r6bmhgj3",boxSizing:"ibamfamh",end:"ly7beqam",position:"rtyr39pz",start:"j8p458pe",top:"erhf3nky",opacity:"e3xjlbxn",transitionDuration:"a929t3la",transitionProperty:"q7bg3qfw",transitionTimingFunction:"ckysihgp"},containerHidden:{opacity:"h0nrl8y4",transitionDuration:"rbeym0l8"},image:{bottom:"r6bmhgj3",boxSizing:"ibamfamh",end:"ly7beqam",position:"rtyr39pz",start:"j8p458pe",top:"erhf3nky",width:"l88acuj8"}};function a(a){var c=a.aspectRatio;a=a.src;var d=i.useState("loading"),e=d[0],f=d[1];if(e==="error")throw b("err")("Failed to load image for TV2FullscreenUpsellSplashScreen: %s",a);return i.jsxs(b("TV2SplashScreenLayout.react"),{background:"overlay-on-media",children:[i.jsx("div",{className:(h||(h=b("stylex")))(j.container,e!=="loaded"&&j.containerHidden),children:i.jsx(b("CometAspectRatioContainer.react"),{aspectRatio:c,children:i.jsx(b("BaseImage.react"),{objectFit:"contain",onError:function(){f("error")},onLoad:function(){f("loaded")},src:a,xstyle:j.image})})}),e!=="loaded"?i.jsx(b("TV2SplashLoadingIndicator.react"),{isVisible:!0}):null]})}}),null);
__d("TV2VideoExperienceIdleScreen.react",["fbt","CometErrorBoundary.react","TV2CastingInstructionsText.react","TV2FullscreenUpsellSplashScreen.react","TV2SplashAppLogoIcon.react","TV2SplashScreenLayout.react","TetraTextPairing.react","getTV2DebuggingEnabled","getTV2QueryStringCheatcode","react","useTV2Logger"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react");function a(){var a=b("useTV2Logger")();i.useLayoutEffect(function(){a.logTVEvent("receiver_idled")},[a]);var c=i.jsxs(b("TV2SplashScreenLayout.react"),{background:"overlay-on-media",children:[i.jsx("div",{className:"nozs936t",children:i.jsx(b("TV2SplashAppLogoIcon.react"),{})}),i.jsx(b("TetraTextPairing.react"),{body:i.jsx(b("TV2CastingInstructionsText.react"),{}),headline:g._("Ready to watch."),level:1,textAlign:"center"})]}),d=b("getTV2DebuggingEnabled")()&&b("getTV2QueryStringCheatcode")("tv2_debug_tv_app_upsell_on_idle");return d?i.jsx(b("CometErrorBoundary.react"),{fallback:function(){return c},children:i.jsx(b("TV2FullscreenUpsellSplashScreen.react"),{aspectRatio:3840/2160,src:"/images/video/tv/tvAppCastingUpsell.jpg"})}):c}}),null);
__d("TV2VideoExperienceUpNextInterstitial.react",["CometAspectRatioContainer.react","CometFeedStoryTitleSection.react","CometRelay","CometRow.react","CometRowItem.react","CometTextWithEntitiesRelay.react","TV2SplashScreenLayout.react","TV2VideoExperienceQueueEntryState","TV2VideoExperienceUpNextInterstitial_video.graphql","TetraProfilePhotoForActor.react","TetraTextPairing.react","react","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function a(a){var c=a.countdownCounter,d=a.queueEntry;a=a.video;a=b("CometRelay").useFragment(g!==void 0?g:g=b("TV2VideoExperienceUpNextInterstitial_video.graphql"),a);if(a==null)throw b("unrecoverableViolation")("Missing up-next video data","comet_tv_casting");var e=a.creation_story,f=a.title;f=f!=null&&f.text!=null&&f.text!==""?i.jsx(b("CometTextWithEntitiesRelay.react"),{textWithEntities:f}):null;a=a==null?void 0:(a=a.creation_story)==null?void 0:(a=a.actors)==null?void 0:a[0];d=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getPreferredThumbnailURL(d);return i.jsx(b("TV2SplashScreenLayout.react"),{children:i.jsx(b("TetraTextPairing.react"),{body:i.jsxs(i.Fragment,{children:[d!=null?i.jsx(b("CometRow.react"),{align:"center",verticalAlign:"center",children:i.jsx(b("CometRowItem.react"),{children:i.jsx("div",{className:"rdrxhrw2 jfde6mfb",children:i.jsx(b("CometAspectRatioContainer.react"),{aspectRatio:16/9,children:i.jsx("div",{className:"hvsw9q9u ld13slqy n94mmcac t17lwaon erhf3nky j8p458pe rtyr39pz ly7beqam ibamfamh r6bmhgj3",style:{backgroundImage:"url("+d+")"}})})})})}):null,a!=null?i.jsxs(b("CometRow.react"),{align:"center",verticalAlign:"center",children:[i.jsx(b("CometRowItem.react"),{children:i.jsx(b("TetraProfilePhotoForActor.react"),{actor:a,noHovercard:!0,shape:"circle",size:60})}),e!=null?i.jsx(b("CometRowItem.react"),{children:i.jsx(b("CometFeedStoryTitleSection.react"),{story:e})}):null]}):null]}),headline:i.jsx(i.Fragment,{children:f!=null?i.jsx(b("CometRow.react"),{align:"center",verticalAlign:"center",children:i.jsx(b("CometRowItem.react"),{children:f})}):null}),level:1,meta:i.jsx(i.Fragment,{children:i.jsxs("div",{children:["NEXT VIDEO (",c,")"]})}),metaLocation:"above",textAlign:"center"})})}}),null);
__d("TV2VideoPlayerPlaybackTimer.react",["VideoPlayerHooks","getFormattedTimestamp","react","useLiveRewindUtils"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.displayMode;var c=b("VideoPlayerHooks").useIsLive(),d=b("VideoPlayerHooks").useIsLiveRewindActive(),e=b("useLiveRewindUtils").useLiveRewindSeekableStartTime();d=c&&!d;var f=b("VideoPlayerHooks").useCurrentTimeThrottled(200),g=b("VideoPlayerHooks").useDuration();c&&(g-=e,f-=e);Number.isFinite(g)||(g=null);c=null;switch(a){case"elapsed":c=h.jsx("span",{children:b("getFormattedTimestamp")(f)});break;case"remaining":d?c=null:g==null?c=null:c=h.jsxs("span",{children:["-",b("getFormattedTimestamp")(g-f)]});break;default:a,c=null}return h.jsx("div",{className:"eok3thmg q3kw09pr jgu6gbzx l1vvmm7k ndx6ecjo lrv62206 igmvaqqz spehibfs hawv4yyn tdkftfrm dhqz6n8s paeco5l5",children:c})}}),null);
__d("useTV2AppController",["TV2AppControllerContext.react","react","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){var a=h.useContext(b("TV2AppControllerContext.react"));if(a==null)throw b("unrecoverableViolation")("useTV2AppController is called outside of TV2AppEnvironment","comet_tv_casting");return a}}),null);
__d("TV2VideoPlayerScrubber.react",["CometVisualCompletionAttributes","TV2VideoCastRequestContext","VideoPlayerHooks","VideoPlayerPointerDrag","VideoPlayerUserInteractionCounter","react","stylex","useDebouncedValue","useLiveRewindUtils","usePrevious","useTV2AppController"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react");function j(a,b){return Math.min(a>0?b/a:0,1)}function k(a){a=a.isVisible;return i.jsx("div",{className:(h||(h=b("stylex"))).dedupe({"background-color-1":"d8jpzq8j","border-top-start-radius-1":"l8y6z2fb","border-top-end-radius-1":"ibmvg8hh","border-bottom-end-radius-1":"s96bes7j","border-bottom-start-radius-1":"k9hbnodu","box-shadow-1":"kj6o1k55","display-1":"b8i52f4p","height-1":"f2k0fdla","position-1":"rtyr39pz","right-1":"d8jh86yo","top-1":"loa3aoo1","transform-0.1":"peeax6ai","width-1":"d2db4y20","z-index-1":"t52kikfp"},a?{"display-1":"a7hnopfp"}:null)})}function l(a){var c=a.currentTime,d=a.duration,e=b("usePrevious")(c),f=b("useTV2AppController")(),g=(a=(a=i.useContext(b("TV2VideoCastRequestContext")))==null?void 0:a.videoCastRequestID)!=null?a:null;a=b("VideoPlayerPointerDrag").usePointerDragResizeObserver();var h=a.invalidateRootRect,j=a.rootRectRef;a=a.rootSizeRefCallback;var k=i.useState(!1),l=k[0],m=k[1];k=i.useState(0);var n=k[0],o=k[1];k=i.useState(!1);var p=k[0],q=k[1];i.useEffect(function(){c!==e&&q(!1)},[c,e]);k=b("VideoPlayerPointerDrag").usePointerDrag({onDragCancel:function(a){},onDragEnd:function(a){a=b("VideoPlayerPointerDrag").computePointerOffsetRatio(a,j.current);if(!a)return;o(a.ratioX);a=a.ratioX*d;g!=null&&(q(!0),f.handlePlaybackCommand({seekTargetPosition:a,source:"from_user",type:"user_seek_current_video",videoCastRequestID:g}))},onDragMove:function(a){a=b("VideoPlayerPointerDrag").computePointerOffsetRatio(a,j.current);if(!a)return;o(a.ratioX)},onDragStart:function(a){h();a=b("VideoPlayerPointerDrag").computePointerOffsetRatio(a,j.current);if(!a)return;o(a.ratioX)}});var r=k.isDragging;k=k.rootProps;var s=i.useCallback(function(){m(!0)},[]),t=i.useCallback(function(){m(!1)},[]);return{isDragging:r,isHovering:l,isWaitingForSeek:p,pointerOffsetRatio:n,rootProps:babelHelpers["extends"]({},k,{onMouseEnter:s,onMouseLeave:t,ref:a})}}function a(a){var c;a=a.onUserInteraction;var d=(c=b("VideoPlayerHooks")).useIsLive(),e=c.useIsLiveRewindActive(),f=b("useLiveRewindUtils").useLiveRewindSeekableStartTime(),g=c.useCurrentTimeThrottled(200);c=c.useDuration();d&&(c-=f,g-=f);f=b("VideoPlayerHooks").useBufferEnd();var m=l({currentTime:g,duration:c}),n=m.isDragging,o=m.isHovering,p=m.isWaitingForSeek,q=m.pointerOffsetRatio;m=m.rootProps;o=o||n;b("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_scrubber",o,a);o=!0;a=n||p?q:d&&!e?1:j(c,g);a=b("useDebouncedValue")(a,100);n=j(c,f);return i.jsxs("div",babelHelpers["extends"]({},m,{className:"l88acuj8 v4nkex5m jfde6mfb sufjt6sl b0vado9g",children:[i.jsxs("div",{className:"v4nkex5m iulewiga d8jh86yo rtyr39pz myz9py77 asv7rius nqg1eiw5 sufjt6sl a6hojz8a chgsmxdt l7ar1iao oe1iw8oh bhlcnlo3 e3kf7p9i",children:[i.jsx("div",babelHelpers["extends"]({className:"rtyr39pz sufjt6sl chgsmxdt l7ar1iao oe1iw8oh bhlcnlo3"+(d?"":" errbzpr9")},b("CometVisualCompletionAttributes").IGNORE,{style:{width:(100*n).toFixed(5)+"%"}})),i.jsx("div",babelHelpers["extends"]({className:(h||(h=b("stylex"))).dedupe({"background-color-1":"cihfjep0","border-top-start-radius-1":"bhlcnlo3","border-top-end-radius-1":"oe1iw8oh","border-bottom-end-radius-1":"l7ar1iao","border-bottom-start-radius-1":"chgsmxdt","height-1":"sufjt6sl","position-1":"rtyr39pz","user-select-1":"v4nkex5m"},d&&!e?{"background-color-1":"tw202pcf"}:null,d&&e?{"background-color-1":"rwd05vvw"}:null)},b("CometVisualCompletionAttributes").IGNORE,{style:{width:(100*a).toFixed(5)+"%"}}))]}),i.jsx("div",babelHelpers["extends"]({className:"rtyr39pz sufjt6sl"},b("CometVisualCompletionAttributes").IGNORE,{style:{width:(100*a).toFixed(5)+"%"},children:i.jsx(k,{isVisible:o})}))]}))}}),null);
__d("useTV2VideoPlayerControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","setTimeout"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=5e3;function a(){var a,c=void 0,d=!0,e=b("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter(),f=e.ongoingInteractionsCount;e=e.onUserInteraction;var g=(a=b("VideoPlayerHooks")).useEnded(),j=a.useIsHovering(),k=a.usePaused(),l=a.useIsMouseIdle(),m=a.useSeeking();a=a.useVideoPlaybackEnded();var n=b("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();b("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",j&&!l,e);j=h.useState(d===!0);var o=j[0],p=j[1];h.useEffect(function(){if(!k&&o){var a=b("setTimeout")(function(){p(!1)},i);return function(){b("clearTimeout")(a)}}},[o,k]);c===!0||c===!1?l=c:n?l=!1:f>0||o?l=!0:k||m?l=g?a:!0:l=!1;return{isControlsVisible:l,onUserInteraction:e}}}),null);
__d("getViewportUnits",["getViewportDimensions"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){var a=b("getViewportDimensions")(),c=a.height*.01;a=a.width*.01;return{vh:c,vw:a}}}),null);
__d("useViewportUnits",["getViewportUnits","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(){var a=h.useState(function(){return b("getViewportUnits")()}),c=a[0],d=a[1];h.useLayoutEffect(function(){var a=function(){d(b("getViewportUnits")())};a();window.addEventListener("resize",a);return function(){window.removeEventListener("resize",a)}},[]);return c}}),null);
__d("TV2VideoPlayerControls.react",["TV2VideoPlayerPlaybackTimer.react","TV2VideoPlayerScrubber.react","VideoPlayerControlsGroups.react","VideoPlayerHooks","react","stylex","useDebouncedValue","useTV2VideoPlayerControlsVisibility","useViewportUnits"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react");function j(a){var c=a.children;a=a.isVisible;var d=b("useDebouncedValue")(a,a===!0?0:3e3),e=b("VideoPlayerHooks").useVideoPlayerCaptionsReservationActions(),f=e.release,g=e.reserve;e=b("useViewportUnits")();var j=e.vh;i.useLayoutEffect(function(){var a=[];Boolean(d)&&(a=[g({location:"bottom",size:5*j})]);return function(){a.forEach(function(a){return f(a)})}},[d,j,g,f]);return i.jsx("div",{className:(h||(h=b("stylex"))).dedupe({"align-items-1":"dldryrhz","bottom-1":"r6bmhgj3","direction-1":"dhqz6n8s","display-1":"mmelxcy8","flex-direction-1":"hvb37ej4","position-1":"rtyr39pz","transition-property-1":"lbf5yqf1","transition-timing-function-1":"mkr42dse","width-1":"l88acuj8"},a===!1?{"opacity-1":"h0nrl8y4","pointer-events-1":"a974shg9","transition-duration-1":"slrpv0bf","visibility-1":"eqzuyqdb"}:null,a===!0?{"opacity-1":"e3xjlbxn","transition-duration-1":"rbeym0l8"}:null),children:c})}function a(){var a=b("useTV2VideoPlayerControlsVisibility")(),c=a.isControlsVisible;a=a.onUserInteraction;return i.jsxs(j,{isVisible:c,children:[i.jsx(b("VideoPlayerControlsGroups.react").Contracted,{isVisible:!0,children:i.jsx(b("TV2VideoPlayerPlaybackTimer.react"),{displayMode:"elapsed"})}),i.jsx(b("VideoPlayerControlsGroups.react").Expanded,{isVisible:!0,children:i.jsx(b("TV2VideoPlayerScrubber.react"),{onUserInteraction:a})}),i.jsx(b("VideoPlayerControlsGroups.react").Contracted,{isVisible:!0,children:i.jsx(b("TV2VideoPlayerPlaybackTimer.react"),{displayMode:"remaining"})})]})}}),null);
__d("TV2VideoPlayerOverscanPadding.react",["VideoPlayerHooks","VideoPlayerInteractionOverlay.react","react","useViewportUnits"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i={root:{marginTop:"fblnnmll",marginEnd:"etbae7ak",marginBottom:"gj3c25r9",marginStart:"df7f6uie"}};function a(a){a=a.children;var c=b("VideoPlayerHooks").useVideoPlayerCaptionsReservationActions(),d=c.release,e=c.reserve;c=b("useViewportUnits")();var f=c.vh,g=c.vw;h.useLayoutEffect(function(){var a=[];a=[e({location:"top",size:10*f}),e({location:"right",size:10*g}),e({location:"bottom",size:10*f}),e({location:"left",size:10*g})];return function(){a.forEach(function(a){return d(a)})}},[g,f,e,d]);return h.jsx(b("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{xstyle:i.root,children:a})}}),null);
__d("useTV2ExperimentsRelayToAppState",["CometRelay","TV2ExperimentsConfig","TV2MemoryUsageLoggerLazy","react","recoverableViolation","useTV2AppController","useTV2ExperimentsRelayToAppState_video.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function a(a){var c=b("useTV2AppController")();a=b("CometRelay").useFragment(g!==void 0?g:g=b("useTV2ExperimentsRelayToAppState_video.graphql"),a);var d=a.connected_tv_cast_receiver_v2_experiments;i.useLayoutEffect(function(){var a=null;try{a=b("TV2ExperimentsConfig").parseFromGraphQL(d,"Video.connected_tv_cast_receiver_v2_experiments")}catch(a){b("recoverableViolation")("Failed to parse experiments: "+a.message,"comet_tv_casting",a)}a!=null&&(c.handleAppEvent({experimentsConfig:a,source:"from_app",type:"experiments_config_received_from_relay"}),a.memory_usage_logging&&b("TV2MemoryUsageLoggerLazy").loadAndInit())},[c,d])}}),null);
__d("useTV2VideoExperienceUpNextInterstitialCountdown",["react","useInterval","usePrevious"],(function(a,b,c,d,e,f){"use strict";f.useTV2VideoExperienceUpNextInterstitialCountdown=a;f.useTV2VideoExperienceUpNextInterstitialCountdownCallbacks=c;var g,h=g||b("react");function i(a){var b=a.countdownClockTimestamp;a=a.upNextExpirationTimestampMs;return a==null?0:Math.max(0,Math.ceil((a-b)/1e3))}function a(a){a=a.upNextInterstitialState;var c=h.useReducer(function(a,b){return a==null?b:Math.max(a,b)},Date.now()),d=c[0],e=c[1];c=a==null?void 0:a.upNextExpirationTimestampMs;a=i({countdownClockTimestamp:d,upNextExpirationTimestampMs:c});h.useLayoutEffect(function(){e(Date.now())},[c]);b("useInterval")(a>0?function(){e(Date.now())}:null,200);return a}function c(a){var c=a.countdownCounter,d=a.onCountdownComplete,e=a.onCountdownShown,f=b("usePrevious")(c);h.useLayoutEffect(function(){(f==null||f<=0)&&c>0?e():f!=null&&f>0&&!(c>0)&&d()},[c,f,d,e])}}),null);
__d("useTV2VideoPlayerLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","react","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("deferredLoadComponent")(b("requireDeferredForDisplay")("TV2VideoPlayerSpinner.react").__setRef("useTV2VideoPlayerLoadingIndicators")),j=b("deferredLoadComponent")(b("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useTV2VideoPlayerLoadingIndicators"));function a(){var a=b("useVideoPlayerDefaultLoadingIndicatorsLogic")(),c=a.loadingIndicatorType;a=a.spinnerVisible;var d=h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(j,{})});a=h.jsx(i,{isVisible:a});var e=null;switch(c){case"spinner":e=a;break;case"live_video_interrupted_overlay":e=d;break;case"none":default:e=a}return{loadingIndicatorElement:e,loadingIndicatorType:c}}}),null);
__d("TV2VideoExperience.react",["CometPlaceholder.react","CometRelay","ErrorMetadata","TV2CollectFeedTracking","TV2LoadingExperience.react","TV2LoggerDeviceUniqueID","TV2LoggerSessionID","TV2VideoCastRequestContext","TV2VideoExperienceIdleScreen.react","TV2VideoExperienceQuery","TV2VideoExperienceQueueEntryState","TV2VideoExperienceUpNextInterstitial.react","TV2VideoExperience_video.graphql","TV2VideoPlayerControls.react","TV2VideoPlayerOverscanPadding.react","VideoPlayerHooks","VideoPlayerRelay.react","VideoPlayerSurface.react","err","getTV2DebuggingOnDesktop","react","setTV2Breakpoint","unrecoverableViolation","useLiveRewindUtils","useTV2AppController","useTV2ExperimentsRelayToAppState","useTV2Logger","useTV2VideoExperienceUpNextInterstitialCountdown","useTV2VideoPlayerLoadingIndicators"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react");function j(a){var c=a.isBackgrounded,d=a.queueEntry,e=a.videoCastRequest,f=b("useTV2AppController")(),g=(a=b("VideoPlayerHooks")).useInstanceKey(),h=a.useController(),j=b("useLiveRewindUtils").useLiveRewindScrub(),k=d.queueEntryID,l=e.videoCastRequestID,m=e.appID,n=e.videoChannelID,o=e.videoID,p=i.useMemo(function(){return b("TV2CollectFeedTracking").collectFeedTrackingData(e.trackingCodes)},[e]),q=a.useIsLive(),r=b("useTV2Logger")(),s=i.useRef(!1),t=i.useRef(q);i.useLayoutEffect(function(){t.current=q},[q]);var u=i.useRef(d.chainingDepthLevel),v=i.useRef(d.chainingSessionID);i.useLayoutEffect(function(){v.current=d.chainingSessionID},[d.chainingSessionID]);i.useEffect(function(){var a=function(){var a=h.getCurrentState();a=a.playing;!s.current&&a&&r.logTVEvent("receiver_playback_started","");s.current=a};a();var b=h.subscribe(a);return function(){b.remove()}},[h,r]);i.useLayoutEffect(function(){h.setAdditionalLogData("cast_client_app_id",m)},[h,m]);i.useLayoutEffect(function(){h.setAdditionalLogData("video_channel_id",n)},[h,n]);i.useLayoutEffect(function(){h.setAdditionalLogData("tv_session_id",b("TV2LoggerSessionID"))},[h]);i.useLayoutEffect(function(){h.setAdditionalLogData("device_id",b("TV2LoggerDeviceUniqueID"))},[h]);i.useLayoutEffect(function(){p!=null&&h.setAdditionalLogData("ft",p)},[h,p]);var w=i.useRef(!1);i.useLayoutEffect(function(){function a(a){if(a.ended)return"ended";else if(a.seeking)return"seeking";else if(a.paused)return"paused";else if(a.playing||a.stalling)return"play";else return"unknown"}function b(b,c,d){return{bufferEnd:b.bufferEnd,duration:b.duration,isLive:t.current,playerInstanceKey:g,playerVersion:b.playerVersion,position:c,state:a(b),videoID:d}}var c=b(h.getCurrentState(),h.getPlayheadPosition(),o);f.handleAppEvent({queueEntryID:k,source:"from_player",type:"video_cast_player_mounted",videoCastRequestID:l,videoPlayerState:c});var d=f.addPlaybackCommandHandler(function(a){if(a.videoCastRequestID===l)switch(a.type){case"user_pause_current_video":w.current=!0;h.pause("user_initiated");break;case"user_unpause_current_video":w.current=!1;h.play("user_initiated");break;case"user_seek_current_video":var b=t.current;a=a.seekTargetPosition;h.scrubBegin();!b?h.scrubEnd(a):j(a);break}});h.setAdditionalLogData("video_chaining_session_id",v.current!=null?String(v.current):null);h.setAdditionalLogData("video_chaining_depth_level",u.current);var e=h.subscribe(function(){var a=b(h.getCurrentState(),h.getPlayheadPosition(),o);(a.position!==c.position||a.state!==c.state)&&f.handleAppEvent({queueEntryID:k,source:"from_player",type:"video_cast_player_state_changed",videoCastRequestID:l,videoPlayerState:a});a.duration!==c.duration&&f.handleAppEvent({queueEntryID:k,source:"from_player",type:"video_cast_player_duration_changed",videoCastRequestID:l,videoPlayerState:a});c=a});return function(){e.remove(),d()}},[f,h,g,j,k,l,o]);i.useLayoutEffect(function(){if(!c){w.current||(b("getTV2DebuggingOnDesktop")()||h.setMuted(!1,"product_initiated"),h.play("product_initiated"));return function(){h.pause("product_initiated")}}},[h,c]);var x=a.useCaptionsLoaded();i.useLayoutEffect(function(){h.setCaptionsVisible(x)},[h,x]);a=b("useTV2VideoPlayerLoadingIndicators")();a=a.loadingIndicatorElement;return i.jsx(b("VideoPlayerSurface.react"),{children:i.jsx(b("TV2VideoCastRequestContext").Provider,{value:e,children:i.jsxs(b("TV2VideoPlayerOverscanPadding.react"),{children:[a,i.jsx(b("TV2VideoPlayerControls.react"),{})]})})})}function k(a){var c,d=a.isBackgrounded,e=a.isHidden,f=a.queueEntry;a=a.video;var g=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoCastRequest(f);return i.jsx("div",{className:"erhf3nky j8p458pe rtyr39pz ly7beqam ibamfamh r6bmhgj3"+(e?" eqzuyqdb":""),children:i.jsx(b("VideoPlayerRelay.react"),{accessToken:g.accessToken,canAutoplay:"dangerously_disable_autoplay_management",disableLoadingIndicator:!0,doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn:!0,playerOriginOverride:(c=g.playerOrigin)!=null?c:"connected_tv_player",portalingEnabled:!1,source_VPL_LOGGING_HACK:"tv",startTimestamp:g.startTimestamp,subOrigin:(c=g.playerSuborigin)!=null?c:"tv",video:a,children:e?null:i.jsx(j,{isBackgrounded:d,queueEntry:f,videoCastRequest:g})})},"videoPlayerContainer")}function l(a,c){c=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoID(c);a=b("err")(a);a.metadata=new(b("ErrorMetadata"))();a.metadata.addEntries(["COMET_VIDEO","VIDEO_ID",String(c)]);throw b("unrecoverableViolation")(a.message,"comet_tv_casting",{error:a})}function a(a){var c=a.isIdle,d=a.queueEntry;a=b("TV2VideoExperienceQueueEntryState").TV2VideoExperienceQueueEntryStateSelectors.getVideoExperienceQueryReference(d);if(a==null)throw l("Attempted to render TV2VideoExperience without videoExperienceQueryReference",d);if("isDisposed"in a&&a.isDisposed===!0)throw l("Attempted to render TV2VideoExperience with a disposed videoExperienceQueryReference",d);a=b("TV2VideoExperienceQuery").useTV2VideoExperienceQuery(a);a=b("CometRelay").useFragment(g!==void 0?g:g=b("TV2VideoExperience_video.graphql"),a.video);if(!a)throw l("Failed to load TV2VideoExperience_video fragment",d);b("useTV2ExperimentsRelayToAppState")(a);var e=b("useTV2AppController")(),f=b("useTV2VideoExperienceUpNextInterstitialCountdown").useTV2VideoExperienceUpNextInterstitialCountdown({upNextInterstitialState:d.upNextInterstitialState});b("useTV2VideoExperienceUpNextInterstitialCountdown").useTV2VideoExperienceUpNextInterstitialCountdownCallbacks({countdownCounter:f,onCountdownComplete:function(){e.handleAppEvent({queueEntryID:d.queueEntryID,source:"from_app",type:"up_next_countdown_complete"})},onCountdownShown:function(){e.handleAppEvent({queueEntryID:d.queueEntryID,source:"from_app",type:"up_next_countdown_shown"})}});b("setTV2Breakpoint")("TV2VideoExperience render",d);return i.jsxs(i.Fragment,{children:[f>0?i.jsx(b("CometPlaceholder.react"),{fallback:null,children:i.jsx(b("TV2VideoExperienceUpNextInterstitial.react"),{countdownCounter:f,queueEntry:d,video:a})}):null,i.jsx(b("CometPlaceholder.react"),{fallback:null,children:i.jsx(k,{isBackgrounded:c,isHidden:f>0,queueEntry:d,video:a})}),c?i.jsx(b("CometPlaceholder.react"),{fallback:i.jsx(b("TV2LoadingExperience.react"),{}),children:i.jsx(b("TV2VideoExperienceIdleScreen.react"),{})}):null]})}}),null);
__d("TV2VideoExperienceWithQueue.react",["CometPlaceholder.react","TV2LoadingExperience.react","TV2VideoExperience.react","TV2VideoExperienceState","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.videoExperienceState;var c=b("TV2VideoExperienceState").TV2VideoExperienceStateSelectors.getCurrentQueueEntry(a);return h.jsx(b("CometPlaceholder.react"),{fallback:h.jsx(b("TV2LoadingExperience.react"),{}),children:h.jsx(b("TV2VideoExperience.react"),{isIdle:a.isIdle,queueEntry:c},c.queueEntryID)})}}),null);
__d("TV2AppRoot.react",["CometErrorBoundary.react","CometPlaceholder.react","TV2AppState","TV2ErrorExperience.react","TV2IdleExperience.react","TV2ShutdownExperience.react","TV2VideoExperienceWithQueue.react","deferredLoadComponent","react","requireDeferred","unrecoverableViolation","useTV2AppController","useTV2AppState","useTV2Logger"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("deferredLoadComponent")(b("requireDeferred")("TV2ToastsUI.react").__setRef("TV2AppRoot.react"));function j(a){a=a.experience;switch(a.type){case"idle_experience":return h.jsx(b("TV2IdleExperience.react"),{});case"video_experience":return h.jsx(b("TV2VideoExperienceWithQueue.react"),{videoExperienceState:a});case"shutdown_experience":return h.jsx(b("TV2ShutdownExperience.react"),{});default:a.type;throw b("unrecoverableViolation")("Unexpected experience type "+a.type,"comet_tv_casting")}}function a(){var a=b("useTV2AppState")(),c=b("useTV2AppController")(),d=b("useTV2Logger")();h.useEffect(function(){d.logTVEvent("receiver_experience_manager_loaded","")},[d]);var e=b("TV2AppState").TV2AppStateSelectors.getExperimentsConfig(a);return h.jsxs(h.Fragment,{children:[h.jsx(b("CometErrorBoundary.react"),{fallback:function(a){return h.jsx(b("TV2ErrorExperience.react"),{canCastAgain:!0,debugError:a})},forceResetErrorCount:a.experienceReactKey,onError:function(a){c.handleAppEvent({error:a,source:"from_app",type:"experience_react_error"})},children:h.jsx(j,{experience:a.experience},a.experienceReactKey)}),e.toasts_enabled?h.jsx(b("CometErrorBoundary.react"),{fallback:function(){return null},children:h.jsx(b("CometPlaceholder.react"),{fallback:null,children:h.jsx(i,{toasts:a.toasts})})}):null]})}}),null);
__d("useTV2CometAppLayout_HACK",["cx","ExecutionEnvironment","react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react"),j=!1;function k(){if(b("ExecutionEnvironment").canUseDOM){var a=document.documentElement;a&&a.classList.remove("_8ykn");a=document.head;if(!j&&a){var c=["#facebook body { --header-height: 0vh !important; }",'#facebook div[data-pagelet="root"] > div > div[role="banner"] { display: none !important; }','#facebook div[data-cookiebanner="banner"] { display: none !important; }'],d=document.createElement("style");d.setAttribute("type","text/css");d.setAttribute("data-tv2","true");a.appendChild(d);a=d.sheet;if(a)while(c.length)d.sheet.insertRule(c.pop(),0);j=!0}}}k();function a(){i.useLayoutEffect(function(){k()},[])}}),null);
__d("TV2MainReactRoot.react",["CometErrorBoundary.react","CometPlaceholder.react","CometTheme.react","RecoverableViolationWithComponentStack.react","TV2AppEnvironment.react","TV2ErrorExperience.react","TV2IdleExperience.react","TV2LoadingExperience.react","TV2ShutdownExperience.react","deferredLoadComponent","react","requireDeferredForDisplay","setTV2Breakpoint","useTV2CometAppLayout_HACK"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react"),i=b("deferredLoadComponent")(b("requireDeferredForDisplay")("TV2AppRoot.react").__setRef("TV2MainReactRoot.react"));function j(a){a=a.children;return h.jsx(b("CometTheme.react"),{theme:"dark",children:h.jsx("div",{className:"t52kikfp iaxvr6zz erhf3nky d8jh86yo cud4ty6d nqg1eiw5 awv48zem lu1fskkp r6bmhgj3 ds3bc0hg",id:"facebook-tv-cast-app",children:a})})}function a(a){var c=a.authenticated;a=a.debugging;b("useTV2CometAppLayout_HACK")();return h.jsx(j,{children:h.jsx(b("CometErrorBoundary.react"),{fallback:function(a){return h.jsx(b("TV2ErrorExperience.react"),{canCastAgain:!1,debugError:a})},onError:function(a){b("setTV2Breakpoint")("ErrorBoundary "+a.stack)},children:h.jsxs(b("CometPlaceholder.react"),{fallback:h.jsx(b("TV2LoadingExperience.react"),{}),children:[h.jsx(b("TV2AppEnvironment.react"),{disconnectedScreen:h.jsx(b("TV2IdleExperience.react"),{}),loadingScreen:h.jsx(b("TV2LoadingExperience.react"),{}),mainScreen:h.jsx(i,{}),shutdownScreen:h.jsx(b("TV2ShutdownExperience.react"),{})}),c?h.jsx(b("RecoverableViolationWithComponentStack.react"),{errorMessage:a?"You are authenticated, and this is different from the Chromecast environment. Prefer incognito mode for development.":"Unexpected authenticated user while not debugging.",projectName:"comet_tv_casting"}):null]})})})}}),null);
__d("TV2ToastAddedToQueueIcon.react",["react","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react"),j={color:{fill:"b8iap26w"},root:{},shadow:{filter:"pqcu69gg"}};function a(a){a=a.xstyle;return i.jsx("svg",{className:(h||(h=b("stylex")))(j.root,j.shadow,a),viewBox:"0 0 128 128",children:i.jsx("g",{stroke:"none",children:i.jsxs("g",{transform:"translate(4.000000, 4.000000)",children:[i.jsx("path",{className:h(j.color),d:"M60,119.5 C27.1390574,119.5 0.5,92.8609426 0.5,60 C0.5,27.1390574 27.1390574,0.5 60,0.5 C92.8609426,0.5 119.5,27.1390574 119.5,60 C119.5,92.8609426 92.8609426,119.5 60,119.5 Z M60,112.5 C88.9949494,112.5 112.5,88.9949494 112.5,60 C112.5,31.0050506 88.9949494,7.5 60,7.5 C31.0050506,7.5 7.5,31.0050506 7.5,60 C7.5,88.9949494 31.0050506,112.5 60,112.5 Z"}),i.jsx("rect",{className:h(j.color),height:"64",rx:"4",width:"8",x:"56",y:"28"}),i.jsx("rect",{className:h(j.color),height:"64",rx:"4",transform:"translate(60.000000, 60.000000) rotate(-270.000000) translate(-60.000000, -60.000000) ",width:"8",x:"56",y:"28"})]})})})}}),null);
__d("TV2ToastUI.react",["BaseImage.react","CometAspectRatioContainer.react","CometCard.react","CometPlaceholder.react","TV2ToastAddedToQueueIcon.react","clearTimeout","react","setTimeout","stylex","useTV2AppController"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=g||b("react"),j=10/(16/9)+1,k=3e3,l=400,m={icon:{boxSizing:"ibamfamh",left:"k0kuzabz",position:"rtyr39pz",top:"loa3aoo1",transform:"mohukz8u",width:"ddycy6uj"},image:{bottom:"r6bmhgj3",boxSizing:"ibamfamh",end:"ly7beqam",position:"rtyr39pz",start:"j8p458pe",top:"erhf3nky",backgroundPosition:"n94mmcac",backgroundRepeat:"ld13slqy",backgroundSize:"hvsw9q9u",height:"c4qq85pv",width:"l88acuj8"},overlay:{bottom:"r6bmhgj3",boxSizing:"ibamfamh",end:"ly7beqam",position:"rtyr39pz",start:"j8p458pe",top:"erhf3nky",color:"paeco5l5"},root:{end:"ia8aga6m",position:"cud4ty6d",top:"jc8o0lrt",transitionDuration:"psadcatw",transitionProperty:"to2f9voq",transitionTimingFunction:"al0y14uw",width:"cpwogc4v",willChange:"mfuduzxf"}};function a(a){var c=a.moveFromIndex,d=a.moveToIndex;a=a.toast;var e=b("useTV2AppController")(),f=a.toastID,g=a.toastImageURL,n=a.toastState,o=null;switch(a.type){case"added_to_queue":o=i.jsx(b("TV2ToastAddedToQueueIcon.react"),{xstyle:m.icon});break;default:a.type}a=i.useState({opacity:0,transform:"translateY("+20*j+"vw) scale(1)"});var p=a[0],q=a[1];i.useEffect(function(){var a=b("setTimeout")(function(){q(d===Number.NEGATIVE_INFINITY?{opacity:0,transform:"translateY("+-2*j+"vw) scale(1)",transitionDuration:((.7*c+1)*l).toFixed(0)+"ms"}:{opacity:1,transform:"translateY("+d*j+"vw) scale(1)"})},100),g;d===Number.NEGATIVE_INFINITY&&(g=b("setTimeout")(function(){e.handleAppEvent({source:"from_app",toastID:f,type:"toast_unmount_animation_ended"})},l));return function(){b("clearTimeout")(a),g!=null&&(e.handleAppEvent({source:"from_app",toastID:f,type:"toast_unmount_animation_ended"}),b("clearTimeout")(g))}},[e,f,c,d]);i.useEffect(function(){if(n==="ready"){var a=b("setTimeout")(function(){e.handleAppEvent({source:"from_app",toastID:f,type:"toast_seen"})},k+l);return function(){b("clearTimeout")(a)}}},[e,f,n]);return i.jsx("div",{className:(h||(h=b("stylex")))(m.root)+" always-enable-animations",style:p,children:i.jsx(b("CometPlaceholder.react"),{fallback:null,children:i.jsx(b("CometCard.react"),{background:"white",dropShadow:2,expanding:!0,children:i.jsxs(b("CometAspectRatioContainer.react"),{aspectRatio:16/9,children:[g!=null?i.jsx(b("BaseImage.react"),{objectFit:"contain",src:g,xstyle:m.image}):null,i.jsx("div",{className:h(m.overlay),children:o})]})})})})}}),null);
__d("TV2ToastsUI.react",["TV2ToastUI.react","TV2ToastsState","react","usePrevious"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.toasts;a=b("TV2ToastsState").TV2ToastsStateSelectors.getToastsForUI(a);var c=b("usePrevious")(a);return h.jsx("div",{className:"",children:a.map(function(a,d){var e=d,f=c==null?Number.POSITIVE_INFINITY:c.findIndex(function(b){return b.toastID===a.toastID});f<0&&(f=Number.POSITIVE_INFINITY);d===0&&a.toastState==="seen"&&(e=Number.NEGATIVE_INFINITY);return h.jsx(b("TV2ToastUI.react"),{moveFromIndex:f,moveToIndex:e,toast:a},a.toastID)})})}}),null);
__d("TV2VideoPlayerSpinner.react",["TV2SplashLoadingIndicator.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){a=a.isVisible;return h.jsx("div",{className:"a974shg9 mohukz8u loa3aoo1 rtyr39pz k0kuzabz ibamfamh",children:h.jsx(b("TV2SplashLoadingIndicator.react"),{isVisible:a})})}}),null);
__d("TVCastWebAppCometRoot.react",["TV2MainReactRoot.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){return h.jsx(b("TV2MainReactRoot.react"),{authenticated:a.props.routeProps.authenticated===!0,debugging:a.props.routeProps.debugging===!0})}}),null);