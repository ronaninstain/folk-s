if (self.CavalryLogger) { CavalryLogger.start_js(["eiar\/99"]); }

__d("MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"source_type"}],b=[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],c=[{alias:null,args:null,kind:"ScalarField",name:"service_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_domain",storageKey:null}];b=[{alias:null,args:null,concreteType:"MediaUploadConfiguration",kind:"LinkedField",name:"media_upload_config",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"source_type",variableName:"source_type"}],concreteType:"MediaUploadVideoMetadataValidation",kind:"LinkedField",name:"video_metadata_validation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"min_size_kb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_size_kb",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_duration_secs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_duration_secs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_aspect_ration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_aspect_ration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_extensions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"accept_dimensions_from_player",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkStart",kind:"LinkedField",name:"network_start",plural:!1,selections:b,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkReceive",kind:"LinkedField",name:"network_receive",plural:!1,selections:b,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadService",kind:"LinkedField",name:"network_upload_service",plural:!1,selections:[{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTarget",kind:"LinkedField",name:"default",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTarget",kind:"LinkedField",name:"targeted",plural:!1,selections:c,storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkUploadServiceTracing",kind:"LinkedField",name:"tracing",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_file_size_kb",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MediaUploadNetworkMonitor",kind:"LinkedField",name:"network_monitor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"network_probe_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"internet_probe_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"internet_probe_timeout_ms",storageKey:null},{alias:null,args:null,concreteType:"MediaUploadBackoffPolicy",kind:"LinkedField",name:"internet_probe_backoff",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"backoff_initial_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_jitter_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_exp_base_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_exp_multiplier",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backoff_max_ms",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limits_total_retry_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"limits_total_time_ms",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stall_detection_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"stall_detection_timeout_ms",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",selections:b},params:{id:"4094129890651883",metadata:{},name:"MediaUploadFBDefaultServerConfigurationRetrieverQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MediaUploadAssetEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ASSET_ADDED","ASSET_STARTED","ASSET_REMOVED","ASSET_FAILED","ASSET_SUCCEED","ASSET_PROGRESS","ASSET_STALL"]);c=a;e.exports=c}),null);
__d("MediaUploadAssetStatus",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["REQUESTED","SCHEDULED","PROCESSING","UPLOADING","COMPLETED","FAILED","REMOVED"]);c=a;e.exports=c}),null);
__d("MediaUploadTime",[],(function(a,b,c,d,e,f){"use strict";f.millisecondsToTime=a;f.secondsToTime=b;f.minutesToTime=c;f.hoursToTime=d;f.timeToMilliseconds=j;f.timeToSeconds=k;f.timeToMinutes=l;f.timeToHours=m;f.maybeTimeToMilliseconds=e;f.maybeTimeToSeconds=o;f.maybeTimeToMinutes=p;f.maybeTimeToHours=q;f.addTime=r;f.subtractTime=s;f.compareTime=t;var g=1e3,h=g*60,i=h*60;function a(a){return a}function b(a){return a*g}function c(a){return a*h}function d(a){return a*i}function j(a){return a}function k(a){return 1*a/g}function l(a){return 1*a/h}function m(a){return 1*a/i}function n(a,b){return a==null?null:b(a)}function e(a){return n(a,j)}function o(a){return n(a,k)}function p(a){return n(a,l)}function q(a){return n(a,m)}function r(a,b){return a+b}function s(a,b){return a-b}function t(a,b){return a<b?-1:a>b?1:0}}),null);
__d("MediaUploadBytesSummary",["MediaUploadTime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var c=a.prototype;c.reset=function(){this.$2=null};c.updateForUploadStart=function(a){var b=this.$1.currentTimeProvider();this.$2={fullyCompleted:!1,startedAt:b,updatedAt:b,totalBytes:a,uploadedBytes:0,skippedUpload:!1}};c.updateForUploadSkip=function(a){var b=this.$1.currentTimeProvider();this.$2={fullyCompleted:!0,startedAt:b,updatedAt:b,finishedAt:b,totalBytes:a,uploadedBytes:a,skippedUpload:!0}};c.updateForProgress=function(a){var b=this.$2;if(b==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}b.uploadedBytes=a;b.updatedAt=this.$1.currentTimeProvider()};c.updateForUploadComplete=function(){var a=this.$2;if(a==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}this.updateForProgress(a.totalBytes);a.fullyCompleted=!0;a.uploadedBytes=a.totalBytes};c.updateForUploadAbandoned=function(){var a=this.$2;if(a==null){this.$1.reportRecoverableError("Upload stats have not been initialized");return}a.finishedAt=this.$1.currentTimeProvider()};c.computeSpeedBps=function(){var a=this.$2;if(a==null||a.skippedUpload)return null;else{var c=b("MediaUploadTime").timeToSeconds(b("MediaUploadTime").subtractTime(a.updatedAt,a.startedAt));return c>.1?a.uploadedBytes/c:0}};c.computeUploadedPortion=function(){var a=this.$2;if(a==null)return null;else if(a.fullyCompleted)return 1;else if(a.totalBytes===0)return 0;else return 1*a.uploadedBytes/a.totalBytes};c.computeSnapshot=function(){var a=this.$2;if(a==null)return null;else return{uploadedBytes:a.uploadedBytes,speedBps:this.computeSpeedBps(),skippedUpload:a.skippedUpload,startedAtMs:b("MediaUploadTime").timeToMilliseconds(a.startedAt),finishedAtMs:b("MediaUploadTime").maybeTimeToMilliseconds(a.finishedAt)}};return a}();e.exports=a}),null);
__d("MediaUploadOperationOutcome",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["SUCCESS","CANCELED","FAILED_NON_TRANSIENT","FAILED_NO_MORE_RETRIES","FAILED_OUT_OF_TIME"]);c=a;e.exports=c}),null);
__d("MediaUploadStageEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["STAGE_STARTED","STAGE_PROGRESS","STAGE_SUCCEED","STAGE_FAILED","STAGE_CANCELED"]);c=a;e.exports=c}),null);
__d("MediaUploadAssetContext",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadBytesSummary","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var c=a.sessionContext,d=a.assetRequest,e=a.emitter,f=a.progressCalculator,g=a.retryState;a=a.params;this.sessionContext=c;this.request=d;this.assetID=d.assetID;this.asset=d.asset;this.retryState=g;this.$2=e;this.$3=f;this.$1=a.currentTimeProvider;this.$4=b("MediaUploadAssetStatus").REQUESTED;this.createdAt=this.$1();this.uploadSummary=new(b("MediaUploadBytesSummary"))(a);this.progress={completedStages:new Set(),calculated:{rawValue:0,percentageComplete:0}}}var c=a.prototype;c.emitAssetEvent=function(a){this.$2.emitAssetEvent(a,this),(a===b("MediaUploadAssetEvent").ASSET_SUCCEED||a===b("MediaUploadAssetEvent").ASSET_REMOVED)&&this.recalculateProgressAndEmit()};c.emitStageEvent=function(a,c){this.$2.emitStageEvent(a,this,c),a===b("MediaUploadStageEvent").STAGE_SUCCEED&&(this.progress.completedStages.add(c),this.recalculateProgressAndEmit()),a===b("MediaUploadStageEvent").STAGE_PROGRESS&&this.recalculateProgressAndEmit()};c.emitStageEventForOperationOutcome=function(a,c){a===b("MediaUploadOperationOutcome").SUCCESS?this.emitStageEvent(b("MediaUploadStageEvent").STAGE_SUCCEED,c):a===b("MediaUploadOperationOutcome").CANCELED?this.emitStageEvent(b("MediaUploadStageEvent").STAGE_CANCELED,c):this.emitStageEvent(b("MediaUploadStageEvent").STAGE_FAILED,c)};c.recalculateProgressAndEmit=function(){var a=this.$3.calculateAssetProgress(this);this.sessionContext.recalculateProgressAndEmit();a&&this.emitAssetEvent(b("MediaUploadAssetEvent").ASSET_PROGRESS)};c.$5=function(){this.uploadSummary.reset(),this.progress.completedStages.clear(),this.recalculateProgressAndEmit()};c.updateStatusAndEmit=function(a){if(this.$4===a)return;this.$4=a;switch(a){case b("MediaUploadAssetStatus").REMOVED:this.emitAssetEvent(b("MediaUploadAssetEvent").ASSET_REMOVED);break;case b("MediaUploadAssetStatus").FAILED:this.emitAssetEvent(b("MediaUploadAssetEvent").ASSET_FAILED);break;case b("MediaUploadAssetStatus").COMPLETED:this.emitAssetEvent(b("MediaUploadAssetEvent").ASSET_SUCCEED);break;case b("MediaUploadAssetStatus").PROCESSING:this.emitAssetEvent(b("MediaUploadAssetEvent").ASSET_STARTED);break;case b("MediaUploadAssetStatus").UPLOADING:this.progress.lastAttemptStartedAt=this.$1();break;case b("MediaUploadAssetStatus").REQUESTED:case b("MediaUploadAssetStatus").SCHEDULED:this.$5();break}};c.isCompleted=function(){return this.$4===b("MediaUploadAssetStatus").COMPLETED};c.isSchedulable=function(){return this.$4===b("MediaUploadAssetStatus").REQUESTED||this.$4===b("MediaUploadAssetStatus").FAILED};c.isRemoved=function(){return this.$4===b("MediaUploadAssetStatus").REMOVED};c.isFailed=function(){return this.$4===b("MediaUploadAssetStatus").FAILED};c.__composeBaseSnapshot=function(){return{asset:this.asset,assetID:this.assetID,status:this.$4,createdAtMs:b("MediaUploadTime").timeToMilliseconds(this.createdAt),lastUploadStartedAtMs:b("MediaUploadTime").maybeTimeToMilliseconds(this.progress.lastAttemptStartedAt),metadata:this.metadata==null?void 0:{width:this.metadata.width,height:this.metadata.height,isSpherical:this.metadata.isSpherical,durationMs:b("MediaUploadTime").maybeTimeToMilliseconds(this.metadata.duration)},retries:{totalRetryAttempts:this.retryState.getRetryAttempts()},uploadSummary:this.uploadSummary.computeSnapshot(),percentageComplete:this.progress.calculated.percentageComplete}};return a}();e.exports=a}),null);
__d("MediaUploadExtrasStorage",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=new Map(),this.$1=a}var b=a.prototype;b.setFromObject=function(a){var b=Object.keys(a);for(var c=0;c<b.length;c++){var d=b[c];this.set(d,a[d])}return this};b.set=function(a,b){this.$2.set(a,b);return this};b.getNumber=function(a){var b=this.getUnsafe(a);if(b==null||typeof b==="number")return b;else{this.$1.reportRecoverableError("Requested key "+a+" as number, but it was "+typeof b);return null}};b.getString=function(a){var b=this.getUnsafe(a);if(b==null||typeof b==="string")return b;else{this.$1.reportRecoverableError("Requested key "+a+" as string, but it was "+typeof b);return null}};b.getBoolean=function(a){var b=this.getUnsafe(a);if(b==null||typeof b==="boolean")return b;else{this.$1.reportRecoverableError("Requested key "+a+" as boolean, but it was "+typeof b);return null}};b.getUnsafe=function(a){return this.$2.get(a)};b.getClassInstance=function(a,b){var c=this.getUnsafe(a);if(c==null||c instanceof b)return c;else{this.$1.reportRecoverableError("Requested key "+a+" as "+String(b)+", but it was something else");return null}};return a}();e.exports=a}),null);
__d("MediaUploadFBAssetContext",["ErrorNormalizeUtils","MediaUploadAssetContext","MediaUploadExtrasStorage","MediaUploadStageEvent","MediaUploadTime","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.request=c.assetRequest;d.sessionContext=c.sessionContext;d.processing={rawData:new(b("MediaUploadExtrasStorage"))(c.params)};return d}var d=c.prototype;d.recordStageOutcome=function(a){var c=a.stage,d=a.outcome,e=a.rawErrorCode,f=a.rawErrorObject,g=a.displayError,h=a.errorAttributes;a=a.networkRequestID;f=f==null?void 0:b("ErrorNormalizeUtils").normalizeError(b("getErrorSafe")(f));this.$MediaUploadFBAssetContext1={stage:c,outcome:d,rawErrorCode:e,errorObject:f,displayError:g,errorAttributes:h,networkRequestID:a}};d.emitStageEvent=function(c,d){c===b("MediaUploadStageEvent").STAGE_STARTED&&(this.$MediaUploadFBAssetContext1=null),a.prototype.emitStageEvent.call(this,c,d)};d.composeSnapshot=function(){var a=this.__composeBaseSnapshot();return babelHelpers["extends"]({},a,{videoID:this.videoID,request:this.request,uploadServiceDomain:this.processing.uploadServiceDomain,hash:this.processing.pseudoHash==null?null:{hashValue:this.processing.pseudoHash.hashValue,calculationTimeCostMs:b("MediaUploadTime").timeToMilliseconds(this.processing.pseudoHash.calculationTimeCost)},lastAction:this.$MediaUploadFBAssetContext1})};c.castOrThrow=function(a,b){b=b.createThrowableError;if(a instanceof c)return a;else{throw b('Provided asset context has incorrect type of "'+((b=a.constructor)==null?void 0:b.name)+'"')}};return c}(b("MediaUploadAssetContext"));e.exports=a}),null);
__d("MediaUploadAssetRequest",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=a.assetID,c=a.asset;a=a.extras;this.assetID=b;this.asset=c;this.extras=a};e.exports=a}),null);
__d("MediaUploadFBAssetRequest",["MediaUploadAssetRequest"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c=b.assetID,d=b.asset,e=b.extras;b=b.attributes;c=a.call(this,{assetID:c,asset:d,extras:e})||this;c.attributes={targetID:b.targetID,actorID:b.actorID,hasFileBeenReplaced:b.hasFileBeenReplaced,composerDialogVersion:b.composerDialogVersion,publisherActionSource:b.publisherActionSource,creatorProduct:b.creatorProduct,composerSessionID:b.composerSessionID};return c}b.castOrThrow=function(a,c){c=c.createThrowableError;if(a instanceof b)return a;else{throw c('Provided asset request has incorrect type of "'+((c=a.constructor)==null?void 0:c.name)+'"')}};return b}(b("MediaUploadAssetRequest"));e.exports=a}),null);
__d("MediaUploadEntryPointID",[],(function(a,b,c,d,e,f){"use strict";a=function(a){this.key=a};e.exports=a}),null);
__d("MediaUploadFBEntryPointID",["MediaUploadEntryPointID"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,b+"\\"+c)||this;d.sourceType=b;d.entryPointRef=c;return d}b.castOrThrow=function(a,c){c=c.createThrowableError;if(a instanceof b)return a;else{throw c('Provided entry point ID has incorrect type of "'+((c=a.constructor)==null?void 0:c.name)+'"')}};return b}(b("MediaUploadEntryPointID"));e.exports=a}),null);
__d("MediaUploadSessionEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["SESSION_CONFIRMED","SESSION_SUCCEED","SESSION_FAILED","SESSION_CANCELED","SESSION_FINISHED","SESSION_PROGRESS","PUBLISH_STARTED","PUBLISH_SUCCEED","PUBLISH_FAILED"]);c=a;e.exports=c}),null);
__d("MediaUploadSessionStatus",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["UNCONFIRMED","CONFIRMED","FAILED","PUBLISHING","COMPLETED","CANCELED"]);c=a;e.exports=c}),null);
__d("MediaUploadSessionContext",["MediaUploadExtrasStorage","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadTime"],(function(a,b,c,d,e,f){"use strict";var g=new Set([b("MediaUploadSessionStatus").COMPLETED,b("MediaUploadSessionStatus").CANCELED,b("MediaUploadSessionStatus").FAILED]);a=function(){function a(a){var c=a.sessionID,d=a.emitter,e=a.progressCalculator;a=a.params;this.assetsByID=new Map();this.sessionID=c;this.$1=d;this.$2=e;this.extras=new(b("MediaUploadExtrasStorage"))(a);this.$4=a.currentTimeProvider;this.$5=a.randomStringProvider;this.$6=b("MediaUploadSessionStatus").UNCONFIRMED;this.$3={createdAt:this.$4()};this.progress={retryID:this.$5(),publishingExtrasProvided:!1,publishingDone:!1,percentageComplete:0};this.releaseOnFinish=[]}var c=a.prototype;c.emitSessionEvent=function(a){this.$1.emitSessionEvent(a,this),a===b("MediaUploadSessionEvent").PUBLISH_SUCCEED&&(this.progress.publishingDone=!0,this.recalculateProgressAndEmit()),a===b("MediaUploadSessionEvent").SESSION_FINISHED&&this.$7()};c.renewRetryID=function(){this.progress.retryID=this.$5()};c.updateLastError=function(a){this.__lastError=a};c.recalculateProgressAndEmit=function(){this.$2.calculateSessionProgress(this)&&this.emitSessionEvent(b("MediaUploadSessionEvent").SESSION_PROGRESS)};c.$7=function(){while(this.releaseOnFinish.length>0){var a=this.releaseOnFinish.pop();a.cancel()}};c.updateStatusAndEmit=function(a){if(this.$6===a)return;this.$6=a;this.progress.terminalStatus==null&&g.has(a)&&(this.progress.terminalStatus=a,this.emitSessionEvent(b("MediaUploadSessionEvent").SESSION_FINISHED));switch(a){case b("MediaUploadSessionStatus").CONFIRMED:this.progress.terminalStatus=void 0;this.$3.confirmedAt=this.$4();this.emitSessionEvent(b("MediaUploadSessionEvent").SESSION_CONFIRMED);break;case b("MediaUploadSessionStatus").COMPLETED:this.emitSessionEvent(b("MediaUploadSessionEvent").SESSION_SUCCEED);break;case b("MediaUploadSessionStatus").CANCELED:this.emitSessionEvent(b("MediaUploadSessionEvent").SESSION_CANCELED);break;case b("MediaUploadSessionStatus").FAILED:this.emitSessionEvent(b("MediaUploadSessionEvent").SESSION_FAILED);break;case b("MediaUploadSessionStatus").PUBLISHING:this.emitSessionEvent(b("MediaUploadSessionEvent").PUBLISH_STARTED);break;default:}};c.getActiveAssets=function(){var a=[];for(var b=this.assetsByID.values(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.isRemoved()||a.push(e)}return a};c.isCanceled=function(){return this.$6===b("MediaUploadSessionStatus").CANCELED};c.isPublished=function(){return this.$6===b("MediaUploadSessionStatus").COMPLETED};c.isPublishing=function(){return this.$6===b("MediaUploadSessionStatus").PUBLISHING};c.isConfirmed=function(){return this.$6===b("MediaUploadSessionStatus").CONFIRMED};c.isFailed=function(){return this.$6===b("MediaUploadSessionStatus").FAILED};c.__composeBaseSnapshot=function(){return{sessionID:this.sessionID,retryID:this.progress.retryID,status:this.$6,extras:this.extras,timing:{createdAtMs:b("MediaUploadTime").timeToMilliseconds(this.$3.createdAt),confirmedAtMs:b("MediaUploadTime").maybeTimeToMilliseconds(this.$3.confirmedAt)},terminalStatus:this.progress.terminalStatus,percentageComplete:this.progress.percentageComplete,publishingResponse:this.progress.publishingResponse,cancelReason:this.progress.cancelReason}};return a}();e.exports=a}),null);
__d("MediaUploadFBSessionContext",["ErrorNormalizeUtils","MediaUploadSessionContext","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this,{sessionID:b.sessionID,emitter:b.emitter,progressCalculator:b.progressCalculator,params:b.params})||this;c.entryPoint=b.entryPoint;return c}var d=c.prototype;d.composeSnapshot=function(){var a=this.__composeBaseSnapshot();return babelHelpers["extends"]({},a,{entryPoint:this.entryPoint,lastError:this.__lastError==null?null:{errorObject:this.__lastError.rawErrorObject==null?null:b("ErrorNormalizeUtils").normalizeError(b("getErrorSafe")(this.__lastError.rawErrorObject)),rawErrorCode:this.__lastError.rawErrorCode}})};c.castOrThrow=function(a,b){b=b.createThrowableError;if(a instanceof c)return a;else{throw b('Provided session context has incorrect type of "'+((b=a.constructor)==null?void 0:b.name)+'"')}};return c}(b("MediaUploadSessionContext"));e.exports=a}),null);
__d("MediaUploadFBStage",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["METADATA_EXTRACTION","METADATA_VALIDATION","HASHING","START_REQUEST","BYTES_UPLOAD","RECEIVE_REQUEST"]);c=a;e.exports=c}),null);
__d("MediaUploadFBStageOutcome",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["SUCCESS","CANCEL","EXCEPTION","INTERNAL_FAILURE","UNSUPPORTED_FEATURE","ASSET_IS_NOT_FILE","ASSET_IS_NOT_SUPPORTED","REQUEST_ERROR","INVALID_SERVER_RESPONSE","MISSING_MANDATORY_DATA"]);c=a;e.exports=c}),null);
__d("MediaUploadClientEventContext",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){this.startedAt=a.currentTimeProvider(),this.entryPoint=b};e.exports=a}),null);
__d("MediaUploadFBClientEventContext",["ErrorNormalizeUtils","MediaUploadClientEventContext","MediaUploadFBAssetContext","MediaUploadFBSessionContext","MediaUploadTime","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c.envParams,c.entryPoint)||this;d.entryPoint=c.entryPoint;c.context!=null&&c.context instanceof b("MediaUploadFBSessionContext")?d.sessionContext=c.context:c.context!=null&&c.context instanceof b("MediaUploadFBAssetContext")&&(d.sessionContext=c.context.sessionContext,d.assetContext=c.context);return d}c.castOrThrow=function(a,b){if(a instanceof c)return a;else{throw b.createThrowableError('Provided client event context has incorrect type of "'+((b=a.constructor)==null?void 0:b.name)+'"')}};var d=c.prototype;d.composerSnapshot=function(){var a,c;a=((a=this.errorInfo)==null?void 0:a.rawErrorObject)==null?void 0:b("ErrorNormalizeUtils").normalizeError(b("getErrorSafe")((a=this.errorInfo)==null?void 0:a.rawErrorObject));return{entryPoint:this.entryPoint,startedAtMs:b("MediaUploadTime").timeToMilliseconds(this.startedAt),sessionSnapshot:(c=this.sessionContext)==null?void 0:c.composeSnapshot(),assetSnapshot:(c=this.assetContext)==null?void 0:c.composeSnapshot(),errorObject:a}};return c}(b("MediaUploadClientEventContext"));e.exports=a}),null);
__d("MediaUploadEventEmitterAdapter",["EventEmitter","MediaUploadFBAssetContext","MediaUploadFBClientEventContext","MediaUploadFBSessionContext","MediaUploadFBStage"],(function(a,b,c,d,e,f){"use strict";var g=function(a){return a};a=function(){function a(a){this.$2=new(b("EventEmitter"))(),this.$1=a,this.emitter=this.$3(),this.subscriber=this.$4()}var c=a.prototype;c.$3=function(){var a=this,c=function(c){c=b("MediaUploadFBSessionContext").castOrThrow(c,a.$1);return c.composeSnapshot()},d=function(c){c=b("MediaUploadFBAssetContext").castOrThrow(c,a.$1);return c.composeSnapshot()},e=this.$2,f=function(b){try{for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];e.emit.apply(e,[g(b)].concat(d))}catch(c){a.$1.reportRecoverableError("Session pub/sub chain failed for event "+String(b),c)}};return{emitClientEvent:function(c,d){f(c,b("MediaUploadFBClientEventContext").castOrThrow(d,a.$1).composerSnapshot())},emitSessionEvent:function(a,b){f(a,c(b))},emitAssetEvent:function(a,b){f(a,c(b.sessionContext),d(b))},emitStageEvent:function(e,g,h){h=b("MediaUploadFBStage").cast(String(h));if(h==null){a.$1.reportRecoverableError("Invalid stage value, it must be MediaUploadFBStage, ignoring");return}f(e,c(g.sessionContext),d(g),h)}}};c.$4=function(){var a=this,b=function(b,c){try{b()}catch(b){a.$1.reportRecoverableError("Stage pub/sub chain failed for event "+c(),b)}};return{addClientEventListener:function(c,d){var e=a.$2.addListener(g(c),function(a){return b(function(){return d(a)},function(){return String(c)})});return{cancel:function(){return e.remove()}}},addSessionEventListener:function(c,d){var e=a.$2.addListener(g(c),function(a){return b(function(){return d(a)},function(){return String(c)})});return{cancel:function(){return e.remove()}}},addAssetEventListener:function(c,d){var e=a.$2.addListener(g(c),function(a,e){return b(function(){return d(a,e)},function(){return String(c)})});return{cancel:function(){return e.remove()}}},addStageEventListener:function(c,d,e){var f=a.$2.addListener(g(c),function(a,f,g){d===g&&b(function(){return e(a,f)},function(){return String(c)+"  "+String(g)})});return{cancel:function(){return f.remove()}}}}};return a}();e.exports=a}),null);
__d("MediaUploadClientEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["CLIENT_CREATED","CLIENT_CONFIG_REQUESTED","CLIENT_CONFIG_RECEIVED","CLIENT_CONFIG_FAILED","CLIENT_CONFIG_CACHED","CLIENT_INTERNET_ONLINE","CLIENT_INTERNET_OFFLINE","CLIENT_INTERNET_UNKNOWN"]);c=a;e.exports=c}),null);
__d("MediaUploadBanzaiLogger",["Banzai","CurrentUser","MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadStageEvent","MediaUploadTime","cr:1840657"],(function(a,b,c,d,e,f){"use strict";var g=new Map([[(a=b("MediaUploadClientEvent")).CLIENT_CONFIG_REQUESTED,"upload.client.started_client_config_fetch"],[a.CLIENT_CONFIG_RECEIVED,"upload.client.finished_client_config_fetch"],[a.CLIENT_CONFIG_FAILED,"upload.client.failed_client_config_fetch"],[a.CLIENT_CONFIG_CACHED,"upload.client.cached_client_config_fetch"]]),h=new Map([[(c=b("MediaUploadSessionEvent")).SESSION_CONFIRMED,"upload.client.started_flow"],[c.PUBLISH_STARTED,"upload.client.started_sending_post_request"],[c.PUBLISH_SUCCEED,"upload.client.finished_sending_post_request"],[c.PUBLISH_FAILED,"upload.client.failed_sending_post_request"]]),i=new Map([[b("MediaUploadSessionStatus").FAILED,"upload.client.failed_flow"],[b("MediaUploadSessionStatus").CANCELED,"upload.client.canceled_flow"],[b("MediaUploadSessionStatus").COMPLETED,"upload.client.finished_flow"]]),j=new Map([[(d=b("MediaUploadAssetEvent")).ASSET_ADDED,"upload.client.requested_uploading"],[d.ASSET_STARTED,"upload.client.started_uploading"],[d.ASSET_FAILED,"upload.client.failed_uploading"],[d.ASSET_REMOVED,"upload.client.canceled_uploading"],[d.ASSET_SUCCEED,"upload.client.finished_uploading"],[d.ASSET_STALL,"upload.client.stall_detected"]]),k=new Map([[(f=b("MediaUploadStageEvent")).STAGE_STARTED,new Map([[(a=b("MediaUploadFBStage")).START_REQUEST,"upload.client.started_sending_start_request"],[a.BYTES_UPLOAD,"upload.client.started_sending_bytes"],[a.RECEIVE_REQUEST,"upload.client.started_sending_receive_request"]])],[f.STAGE_SUCCEED,new Map([[a.START_REQUEST,"upload.client.finished_sending_start_request"],[a.BYTES_UPLOAD,"upload.client.finished_sending_bytes"],[a.RECEIVE_REQUEST,"upload.client.finished_sending_receive_request"]])],[f.STAGE_FAILED,new Map([[a.START_REQUEST,"upload.client.failed_sending_start_request"],[a.RECEIVE_REQUEST,"upload.client.failed_sending_receive_request"],[a.BYTES_UPLOAD,"upload.client.failed_sending_bytes"],[a.METADATA_VALIDATION,"upload.client.invalidated_uploading"]])],[f.STAGE_CANCELED,new Map([[a.START_REQUEST,"upload.client.canceled_sending_start_request"],[a.BYTES_UPLOAD,"upload.client.canceled_sending_bytes"],[a.RECEIVE_REQUEST,"upload.client.canceled_sending_receive_request"]])]]);c=function(){function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.subscribe=function(a,c){var d=this;g.forEach(function(b,e){a.addClientEventListener(e,function(a){return d.$3(c,b,a)})});h.forEach(function(b,e){a.addSessionEventListener(e,function(a){return d.$4(c,b,a)})});i.forEach(function(e,f){a.addSessionEventListener(b("MediaUploadSessionEvent").SESSION_FINISHED,function(a){a.terminalStatus===f&&a.timing.confirmedAtMs!=null&&d.$4(c,e,a)})});j.forEach(function(b,e){a.addAssetEventListener(e,function(a,e){return d.$5(c,b,a,e)})});k.forEach(function(b,e){b.forEach(function(b,f){a.addStageEventListener(e,f,function(a,e){d.$5(c,b,a,e)})})})};c.$6=function(a){return a==null?null:b("MediaUploadTime").timeToMilliseconds(this.$1.currentTimeProvider())-a};c.$7=function(a,c){return{event:a,application_state:"www_v2",is_chunked_upload:!0,file_can_read:this.$1.features.supportFileManipulation,network_status:(a=this.$2)==null?void 0:(a=a.injectNetworkStatus)==null?void 0:a.getNetworkStatus(),internet_status:(a=this.$2)==null?void 0:(a=a.injectNetworkStatus)==null?void 0:a.getInternetStatus(),trigger_time:this.$1.currentTimeProvider(),app_id:b("CurrentUser").getAppID(),source:c.sourceType,composer_entry_point_ref:c.entryPointRef}};c.$8=function(a){var c=(a==null?void 0:a.rawErrorCode)!=null&&typeof (a==null?void 0:a.rawErrorCode)==="string"?a==null?void 0:a.rawErrorCode:void 0,d=(a==null?void 0:a.rawErrorCode)!=null&&typeof (a==null?void 0:a.rawErrorCode)==="number"?a==null?void 0:a.rawErrorCode:void 0;return{error:(c=c)!=null?c:a==null?void 0:(c=a.displayError)==null?void 0:c.summary,error_inner:(a==null?void 0:a.outcome)===b("MediaUploadFBStageOutcome").SUCCESS?void 0:a==null?void 0:a.outcome,error_description:(c=a==null?void 0:(c=a.errorObject)==null?void 0:c.message)!=null?c:a==null?void 0:(c=a.displayError)==null?void 0:c.description,error_trace:a==null?void 0:(c=a.errorObject)==null?void 0:c.stack,error_code:d}};c.$9=function(a){return{event_reason:a.cancelReason,elapsed_time:this.$6(a.timing.confirmedAtMs),waterfall_id:a.sessionID,retry_id:a.retryID}};c.$10=function(a){var b;return{elapsed_time:this.$6(a.lastUploadStartedAtMs),asset_id:a.assetID,video_id:a.videoID,composer_session_id:a.request.attributes.composerSessionID,target_id:a.request.attributes.targetID,composer_dialog_version:a.request.attributes.composerDialogVersion,has_file_been_replaced:a.request.attributes.hasFileBeenReplaced,source_width:(b=a.metadata)==null?void 0:b.width,source_height:(b=a.metadata)==null?void 0:b.height,duration:(b=a.metadata)==null?void 0:b.durationMs,file_size:(b=a.asset.dataAsFile())==null?void 0:b.size,video_original_file_path:a.asset.data.name,hash:(b=a.hash)==null?void 0:b.hashValue,hash_time:(b=a.hash)==null?void 0:b.calculationTimeCostMs,retries:a.retries.totalRetryAttempts,upload_domain:a.uploadServiceDomain,upload_speed:(b=a.uploadSummary)==null?void 0:b.speedBps,skip_upload:(b=a.uploadSummary)==null?void 0:b.skippedUpload}};c.$11=function(a){var b;return((b=this.$2)==null?void 0:b.injectExtraSessionFields)!=null?(b=this.$2)==null?void 0:b.injectExtraSessionFields(a):null};c.$12=function(a,b){var c;return((c=this.$2)==null?void 0:c.injectExtraAssetFields)!=null?(c=this.$2)==null?void 0:c.injectExtraAssetFields(a,b):null};c.$13=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.map(function(a){return(a=a)!=null?a:{}});return Object.assign.apply(Object,[{}].concat(d))};c.$3=function(a,b,c){var d=c.assetSnapshot,e=c.sessionSnapshot;b=this.$13(e==null?null:this.$11(e),e==null||d==null?null:this.$12(e,d),this.$7(b,a),e==null?null:this.$9(e),e==null||d==null?null:this.$10(d),this.$8(c),{elapsed_time:this.$6(c.startedAtMs)});this.$14(b)};c.$4=function(a,b,c){b=this.$13(this.$11(c),this.$7(b,a),this.$9(c),this.$8(c.lastError));this.$14(b)};c.$5=function(a,b,c,d){b=this.$13(this.$11(c),this.$12(c,d),this.$7(b,a),this.$9(c),this.$10(d),this.$8(d.lastAction));this.$14(b)};c.$14=function(a){b("cr:1840657")!=null?b("cr:1840657")(a):b("Banzai").post("video_waterfall",a,b("Banzai").VITAL)};return a}();e.exports=c}),null);
__d("MediaUploadFBFileHasher",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=b("MediaUploadFBStage").HASHING,this.$2=a.pseudoHasher,this.$3=a.fullHasher}var c=a.prototype;c.process=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a.emitStageEvent(b("MediaUploadStageEvent").STAGE_STARTED,this.$1);c.prev=1;c.next=4;return b("regeneratorRuntime").awrap(this.$4(a));case 4:c.next=9;break;case 6:c.prev=6,c.t0=c["catch"](1),a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:c.t0});case 9:a.emitStageEvent(b("MediaUploadStageEvent").STAGE_SUCCEED,this.$1);return c.abrupt("return",b("MediaUploadOperationOutcome").SUCCESS);case 11:case"end":return c.stop()}},null,this,[[1,6]])};c.$5=function(a,c,d){return c==null?b("Promise").resolve():c.hash(a.file).then(function(a){a.outcome==="SUCCESS"&&d(a.value);return a})};c.$4=function(a){var c=this,d,e,f,g,h,i,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:d=a.asset.dataAsFile();if(!(d==null)){k.next=4;break}a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA});return k.abrupt("return");case 4:k.next=6;return b("regeneratorRuntime").awrap(this.$5(d,this.$3,function(b){return a.processing.fullHash=b}).then(function(e){return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(!((e==null?void 0:e.outcome)==="SUCCESS")){f.next=5;break}a.processing.pseudoHash=a.processing.fullHash;return f.abrupt("return",[e,e]);case 5:f.t0=e;f.next=8;return b("regeneratorRuntime").awrap(c.$5(d,c.$2,function(b){return a.processing.pseudoHash=b}));case 8:f.t1=f.sent;return f.abrupt("return",[f.t0,f.t1]);case 10:case"end":return f.stop()}},null,this)}));case 6:e=k.sent,(f=e,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 8:if(!g){k.next=14;break}if(!(h>=f.length)){k.next=11;break}return k.abrupt("break",29);case 11:i=f[h++];k.next=18;break;case 14:h=f.next();if(!h.done){k.next=17;break}return k.abrupt("break",29);case 17:i=h.value;case 18:j=i;if(!((j==null?void 0:j.outcome)==="FILE_TOO_LARGE")){k.next=24;break}a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").ASSET_IS_NOT_SUPPORTED});return k.abrupt("return");case 24:if(!((j==null?void 0:j.outcome)==="FAILURE")){k.next=27;break}a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").INTERNAL_FAILURE,rawErrorCode:j==null?void 0:j.rawErrorCode,rawErrorObject:j==null?void 0:j.rawErrorObject});return k.abrupt("return");case 27:k.next=8;break;case 29:a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").SUCCESS});case 30:case"end":return k.stop()}},null,this)};return a}();e.exports=a}),null);
__d("MediaUploadCancelablePromise",["Promise"],(function(a,b,c,d,e,f){"use strict";var g={cancel:function(){}};a=function(){function a(a){var c=this;this.$1=!1;this.promise=new(b("Promise"))(function(b,d){c.$2=a(b,d),c.$2==null&&(c.$2=g),c.$1&&c.$2.cancel()})}a.resolve=function(b){return new a(function(a){a(b)})};var c=a.prototype;c.then=function(b){var c=this;return new a(function(d,e){var f={cancelable:c};c.promise.then(function(d){f.cancelable=g;if(c.$1)return d;else{d=b(d);if(d instanceof a){f.cancelable=d;return d.promise}else return d}}).then(d)["catch"](function(){f.cancelable=g,e.apply(void 0,arguments)});return{cancel:function(){f.cancelable.cancel()}}})};c.isCanceled=function(){return this.$1};c.cancel=function(){if(!this.$1){var a;this.$1=!0;(a=this.$2)==null?void 0:a.cancel()}};return a}();e.exports=a}),null);
__d("MediaUploadPipeline",["MediaUploadCancelablePromise","MediaUploadOperationOutcome"],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,c){var d=this;this.$2=[];this.$3=null;this.$2=a;this.$1=c;this.cancelablePromise=new(b("MediaUploadCancelablePromise"))(function(a,c){d.$4(a,c,[].concat(d.$2));return{cancel:function(){var c;(c=d.$3)==null?void 0:c.cancel();d.$3=null;a(b("MediaUploadOperationOutcome").CANCELED)}}})}var c=a.prototype;c.$4=function(a,c,d){var e=this;if(d.length===0)this.$3=null,a(b("MediaUploadOperationOutcome").SUCCESS);else{var f=d.shift();f=f();this.$1.promiseTerminator(f.promise.then(function(f){e.cancelablePromise.isCanceled()?a(b("MediaUploadOperationOutcome").CANCELED):f===b("MediaUploadOperationOutcome").SUCCESS?e.$4(a,c,d):a(f)})["catch"](c));this.$3=f}};return a}();a=function(){function a(a){this.$2=[],this.$1=a}var c=a.prototype;c.addCancelableStep=function(a){this.$2.push(a)};c.addPlainStep=function(a){this.$2.push(function(){return new(b("MediaUploadCancelablePromise"))(function(b){b(a())})})};c.run=function(){var a=new g(this.$2,this.$1);return a.cancelablePromise};return a}();e.exports=a}),null);
__d("MediaUploadFBLocalAssetStrategy",["MediaUploadPipeline"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a.envParams,this.metadataParser=a.metadataParser,this.metadataValidator=a.metadataValidator,this.fileHasher=a.fileHasher}var c=a.prototype;c.run=function(a){var c=this,d=new(b("MediaUploadPipeline"))(this.$1);d.addPlainStep(function(){return c.metadataParser.parse(a)});d.addPlainStep(function(){return c.metadataValidator.validate(a,c.metadataParser.retriveRawMetadata(a))});var e=this.fileHasher;e!=null&&d.addPlainStep(function(){return e.process(a)});return d.run()};return a}();e.exports=a}),null);
__d("MediaUploadFBMetadataParser",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime","Promise","VideoUploadFile","VideoUploadMetadataParser","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g="MediaUploadMetadataParser";a=function(){function a(){this.$1=b("MediaUploadFBStage").METADATA_EXTRACTION}var c=a.prototype;c.parse=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:a.emitStageEvent(b("MediaUploadStageEvent").STAGE_STARTED,this.$1);c.prev=1;c.next=4;return b("regeneratorRuntime").awrap(this.$2(a));case 4:c.next=9;break;case 6:c.prev=6,c.t0=c["catch"](1),a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:c.t0});case 9:a.emitStageEvent(b("MediaUploadStageEvent").STAGE_SUCCEED,this.$1);return c.abrupt("return",b("MediaUploadOperationOutcome").SUCCESS);case 11:case"end":return c.stop()}},null,this,[[1,6]])};c.retriveRawMetadata=function(a){return a.processing.rawData.getUnsafe(g)};c.$2=function(a){var c=this,d=a.asset;d=d.dataAsFile();if(d==null){a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").ASSET_IS_NOT_FILE});return b("Promise").resolve()}var e=new(b("VideoUploadFile"))(null,d.file,d.size,d.extension);return new(b("Promise"))(function(d){var f=new(b("VideoUploadMetadataParser"))(e,null,!1,function(e){e.success?c.$3(a,e.metadata):e.errorObject!=null?a.recordStageOutcome({stage:c.$1,outcome:b("MediaUploadFBStageOutcome").EXCEPTION,rawErrorCode:String(e.errorCode),rawErrorObject:e.errorObject}):a.recordStageOutcome({stage:c.$1,outcome:b("MediaUploadFBStageOutcome").INTERNAL_FAILURE,rawErrorCode:String(e.errorCode)}),d()});f.parse()})};c.$3=function(a,c){var d,e,f,h;a.processing.rawData.set(g,c);d=(d=c.format)==null?void 0:d.duration;d=d==null?void 0:b("MediaUploadTime").secondsToTime(d);e=(e=c.streams)==null?void 0:(e=e.primaryVideo)==null?void 0:e.width;f=(f=c.streams)==null?void 0:(f=f.primaryVideo)==null?void 0:f.height;c.videoPlayerData!=null&&((h=c.videoPlayerData)==null?void 0:h.width)>0&&((h=c.videoPlayerData)==null?void 0:h.height)>0&&(e=c.videoPlayerData.width,f=c.videoPlayerData.height);c=(h=c.format)==null?void 0:h.isSpherical;a.metadata={duration:d,width:e,height:f,isSpherical:c}};return a}();e.exports=a}),null);
__d("MediaUploadFBMetadataValidator",["MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationOutcome","MediaUploadStageEvent","MediaUploadTime","Promise","VideoUploadFile","VideoUploadFileValidator"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=b("MediaUploadFBStage").METADATA_VALIDATION,this.$2=a}var c=a.prototype;c.validate=function(a,c){a.emitStageEvent(b("MediaUploadStageEvent").STAGE_STARTED,this.$1);try{c=this.$3(a,c)}catch(d){a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").EXCEPTION,rawErrorObject:d}),c=b("MediaUploadOperationOutcome").SUCCESS}a.emitStageEventForOperationOutcome(c,this.$1);return b("Promise").resolve(c)};c.$4=function(a){var c={};a.extensions.forEach(function(a){return c[a]=1});return{minSize:a.minSizeKB*1024,maxSize:a.maxSizeKB*1024,maxLength:b("MediaUploadTime").timeToSeconds(a.maxDuration),minLength:b("MediaUploadTime").timeToSeconds(a.minDuration),acceptDimensionsFromPlayer:a.acceptDimensionsFromPlayer,minWidth:a.minWidth,minHeight:a.minHeight,require16to9AspectRatio:!1,minAspectRatio:a.minAspectRatio,maxAspectRatio:a.maxAspectRatio,source:a.sourceType,extensions:c}};c.$3=function(a,c){var d=a.asset.dataAsFile();if(d==null){a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").ASSET_IS_NOT_FILE});return b("MediaUploadOperationOutcome").SUCCESS}if(this.configuration==null)throw this.$2.createThrowableError("Missing configuration in the MediaUploadFBMetadataValidator");d=new(b("VideoUploadFile"))(null,d.file,d.size,d.extension);var e=this.$4(this.configuration);e=new(b("VideoUploadFileValidator"))(e);e=e.getValidationErrorMessage(d,c);if(e!=null){a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").INTERNAL_FAILURE,displayError:e});return b("MediaUploadOperationOutcome").FAILED_NON_TRANSIENT}else{a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").SUCCESS});return b("MediaUploadOperationOutcome").SUCCESS}};return a}();e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/BDuAztjQnAL/
 */
__d("CryptoJS",[],(function(a,b,c,d,e,f){!function(a,b){"object"==typeof f?e.exports=f=b():"function"==typeof define&&define.amd?define([],b):a.CryptoJS=b()}(this,function(){var a=a||function(a,b){var c=Object.create||function(){function a(){}return function(b){return a.prototype=b,b=new a(),a.prototype=null,b}}(),d={},e=d.lib={},f=e.Base=function(){return{extend:function(a){var b=c(this);return a&&b.mixIn(a),b.hasOwnProperty("init")&&this.init!==b.init||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),g=e.WordArray=f.extend({init:function(a,c){a=this.words=a||[],c!=b?this.sigBytes=c:this.sigBytes=4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;a=a.sigBytes;if(this.clamp(),d%4)for(var e=0;e<a;e++){var f=c[e>>>2]>>>24-e%4*8&255;b[d+e>>>2]|=f<<24-(d+e)%4*8}else for(var e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c,d=[],e=function(b){var b=b,c=987654321,d=4294967295;return function(){c=36969*(65535&c)+(c>>16)&d,b=18e3*(65535&b)+(b>>16)&d;var e=(c<<16)+b&d;return e/=4294967296,e+=.5,e*(a.random()>.5?1:-1)}},f=0;f<b;f+=4){var i=e(4294967296*(c||a.random()));c=987654071*i(),d.push(4294967296*i()|0)}return new g.init(d,b)}}),h=d.enc={},i=h.Hex={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-d%4*8&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-d%4*8&255;c.push(String.fromCharCode(e))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(a){throw new Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=e.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init(),this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,i=4*f;i=e/i;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);b=i*f;i=a.min(4*b,e);if(b){for(var e=0;e<b;e+=f)this._doProcessBlock(d,e);var j=d.splice(0,b);c.sigBytes-=i}return new g.init(j,i)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),m=(e.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);a=this._doFinalize();return a},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}}),d.algo={});return d}(Math);return function(){function b(a,b,c){for(var d=[],f=0,g=0;g<b;g++)if(g%4){var h=c[a.charCodeAt(g-1)]<<g%4*2,i=c[a.charCodeAt(g)]>>>6-g%4*2;d[f>>>2]|=(h|i)<<24-f%4*8,f++}return e.create(d,f)}var c=a,d=c.lib,e=d.WordArray;d=c.enc;d.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var a=[],e=0;e<c;e+=3)for(var f=b[e>>>2]>>>24-e%4*8&255,g=b[e+1>>>2]>>>24-(e+1)%4*8&255,h=b[e+2>>>2]>>>24-(e+2)%4*8&255,f=f<<16|g<<8|h,g=0;g<4&&e+.75*g<c;g++)a.push(d.charAt(f>>>6*(3-g)&63));h=d.charAt(64);if(h)for(;a.length%4;)a.push(h);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=this._reverseMap;if(!e){e=this._reverseMap=[];for(var f=0;f<d.length;f++)e[d.charCodeAt(f)]=f}f=d.charAt(64);if(f){d=a.indexOf(f);d!==-1&&(c=d)}return b(a,c,e)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(b){function c(a,b,c,d,e,f,h){a=a+(b&c|~b&d)+e+h;return(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,h){a=a+(b&d|c&~d)+e+h;return(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,h){a=a+(b^c^d)+e+h;return(a<<f|a>>>32-f)+b}function f(a,b,c,d,e,f,h){a=a+(c^(b|~d))+e+h;return(a<<f|a>>>32-f)+b}var g=a,h=g.lib,i=h.WordArray,j=h.Hasher;h=g.algo;var k=[];!function(){for(var a=0;a<64;a++)k[a]=4294967296*b.abs(b.sin(a+1))|0}();h=h.MD5=j.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,b){for(var j=0;j<16;j++){var h=b+j,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}h=this._hash.words;i=a[b+0];j=a[b+1];var l=a[b+2],m=a[b+3],n=a[b+4],o=a[b+5],p=a[b+6],q=a[b+7],r=a[b+8],s=a[b+9],t=a[b+10],u=a[b+11],v=a[b+12],w=a[b+13],x=a[b+14];a=a[b+15];b=h[0];var y=h[1],z=h[2],A=h[3];b=c(b,y,z,A,i,7,k[0]),A=c(A,b,y,z,j,12,k[1]),z=c(z,A,b,y,l,17,k[2]),y=c(y,z,A,b,m,22,k[3]),b=c(b,y,z,A,n,7,k[4]),A=c(A,b,y,z,o,12,k[5]),z=c(z,A,b,y,p,17,k[6]),y=c(y,z,A,b,q,22,k[7]),b=c(b,y,z,A,r,7,k[8]),A=c(A,b,y,z,s,12,k[9]),z=c(z,A,b,y,t,17,k[10]),y=c(y,z,A,b,u,22,k[11]),b=c(b,y,z,A,v,7,k[12]),A=c(A,b,y,z,w,12,k[13]),z=c(z,A,b,y,x,17,k[14]),y=c(y,z,A,b,a,22,k[15]),b=d(b,y,z,A,j,5,k[16]),A=d(A,b,y,z,p,9,k[17]),z=d(z,A,b,y,u,14,k[18]),y=d(y,z,A,b,i,20,k[19]),b=d(b,y,z,A,o,5,k[20]),A=d(A,b,y,z,t,9,k[21]),z=d(z,A,b,y,a,14,k[22]),y=d(y,z,A,b,n,20,k[23]),b=d(b,y,z,A,s,5,k[24]),A=d(A,b,y,z,x,9,k[25]),z=d(z,A,b,y,m,14,k[26]),y=d(y,z,A,b,r,20,k[27]),b=d(b,y,z,A,w,5,k[28]),A=d(A,b,y,z,l,9,k[29]),z=d(z,A,b,y,q,14,k[30]),y=d(y,z,A,b,v,20,k[31]),b=e(b,y,z,A,o,4,k[32]),A=e(A,b,y,z,r,11,k[33]),z=e(z,A,b,y,u,16,k[34]),y=e(y,z,A,b,x,23,k[35]),b=e(b,y,z,A,j,4,k[36]),A=e(A,b,y,z,n,11,k[37]),z=e(z,A,b,y,q,16,k[38]),y=e(y,z,A,b,t,23,k[39]),b=e(b,y,z,A,w,4,k[40]),A=e(A,b,y,z,i,11,k[41]),z=e(z,A,b,y,m,16,k[42]),y=e(y,z,A,b,p,23,k[43]),b=e(b,y,z,A,s,4,k[44]),A=e(A,b,y,z,v,11,k[45]),z=e(z,A,b,y,a,16,k[46]),y=e(y,z,A,b,l,23,k[47]),b=f(b,y,z,A,i,6,k[48]),A=f(A,b,y,z,q,10,k[49]),z=f(z,A,b,y,x,15,k[50]),y=f(y,z,A,b,o,21,k[51]),b=f(b,y,z,A,v,6,k[52]),A=f(A,b,y,z,m,10,k[53]),z=f(z,A,b,y,t,15,k[54]),y=f(y,z,A,b,j,21,k[55]),b=f(b,y,z,A,r,6,k[56]),A=f(A,b,y,z,a,10,k[57]),z=f(z,A,b,y,p,15,k[58]),y=f(y,z,A,b,w,21,k[59]),b=f(b,y,z,A,n,6,k[60]),A=f(A,b,y,z,u,10,k[61]),z=f(z,A,b,y,l,15,k[62]),y=f(y,z,A,b,s,21,k[63]),h[0]=h[0]+b|0,h[1]=h[1]+y|0,h[2]=h[2]+z|0,h[3]=h[3]+A|0},_doFinalize:function(){var a=this._data,c=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;c[e>>>5]|=128<<24-e%32;var f=b.floor(d/4294967296);d=d;c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),a.sigBytes=4*(c.length+1),this._process();for(var f=this._hash,e=f.words,d=0;d<4;d++){a=e[d];e[d]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return f},clone:function(){var a=j.clone.call(this);return a._hash=this._hash.clone(),a}});g.MD5=j._createHelper(h),g.HmacMD5=j._createHmacHelper(h)}(Math),function(){var b=a,c=b.lib,d=c.WordArray,e=c.Hasher;c=b.algo;var f=[];c=c.SHA1=e.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],g=c[2],h=c[3],i=c[4],j=0;j<80;j++){if(j<16)f[j]=0|a[b+j];else{var k=f[j-3]^f[j-8]^f[j-14]^f[j-16];f[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+f[j];k+=j<20?(e&g|~e&h)+1518500249:j<40?(e^g^h)+1859775393:j<60?(e&g|e&h|g&h)-1894007588:(e^g^h)-899497514,i=h,h=g,g=e<<30|e>>>2,e=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA1=e._createHelper(c),b.HmacSHA1=e._createHmacHelper(c)}(),function(b){var c=a,d=c.lib,e=d.WordArray,f=d.Hasher;d=c.algo;var g=[],h=[];!function(){function a(a){for(var c=b.sqrt(a),d=2;d<=c;d++)if(!(a%d))return!1;return!0}function c(a){return 4294967296*(a-(0|a))|0}for(var d=2,e=0;e<64;)a(d)&&(e<8&&(g[e]=c(b.pow(d,.5))),h[e]=c(b.pow(d,1/3)),e++),d++}();var i=[];d=d.SHA256=f.extend({_doReset:function(){this._hash=new e.init(g.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],j=c[3],g=c[4],k=c[5],l=c[6],m=c[7],n=0;n<64;n++){if(n<16)i[n]=0|a[b+n];else{var o=i[n-15];o=(o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3;var p=i[n-2];p=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;i[n]=o+i[n-7]+p+i[n-16]}o=g&k^~g&l;p=d&e^d&f^e&f;var q=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),r=(g<<26|g>>>6)^(g<<21|g>>>11)^(g<<7|g>>>25);r=m+r+o+h[n]+i[n];o=q+p;m=l,l=k,k=g,g=j+r|0,j=f,f=e,e=d,d=r+o|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+j|0,c[4]=c[4]+g|0,c[5]=c[5]+k|0,c[6]=c[6]+l|0,c[7]=c[7]+m|0},_doFinalize:function(){var a=this._data,c=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=b.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,a.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=f.clone.call(this);return a._hash=this._hash.clone(),a}});c.SHA256=f._createHelper(d),c.HmacSHA256=f._createHmacHelper(d)}(Math),function(){function b(a){return a<<8&4278255360|a>>>8&16711935}var c=a,d=c.lib,e=d.WordArray;d=c.enc;d.Utf16=d.Utf16BE={stringify:function(a){for(var b=a.words,a=a.sigBytes,c=[],d=0;d<a;d+=2){var e=b[d>>>2]>>>16-d%4*8&65535;c.push(String.fromCharCode(e))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>1]|=a.charCodeAt(d)<<16-d%2*16;return e.create(c,2*b)}};d.Utf16LE={stringify:function(a){for(var c=a.words,a=a.sigBytes,d=[],e=0;e<a;e+=2){var f=b(c[e>>>2]>>>16-e%4*8&65535);d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var c=a.length,d=[],f=0;f<c;f++)d[f>>>1]|=b(a.charCodeAt(f)<<16-f%2*16);return e.create(d,2*c)}}}(),function(){if("function"==typeof ArrayBuffer){var b=a;b=b.lib;b=b.WordArray;var c=b.init,d=b.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var b=a.byteLength,d=[],e=0;e<b;e++)d[e>>>2]|=a[e]<<24-e%4*8;c.call(this,d,b)}else c.apply(this,arguments)};d.prototype=b}}(),function(b){function c(a,b,c){return a^b^c}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return(a|~b)^c}function f(a,b,c){return a&c|b&~c}function g(a,b,c){return a^(b|~c)}function h(a,b){return a<<b|a>>>32-b}b=a;var i=b.lib,j=i.WordArray,k=i.Hasher;i=b.algo;var l=j.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),m=j.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),n=j.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),o=j.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=j.create([0,1518500249,1859775393,2400959708,2840853838]),q=j.create([1352829926,1548603684,1836072691,2053994217,0]);i=i.RIPEMD160=k.extend({_doReset:function(){this._hash=j.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var r=0;r<16;r++){var i=b+r,j=a[i];a[i]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8)}var k,s,t,u,v,w,x,y,z,A;i=this._hash.words;j=p.words;var B=q.words,C=l.words,D=m.words,E=n.words,F=o.words;w=k=i[0],x=s=i[1],y=t=i[2],z=u=i[3],A=v=i[4];for(var G,r=0;r<80;r+=1)G=k+a[b+C[r]]|0,G+=r<16?c(s,t,u)+j[0]:r<32?d(s,t,u)+j[1]:r<48?e(s,t,u)+j[2]:r<64?f(s,t,u)+j[3]:g(s,t,u)+j[4],G|=0,G=h(G,E[r]),G=G+v|0,k=v,v=u,u=h(t,10),t=s,s=G,G=w+a[b+D[r]]|0,G+=r<16?g(x,y,z)+B[0]:r<32?f(x,y,z)+B[1]:r<48?e(x,y,z)+B[2]:r<64?d(x,y,z)+B[3]:c(x,y,z)+B[4],G|=0,G=h(G,F[r]),G=G+A|0,w=A,A=z,z=h(y,10),y=x,x=G;G=i[1]+t+z|0,i[1]=i[2]+u+A|0,i[2]=i[3]+v+w|0,i[3]=i[4]+k+x|0,i[4]=i[0]+s+y|0,i[0]=G},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),a.sigBytes=4*(b.length+1),this._process();for(var d=this._hash,c=d.words,a=0;a<5;a++){b=c[a];c[a]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8)}return d},clone:function(){var a=k.clone.call(this);return a._hash=this._hash.clone(),a}});b.RIPEMD160=k._createHelper(i),b.HmacRIPEMD160=k._createHmacHelper(i)}(Math),function(){var b=a,c=b.lib;c=c.Base;var d=b.enc,e=d.Utf8;d=b.algo;d.HMAC=c.extend({init:function(a,b){a=this._hasher=new a.init(),"string"==typeof b&&(b=e.parse(b));var c=a.blockSize,d=4*c;b.sigBytes>d&&(b=a.finalize(b)),b.clamp();for(var a=this._oKey=b.clone(),b=this._iKey=b.clone(),f=a.words,g=b.words,h=0;h<c;h++)f[h]^=1549556828,g[h]^=909522486;a.sigBytes=b.sigBytes=d,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher;a=b.finalize(a);b.reset();b=b.finalize(this._oKey.clone().concat(a));return b}})}(),function(){var b=a,c=b.lib,d=c.Base,e=c.WordArray;c=b.algo;var f=c.SHA1,g=c.HMAC,h=c.PBKDF2=d.extend({cfg:d.extend({keySize:4,hasher:f,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,a=g.create(c.hasher,a),i=e.create(),d=e.create([1]),f=i.words,j=d.words,k=c.keySize,c=c.iterations;f.length<k;){var l=a.update(b).finalize(d);a.reset();for(var m=l.words,n=m.length,o=l,p=1;p<c;p++){o=a.finalize(o),a.reset();for(var q=o.words,r=0;r<n;r++)m[r]^=q[r]}i.concat(l),j[0]++}return i.sigBytes=4*k,i}});b.PBKDF2=function(a,b,c){return h.create(c).compute(a,b)}}(),function(){var b=a,c=b.lib,d=c.Base,e=c.WordArray;c=b.algo;var f=c.MD5,g=c.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:f,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,d=c.hasher.create(),h=e.create(),f=h.words,g=c.keySize,c=c.iterations;f.length<g;){i&&d.update(i);var i=d.update(a).finalize(b);d.reset();for(var j=1;j<c;j++)i=d.finalize(i),d.reset();h.concat(i)}return h.sigBytes=4*g,h}});b.EvpKDF=function(a,b,c){return g.create(c).compute(a,b)}}(),function(){var b=a,c=b.lib,d=c.WordArray;c=b.algo;var e=c.SHA256;c=c.SHA224=e.extend({_doReset:function(){this._hash=new d.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=e._doFinalize.call(this);return a.sigBytes-=4,a}});b.SHA224=e._createHelper(c),b.HmacSHA224=e._createHmacHelper(c)}(),function(b){var c=a,d=c.lib,e=d.Base,f=d.WordArray;d=c.x64={};d.Word=e.extend({init:function(a,b){this.high=a,this.low=b}}),d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],c!=b?this.sigBytes=c:this.sigBytes=8*a.length},toX32:function(){for(var a=this.words,b=a.length,c=[],d=0;d<b;d++){var e=a[d];c.push(e.high),c.push(e.low)}return f.create(c,this.sigBytes)},clone:function(){for(var a=e.clone.call(this),b=a.words=this.words.slice(0),c=b.length,d=0;d<c;d++)b[d]=b[d].clone();return a}})}(),function(b){var c=a,d=c.lib,e=d.WordArray,f=d.Hasher;d=c.x64;var g=d.Word;d=c.algo;var h=[],i=[],j=[];!function(){for(var a=1,b=0,c=0;c<24;c++){h[a+5*b]=(c+1)*(c+2)/2%64;var d=b%5,e=(2*a+3*b)%5;a=d,b=e}for(var a=0;a<5;a++)for(var b=0;b<5;b++)i[a+5*b]=b+(2*a+3*b)%5*5;for(var d=1,e=0;e<24;e++){for(var c=0,b=0,a=0;a<7;a++){if(1&d){var f=(1<<a)-1;f<32?b^=1<<f:c^=1<<f-32}128&d?d=d<<1^113:d<<=1}j[e]=g.create(c,b)}}();var k=[];!function(){for(var a=0;a<25;a++)k[a]=g.create()}();d=d.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var a=this._state=[],b=0;b<25;b++)a[b]=new g.init();this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(a,b){for(var c=this._state,d=this.blockSize/2,e=0;e<d;e++){var f=a[b+2*e],l=a[b+2*e+1];f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8);var g=c[e];g.high^=l,g.low^=f}for(var l=0;l<24;l++){for(var f=0;f<5;f++){for(var d=0,e=0,b=0;b<5;b++){var g=c[f+5*b];d^=g.high,e^=g.low}a=k[f];a.high=d,a.low=e}for(var f=0;f<5;f++)for(var a=k[(f+4)%5],m=k[(f+1)%5],n=m.high,m=m.low,d=a.high^(n<<1|m>>>31),e=a.low^(m<<1|n>>>31),b=0;b<5;b++){var g=c[f+5*b];g.high^=d,g.low^=e}for(var a=1;a<25;a++){var g=c[a];m=g.high;n=g.low;var o=h[a];if(o<32)var d=m<<o|n>>>32-o,e=n<<o|m>>>32-o;else var d=n<<o-32|m>>>64-o,e=m<<o-32|n>>>64-o;m=k[i[a]];m.high=d,m.low=e}n=k[0];o=c[0];n.high=o.high,n.low=o.low;for(var f=0;f<5;f++)for(var b=0;b<5;b++){a=f+5*b;var g=c[a];d=k[a];m=k[(f+1)%5+5*b];e=k[(f+2)%5+5*b];g.high=d.high^~m.high&e.high,g.low=d.low^~m.low&e.low}var g=c[0];n=j[l];g.high^=n.high,g.low^=n.low}},_doFinalize:function(){var a=this._data,c=a.words,d=(8*this._nDataBytes,8*a.sigBytes),f=32*this.blockSize;c[d>>>5]|=1<<24-d%32,c[(b.ceil((d+1)/f)*f>>>5)-1]|=128,a.sigBytes=4*c.length,this._process();for(var d=this._state,f=this.cfg.outputLength/8,a=f/8,c=[],g=0;g<a;g++){var h=d[g],k=h.high;h=h.low;k=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),c.push(h),c.push(k)}return new e.init(c,f)},clone:function(){for(var a=f.clone.call(this),b=a._state=this._state.slice(0),c=0;c<25;c++)b[c]=b[c].clone();return a}});c.SHA3=f._createHelper(d),c.HmacSHA3=f._createHmacHelper(d)}(Math),function(){function b(){return f.create.apply(f,arguments)}var c=a,d=c.lib,e=d.Hasher;d=c.x64;var f=d.Word,g=d.WordArray;d=c.algo;var h=[b(1116352408,3609767458),b(1899447441,602891725),b(3049323471,3964484399),b(3921009573,2173295548),b(961987163,4081628472),b(1508970993,3053834265),b(2453635748,2937671579),b(2870763221,3664609560),b(3624381080,2734883394),b(310598401,1164996542),b(607225278,1323610764),b(1426881987,3590304994),b(1925078388,4068182383),b(2162078206,991336113),b(2614888103,633803317),b(3248222580,3479774868),b(3835390401,2666613458),b(4022224774,944711139),b(264347078,2341262773),b(604807628,2007800933),b(770255983,1495990901),b(1249150122,1856431235),b(1555081692,3175218132),b(1996064986,2198950837),b(2554220882,3999719339),b(2821834349,766784016),b(2952996808,2566594879),b(3210313671,3203337956),b(3336571891,1034457026),b(3584528711,2466948901),b(113926993,3758326383),b(338241895,168717936),b(666307205,1188179964),b(773529912,1546045734),b(1294757372,1522805485),b(1396182291,2643833823),b(1695183700,2343527390),b(1986661051,1014477480),b(2177026350,1206759142),b(2456956037,344077627),b(2730485921,1290863460),b(2820302411,3158454273),b(3259730800,3505952657),b(3345764771,106217008),b(3516065817,3606008344),b(3600352804,1432725776),b(4094571909,1467031594),b(275423344,851169720),b(430227734,3100823752),b(506948616,1363258195),b(659060556,3750685593),b(883997877,3785050280),b(958139571,3318307427),b(1322822218,3812723403),b(1537002063,2003034995),b(1747873779,3602036899),b(1955562222,1575990012),b(2024104815,1125592928),b(2227730452,2716904306),b(2361852424,442776044),b(2428436474,593698344),b(2756734187,3733110249),b(3204031479,2999351573),b(3329325298,3815920427),b(3391569614,3928383900),b(3515267271,566280711),b(3940187606,3454069534),b(4118630271,4000239992),b(116418474,1914138554),b(174292421,2731055270),b(289380356,3203993006),b(460393269,320620315),b(685471733,587496836),b(852142971,1086792851),b(1017036298,365543100),b(1126000580,2618297676),b(1288033470,3409855158),b(1501505948,4234509866),b(1607167915,987167468),b(1816402316,1246189591)],i=[];!function(){for(var a=0;a<80;a++)i[a]=b()}();d=d.SHA512=e.extend({_doReset:function(){this._hash=new g.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],j=c[2],f=c[3],g=c[4],k=c[5],l=c[6],c=c[7],m=d.high,n=d.low,o=e.high,p=e.low,q=j.high,r=j.low,s=f.high,t=f.low,u=g.high,v=g.low,w=k.high,x=k.low,y=l.high,z=l.low,A=c.high,B=c.low,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w,N=x,O=y,P=z,aa=A,Q=B,R=0;R<80;R++){var S=i[R];if(R<16)var T=S.high=0|a[b+2*R],U=S.low=0|a[b+2*R+1];else{var V=i[R-15],W=V.high;V=V.low;var X=(W>>>1|V<<31)^(W>>>8|V<<24)^W>>>7;V=(V>>>1|W<<31)^(V>>>8|W<<24)^(V>>>7|W<<25);W=i[R-2];var Y=W.high;W=W.low;var ba=(Y>>>19|W<<13)^(Y<<3|W>>>29)^Y>>>6;W=(W>>>19|Y<<13)^(W<<3|Y>>>29)^(W>>>6|Y<<26);Y=i[R-7];var ca=Y.high;Y=Y.low;var Z=i[R-16],$=Z.high;Z=Z.low;var U=V+Y,T=X+ca+(U>>>0<V>>>0?1:0),U=U+W,T=T+ba+(U>>>0<W>>>0?1:0),U=U+Z,T=T+$+(U>>>0<Z>>>0?1:0);S.high=T,S.low=U}Y=K&M^~K&O;X=L&N^~L&P;ca=C&E^C&G^E&G;V=D&F^D&H^F&H;ba=(C>>>28|D<<4)^(C<<30|D>>>2)^(C<<25|D>>>7);W=(D>>>28|C<<4)^(D<<30|C>>>2)^(D<<25|C>>>7);$=(K>>>14|L<<18)^(K>>>18|L<<14)^(K<<23|L>>>9);Z=(L>>>14|K<<18)^(L>>>18|K<<14)^(L<<23|K>>>9);S=h[R];var da=S.high;S=S.low;Z=Q+Z;$=aa+$+(Z>>>0<Q>>>0?1:0);Z=Z+X;$=$+Y+(Z>>>0<X>>>0?1:0);Z=Z+S;$=$+da+(Z>>>0<S>>>0?1:0);Z=Z+U;$=$+T+(Z>>>0<U>>>0?1:0);Y=W+V;X=ba+ca+(Y>>>0<W>>>0?1:0);aa=O,Q=P,O=M,P=N,M=K,N=L,L=J+Z|0,K=I+$+(L>>>0<J>>>0?1:0)|0,I=G,J=H,G=E,H=F,E=C,F=D,D=Z+Y|0,C=$+X+(D>>>0<Z>>>0?1:0)|0}n=d.low=n+D,d.high=m+C+(n>>>0<D>>>0?1:0),p=e.low=p+F,e.high=o+E+(p>>>0<F>>>0?1:0),r=j.low=r+H,j.high=q+G+(r>>>0<H>>>0?1:0),t=f.low=t+J,f.high=s+I+(t>>>0<J>>>0?1:0),v=g.low=v+L,g.high=u+K+(v>>>0<L>>>0?1:0),x=k.low=x+N,k.high=w+M+(x>>>0<N>>>0?1:0),z=l.low=z+P,l.high=y+O+(z>>>0<P>>>0?1:0),B=c.low=B+Q,c.high=A+aa+(B>>>0<Q>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32,b[(d+128>>>10<<5)+30]=Math.floor(c/4294967296),b[(d+128>>>10<<5)+31]=c,a.sigBytes=4*b.length,this._process();d=this._hash.toX32();return d},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:32});c.SHA512=e._createHelper(d),c.HmacSHA512=e._createHmacHelper(d)}(),function(){var b=a,c=b.x64,d=c.Word,e=c.WordArray;c=b.algo;var f=c.SHA512;c=c.SHA384=f.extend({_doReset:function(){this._hash=new e.init([new d.init(3418070365,3238371032),new d.init(1654270250,914150663),new d.init(2438529370,812702999),new d.init(355462360,4144912697),new d.init(1731405415,4290775857),new d.init(2394180231,1750603025),new d.init(3675008525,1694076839),new d.init(1203062813,3204075428)])},_doFinalize:function(){var a=f._doFinalize.call(this);return a.sigBytes-=16,a}});b.SHA384=f._createHelper(c),b.HmacSHA384=f._createHmacHelper(c)}(),a.lib.Cipher||function(b){var c=a,d=c.lib,e=d.Base,f=d.WordArray,g=d.BufferedBlockAlgorithm,h=c.enc,i=(h.Utf8,h.Base64);h=c.algo;var j=h.EvpKDF,k=d.Cipher=g.extend({cfg:e.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){a&&this._append(a);a=this._doFinalize();return a},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function a(a){return"string"==typeof a?p:o}return function(b){return{encrypt:function(c,d,e){return a(d).encrypt(b,c,d,e)},decrypt:function(c,d,e){return a(d).decrypt(b,c,d,e)}}}}()});h=(d.StreamCipher=k.extend({_doFinalize:function(){var a=this._process(!0);return a},blockSize:1}),c.mode={});var l=d.BlockCipherMode=e.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}});h=h.CBC=function(){function a(a,c,d){var e=this._iv;if(e){e=e;this._iv=b}else var e=this._prevBlock;for(var f=0;f<d;f++)a[c+f]^=e[f]}var c=l.extend();return c.Encryptor=c.extend({processBlock:function(b,c){var d=this._cipher,e=d.blockSize;a.call(this,b,c,e),d.encryptBlock(b,c),this._prevBlock=b.slice(c,c+e)}}),c.Decryptor=c.extend({processBlock:function(b,c){var d=this._cipher,e=d.blockSize,f=b.slice(c,c+e);d.decryptBlock(b,c),a.call(this,b,c,e),this._prevBlock=f}}),c}();var m=c.pad={};m=m.Pkcs7={pad:function(a,b){for(var b=4*b,b=b-a.sigBytes%b,c=b<<24|b<<16|b<<8|b,d=[],e=0;e<b;e+=4)d.push(c);e=f.create(d,b);a.concat(e)},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}};var n=(d.BlockCipher=k.extend({cfg:k.cfg.extend({mode:h,padding:m}),reset:function(){k.reset.call(this);var a=this.cfg,b=a.iv;a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else{var c=a.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==c?this._mode.init(this,b&&b.words):(this._mode=c.call(a,this,b&&b.words),this._mode.__creator=c)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else{var b=this._process(!0);a.unpad(b)}return b},blockSize:4}),d.CipherParams=e.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}));h=c.format={};m=h.OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;if(a)var a=f.create([1398893684,1701076831]).concat(a).concat(b);else var a=b;return a.toString(i)},parse:function(a){a=i.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=f.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}};var o=d.SerializableCipher=e.extend({cfg:e.extend({format:m}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);b=e.finalize(b);e=e.cfg;return n.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);a=a.createDecryptor(c,d).finalize(b.ciphertext);return a},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}});h=c.kdf={};e=h.OpenSSL={execute:function(a,b,c,d){d||(d=f.random(8));a=j.create({keySize:b+c}).compute(a,d);c=f.create(a.words.slice(b),4*c);return a.sigBytes=4*b,n.create({key:a,iv:c,salt:d})}};var p=d.PasswordBasedCipher=o.extend({cfg:o.cfg.extend({kdf:e}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);c=d.kdf.execute(c,a.keySize,a.ivSize);d.iv=c.iv;a=o.encrypt.call(this,a,b,c.key,d);return a.mixIn(c),a},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt);d.iv=c.iv;a=o.decrypt.call(this,a,b,c.key,d);return a}})}(),a.mode.CFB=function(){function b(a,b,c,d){var e=this._iv;if(e){e=e.slice(0);this._iv=void 0}else var e=this._prevBlock;d.encryptBlock(e,0);for(var d=0;d<c;d++)a[b+d]^=e[d]}var c=a.lib.BlockCipherMode.extend();return c.Encryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize;b.call(this,a,c,e,d),this._prevBlock=a.slice(c,c+e)}}),c.Decryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize,f=a.slice(c,c+e);b.call(this,a,c,e,d),this._prevBlock=f}}),c}(),a.mode.ECB=function(){var b=a.lib.BlockCipherMode.extend();return b.Encryptor=b.extend({processBlock:function(a,b){this._cipher.encryptBlock(a,b)}}),b.Decryptor=b.extend({processBlock:function(a,b){this._cipher.decryptBlock(a,b)}}),b}(),a.pad.AnsiX923={pad:function(a,b){var c=a.sigBytes;b=4*b;b=b-c%b;c=c+b-1;a.clamp(),a.words[c>>>2]|=b<<24-c%4*8,a.sigBytes+=b},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}},a.pad.Iso10126={pad:function(b,c){c=4*c;c=c-b.sigBytes%c;b.concat(a.lib.WordArray.random(c-1)).concat(a.lib.WordArray.create([c<<24],1))},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}},a.pad.Iso97971={pad:function(b,c){b.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(b,c)},unpad:function(b){a.pad.ZeroPadding.unpad(b),b.sigBytes--}},a.mode.OFB=function(){var b=a.lib.BlockCipherMode.extend(),c=b.Encryptor=b.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=this._iv,f=this._keystream;e&&(f=this._keystream=e.slice(0),this._iv=void 0),c.encryptBlock(f,0);for(var e=0;e<d;e++)a[b+e]^=f[e]}});return b.Decryptor=c,b}(),a.pad.NoPadding={pad:function(){},unpad:function(){}},function(b){b=a;var c=b.lib,d=c.CipherParams;c=b.enc;var e=c.Hex;c=b.format;c.Hex={stringify:function(a){return a.ciphertext.toString(e)},parse:function(a){a=e.parse(a);return d.create({ciphertext:a})}}}(),function(){var b=a,c=b.lib;c=c.BlockCipher;var d=b.algo,e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[];!function(){for(var a=[],b=0;b<256;b++)b<128?a[b]=b<<1:a[b]=b<<1^283;for(var c=0,p=0,b=0;b<256;b++){var d=p^p<<1^p<<2^p<<3^p<<4;d=d>>>8^255&d^99,e[c]=d,f[d]=c;var o=a[c],q=a[o],r=a[q],s=257*a[d]^16843008*d;g[c]=s<<24|s>>>8,h[c]=s<<16|s>>>16,i[c]=s<<8|s>>>24,j[c]=s;var s=16843009*r^65537*q^257*o^16843008*c;k[d]=s<<24|s>>>8,l[d]=s<<16|s>>>16,m[d]=s<<8|s>>>24,n[d]=s,c?(c=o^a[a[a[r^o]]],p^=a[a[p]]):c=p=1}}();var o=[0,1,2,4,8,16,32,64,128,27,54];d=d.AES=c.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var a=this._keyPriorReset=this._key,b=a.words,a=a.sigBytes/4,i=this._nRounds=a+6,i=4*(i+1),c=this._keySchedule=[],d=0;d<i;d++)if(d<a)c[d]=b[d];else{var f=c[d-1];d%a?a>6&&d%a==4&&(f=e[f>>>24]<<24|e[f>>>16&255]<<16|e[f>>>8&255]<<8|e[255&f]):(f=f<<8|f>>>24,f=e[f>>>24]<<24|e[f>>>16&255]<<16|e[f>>>8&255]<<8|e[255&f],f^=o[d/a|0]<<24),c[d]=c[d-a]^f}for(var a=this._invKeySchedule=[],b=0;b<i;b++){var d=i-b;if(b%4)var f=c[d];else var f=c[d-4];b<4||d<=4?a[b]=f:a[b]=k[e[f>>>24]]^l[e[f>>>16&255]]^m[e[f>>>8&255]]^n[e[255&f]]}}},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,g,h,i,j,e)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,k,l,m,n,f);var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,p,d,e,f,g){for(var h=this._nRounds,i=a[b]^c[0],j=a[b+1]^c[1],k=a[b+2]^c[2],l=a[b+3]^c[3],m=4,n=1;n<h;n++){var o=p[i>>>24]^d[j>>>16&255]^e[k>>>8&255]^f[255&l]^c[m++],q=p[j>>>24]^d[k>>>16&255]^e[l>>>8&255]^f[255&i]^c[m++],r=p[k>>>24]^d[l>>>16&255]^e[i>>>8&255]^f[255&j]^c[m++],s=p[l>>>24]^d[i>>>16&255]^e[j>>>8&255]^f[255&k]^c[m++];i=o,j=q,k=r,l=s}var o=(g[i>>>24]<<24|g[j>>>16&255]<<16|g[k>>>8&255]<<8|g[255&l])^c[m++],q=(g[j>>>24]<<24|g[k>>>16&255]<<16|g[l>>>8&255]<<8|g[255&i])^c[m++],r=(g[k>>>24]<<24|g[l>>>16&255]<<16|g[i>>>8&255]<<8|g[255&j])^c[m++],s=(g[l>>>24]<<24|g[i>>>16&255]<<16|g[j>>>8&255]<<8|g[255&k])^c[m++];a[b]=o,a[b+1]=q,a[b+2]=r,a[b+3]=s},keySize:8});b.AES=c._createHelper(d)}(),function(){function b(a,b){b=(this._lBlock>>>a^this._rBlock)&b;this._rBlock^=b,this._lBlock^=b<<a}function c(a,b){b=(this._rBlock>>>a^this._lBlock)&b;this._lBlock^=b,this._rBlock^=b<<a}var d=a,e=d.lib,f=e.WordArray;e=e.BlockCipher;var g=d.algo,h=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],i=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],j=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],k=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=g.DES=e.extend({_doReset:function(){for(var a=this._key,a=a.words,b=[],c=0;c<56;c++){var d=h[c]-1;b[c]=a[d>>>5]>>>31-d%32&1}for(var d=this._subKeys=[],a=0;a<16;a++){for(var e=d[a]=[],f=j[a],c=0;c<24;c++)e[c/6|0]|=b[(i[c]-1+f)%28]<<31-c%6,e[4+(c/6|0)]|=b[28+(i[c+24]-1+f)%28]<<31-c%6;e[0]=e[0]<<1|e[0]>>>31;for(var c=1;c<7;c++)e[c]=e[c]>>>4*(c-1)+3;e[7]=e[7]<<5|e[7]>>>27}for(var f=this._invSubKeys=[],c=0;c<16;c++)f[c]=d[15-c]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._subKeys)},decryptBlock:function(a,b){this._doCryptBlock(a,b,this._invSubKeys)},_doCryptBlock:function(a,d,e){this._lBlock=a[d],this._rBlock=a[d+1],b.call(this,4,252645135),b.call(this,16,65535),c.call(this,2,858993459),c.call(this,8,16711935),b.call(this,1,1431655765);for(var f=0;f<16;f++){for(var n=e[f],m=this._lBlock,h=this._rBlock,i=0,j=0;j<8;j++)i|=k[j][((h^n[j])&l[j])>>>0];this._lBlock=h,this._rBlock=m^i}j=this._lBlock;this._lBlock=this._rBlock,this._rBlock=j,b.call(this,1,1431655765),c.call(this,8,16711935),c.call(this,2,858993459),b.call(this,16,65535),b.call(this,4,252645135),a[d]=this._lBlock,a[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});d.DES=e._createHelper(m);g=g.TripleDES=e.extend({_doReset:function(){var a=this._key;a=a.words;this._des1=m.createEncryptor(f.create(a.slice(0,2))),this._des2=m.createEncryptor(f.create(a.slice(2,4))),this._des3=m.createEncryptor(f.create(a.slice(4,6)))},encryptBlock:function(a,b){this._des1.encryptBlock(a,b),this._des2.decryptBlock(a,b),this._des3.encryptBlock(a,b)},decryptBlock:function(a,b){this._des3.decryptBlock(a,b),this._des2.encryptBlock(a,b),this._des1.decryptBlock(a,b)},keySize:6,ivSize:2,blockSize:2});d.TripleDES=e._createHelper(g)}(),function(){function b(){for(var a=this._S,b=this._i,c=this._j,d=0,f=0;f<4;f++){b=(b+1)%256,c=(c+a[b])%256;var e=a[b];a[b]=a[c],a[c]=e,d|=a[(a[b]+a[c])%256]<<24-8*f}return this._i=b,this._j=c,d}var c=a,d=c.lib;d=d.StreamCipher;var e=c.algo,f=e.RC4=d.extend({_doReset:function(){for(var a=this._key,b=a.words,a=a.sigBytes,c=this._S=[],f=0;f<256;f++)c[f]=f;for(var f=0,d=0;f<256;f++){var e=f%a;e=b[e>>>2]>>>24-e%4*8&255;d=(d+c[f]+e)%256;e=c[f];c[f]=c[d],c[d]=e}this._i=this._j=0},_doProcessBlock:function(a,c){a[c]^=b.call(this)},keySize:8,ivSize:0});c.RC4=d._createHelper(f);e=e.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var a=this.cfg.drop;a>0;a--)b.call(this)}});c.RC4Drop=d._createHelper(e)}(),a.mode.CTRGladman=function(){function b(a){if(255===(a>>24&255)){var b=a>>16&255,c=a>>8&255,d=255&a;255===b?(b=0,255===c?(c=0,255===d?d=0:++d):++c):++b,a=0,a+=b<<16,a+=c<<8,a+=d}else a+=1<<24;return a}function c(a){return 0===(a[0]=b(a[0]))&&(a[1]=b(a[1])),a}var d=a.lib.BlockCipherMode.extend(),e=d.Encryptor=d.extend({processBlock:function(a,b){var d=this._cipher,e=d.blockSize,f=this._iv,g=this._counter;f&&(g=this._counter=f.slice(0),this._iv=void 0),c(g);f=g.slice(0);d.encryptBlock(f,0);for(var g=0;g<e;g++)a[b+g]^=f[g]}});return d.Decryptor=e,d}(),function(){function b(){for(var a=this._X,b=this._C,c=0;c<8;c++)g[c]=b[c];b[0]=b[0]+1295307597+this._b|0,b[1]=b[1]+3545052371+(b[0]>>>0<g[0]>>>0?1:0)|0,b[2]=b[2]+886263092+(b[1]>>>0<g[1]>>>0?1:0)|0,b[3]=b[3]+1295307597+(b[2]>>>0<g[2]>>>0?1:0)|0,b[4]=b[4]+3545052371+(b[3]>>>0<g[3]>>>0?1:0)|0,b[5]=b[5]+886263092+(b[4]>>>0<g[4]>>>0?1:0)|0,b[6]=b[6]+1295307597+(b[5]>>>0<g[5]>>>0?1:0)|0,b[7]=b[7]+3545052371+(b[6]>>>0<g[6]>>>0?1:0)|0,this._b=b[7]>>>0<g[7]>>>0?1:0;for(var c=0;c<8;c++){var d=a[c]+b[c],f=65535&d,e=d>>>16;f=((f*f>>>17)+f*e>>>15)+e*e;e=((4294901760&d)*d|0)+((65535&d)*d|0);h[c]=f^e}a[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,a[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,a[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,a[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,a[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,a[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,a[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,a[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}var c=a,d=c.lib;d=d.StreamCipher;var e=c.algo,f=[],g=[],h=[];e=e.Rabbit=d.extend({_doReset:function(){for(var a=this._key.words,c=this.cfg.iv,d=0;d<4;d++)a[d]=16711935&(a[d]<<8|a[d]>>>24)|4278255360&(a[d]<<24|a[d]>>>8);var e=this._X=[a[0],a[3]<<16|a[2]>>>16,a[1],a[0]<<16|a[3]>>>16,a[2],a[1]<<16|a[0]>>>16,a[3],a[2]<<16|a[1]>>>16];a=this._C=[a[2]<<16|a[2]>>>16,4294901760&a[0]|65535&a[1],a[3]<<16|a[3]>>>16,4294901760&a[1]|65535&a[2],a[0]<<16|a[0]>>>16,4294901760&a[2]|65535&a[3],a[1]<<16|a[1]>>>16,4294901760&a[3]|65535&a[0]];this._b=0;for(var d=0;d<4;d++)b.call(this);for(var d=0;d<8;d++)a[d]^=e[d+4&7];if(c){e=c.words;c=e[0];e=e[1];c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);var f=c>>>16|4294901760&e,g=e<<16|65535&c;a[0]^=c,a[1]^=f,a[2]^=e,a[3]^=g,a[4]^=c,a[5]^=f,a[6]^=e,a[7]^=g;for(var d=0;d<4;d++)b.call(this)}},_doProcessBlock:function(a,c){var d=this._X;b.call(this),f[0]=d[0]^d[5]>>>16^d[3]<<16,f[1]=d[2]^d[7]>>>16^d[5]<<16,f[2]=d[4]^d[1]>>>16^d[7]<<16,f[3]=d[6]^d[3]>>>16^d[1]<<16;for(var d=0;d<4;d++)f[d]=16711935&(f[d]<<8|f[d]>>>24)|4278255360&(f[d]<<24|f[d]>>>8),a[c+d]^=f[d]},blockSize:4,ivSize:2});c.Rabbit=d._createHelper(e)}(),a.mode.CTR=function(){var b=a.lib.BlockCipherMode.extend(),c=b.Encryptor=b.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=this._iv,f=this._counter;e&&(f=this._counter=e.slice(0),this._iv=void 0);e=f.slice(0);c.encryptBlock(e,0),f[d-1]=f[d-1]+1|0;for(var c=0;c<d;c++)a[b+c]^=e[c]}});return b.Decryptor=c,b}(),function(){function b(){for(var a=this._X,b=this._C,c=0;c<8;c++)g[c]=b[c];b[0]=b[0]+1295307597+this._b|0,b[1]=b[1]+3545052371+(b[0]>>>0<g[0]>>>0?1:0)|0,b[2]=b[2]+886263092+(b[1]>>>0<g[1]>>>0?1:0)|0,b[3]=b[3]+1295307597+(b[2]>>>0<g[2]>>>0?1:0)|0,b[4]=b[4]+3545052371+(b[3]>>>0<g[3]>>>0?1:0)|0,b[5]=b[5]+886263092+(b[4]>>>0<g[4]>>>0?1:0)|0,b[6]=b[6]+1295307597+(b[5]>>>0<g[5]>>>0?1:0)|0,b[7]=b[7]+3545052371+(b[6]>>>0<g[6]>>>0?1:0)|0,this._b=b[7]>>>0<g[7]>>>0?1:0;for(var c=0;c<8;c++){var d=a[c]+b[c],f=65535&d,e=d>>>16;f=((f*f>>>17)+f*e>>>15)+e*e;e=((4294901760&d)*d|0)+((65535&d)*d|0);h[c]=f^e}a[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,a[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,a[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,a[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,a[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,a[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,a[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,a[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}var c=a,d=c.lib;d=d.StreamCipher;var e=c.algo,f=[],g=[],h=[];e=e.RabbitLegacy=d.extend({_doReset:function(){var a=this._key.words,c=this.cfg.iv,d=this._X=[a[0],a[3]<<16|a[2]>>>16,a[1],a[0]<<16|a[3]>>>16,a[2],a[1]<<16|a[0]>>>16,a[3],a[2]<<16|a[1]>>>16];a=this._C=[a[2]<<16|a[2]>>>16,4294901760&a[0]|65535&a[1],a[3]<<16|a[3]>>>16,4294901760&a[1]|65535&a[2],a[0]<<16|a[0]>>>16,4294901760&a[2]|65535&a[3],a[1]<<16|a[1]>>>16,4294901760&a[3]|65535&a[0]];this._b=0;for(var e=0;e<4;e++)b.call(this);for(var e=0;e<8;e++)a[e]^=d[e+4&7];if(c){d=c.words;c=d[0];d=d[1];c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8);d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8);var f=c>>>16|4294901760&d,g=d<<16|65535&c;a[0]^=c,a[1]^=f,a[2]^=d,a[3]^=g,a[4]^=c,a[5]^=f,a[6]^=d,a[7]^=g;for(var e=0;e<4;e++)b.call(this)}},_doProcessBlock:function(a,c){var d=this._X;b.call(this),f[0]=d[0]^d[5]>>>16^d[3]<<16,f[1]=d[2]^d[7]>>>16^d[5]<<16,f[2]=d[4]^d[1]>>>16^d[7]<<16,f[3]=d[6]^d[3]>>>16^d[1]<<16;for(var d=0;d<4;d++)f[d]=16711935&(f[d]<<8|f[d]>>>24)|4278255360&(f[d]<<24|f[d]>>>8),a[c+d]^=f[d]},blockSize:4,ivSize:2});c.RabbitLegacy=d._createHelper(e)}(),a.pad.ZeroPadding={pad:function(a,b){b=4*b;a.clamp(),a.sigBytes+=b-(a.sigBytes%b||b)},unpad:function(a){for(var b=a.words,c=a.sigBytes-1;!(b[c>>>2]>>>24-c%4*8&255);)c--;a.sigBytes=c+1}},a})}),null);
__d("MediaUploadFBCryptoJSHasher",["CryptoJS","MediaUploadTime","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=b("CryptoJS");a=function(){function a(a,b){b=b.currentTimeProvider;this.$2=a;this.$1=b}var c=a.prototype;c.$3=function(){switch(this.$2.hashingAlgorithm){case"sha256":return g.algo.SHA256;case"md5":return g.algo.MD5;default:return null}};c.$4=function(){switch(this.$2.outputEncoding){case"base64":return g.enc.Base64;case"hex":return g.enc.Hex;default:return null}};c.$5=function(a,c,d){return new(b("Promise"))(function(b){var e=new FileReader();e.onload=function(){e.result instanceof ArrayBuffer?b({isSuccess:!0,data:e.result}):b({isSuccess:!1,rawErrorCode:"INVALID_TYPE_FILE_READER"})};e.onerror=function(){b({isSuccess:!1,rawErrorObject:e.error})};e.readAsArrayBuffer(a.slice(c,c+d))})};c.$6=function(a,c){var d,e,f,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:d=this.$2.takeFirstBytes==null?a.size:Math.min(this.$2.takeFirstBytes,a.size),e=0;case 2:if(!(e<d)){i.next=15;break}f=Math.min(this.$2.maxChunkSize,d-e);i.next=6;return b("regeneratorRuntime").awrap(this.$5(a,e,f));case 6:h=i.sent;if(!h.isSuccess){i.next=11;break}c.update(g.lib.WordArray.create(h.data));i.next=12;break;case 11:return i.abrupt("return",h);case 12:e+=f;i.next=2;break;case 15:return i.abrupt("return",null);case 16:case"end":return i.stop()}},null,this)};c.hash=function(a){var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(this.$2.maxFileSize!=null&&a.size>this.$2.maxFileSize)){i.next=2;break}return i.abrupt("return",{outcome:"FILE_TOO_LARGE"});case 2:c=this.$3();if(!(c==null)){i.next=5;break}return i.abrupt("return",{outcome:"FAILURE",rawErrorCode:"INVALID_ALGORITHM"});case 5:d=this.$4();if(!(d==null)){i.next=8;break}return i.abrupt("return",{outcome:"FAILURE",rawErrorCode:"UNSUPPORTED_OUTPUT_ENCODING"});case 8:e=this.$1();f=c.create();i.prev=10;i.next=13;return b("regeneratorRuntime").awrap(this.$6(a,f));case 13:g=i.sent;if(!(g==null||g.isSuccess)){i.next=18;break}return i.abrupt("return",{outcome:"SUCCESS",value:{algorithm:this.$2.hashingAlgorithm,hashValue:f.finalize().toString(d),encoding:this.$2.outputEncoding,calculationTimeCost:b("MediaUploadTime").subtractTime(this.$1(),e)}});case 18:return i.abrupt("return",{outcome:"FAILURE",rawErrorCode:(h=g==null?void 0:g.rawErrorCode)!=null?h:"INTERNAL_ERROR",rawErrorObject:g==null?void 0:g.rawErrorObject});case 19:i.next=24;break;case 21:i.prev=21;i.t0=i["catch"](10);return i.abrupt("return",{outcome:"FAILURE",rawErrorCode:"INTERNAL_ERROR",rawErrorObject:i.t0});case 24:case"end":return i.stop()}},null,this,[[10,21]])};return a}();e.exports=a}),null);
__d("MediaUploadOperationAttemptOutcome",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["SUCCESS","CANCELED","TRANSIENT_FAILURE","TRANSIENT_FAILURE_IMMEDIATE_RETRY","NON_TRANSIENT_FAILURE"]);c=a;e.exports=c}),null);
__d("MediaUploadFBEndpointRequest",["AsyncRequest","MediaUploadCancelablePromise","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.send=function(a,c){var d=this;return new(b("MediaUploadCancelablePromise"))(function(e){c.emitStageEvent(b("MediaUploadStageEvent").STAGE_STARTED,a.stage);var f=a.createPayload();if(f==null){c.emitStageEvent(b("MediaUploadStageEvent").STAGE_FAILED,a.stage);e(b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE);return}var g=new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setURI(a.uri).setData(f).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",c.sessionContext.sessionID).setProgressHandler(function(){a.networkNotifier.notifyOnProgress(c,a.stage)}).setHandler(function(b){e(d.$1(a,c,b))}).setErrorHandler(function(b){e(d.$2(a,c,b))});if(g.send()){a.networkNotifier.notifyOnNewRequest(c,a.stage);return{cancel:function(){a.networkNotifier.notifyOnAbandon(c,a.stage),g.abort()}}}else e(b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE)})};c.$1=function(a,c,d){var e;a.networkNotifier.notifyOnResponse(c,a.stage);(e=c.retryState)==null?void 0:e.resetBackoff();a.acceptSuccessfulResponse(d);c.emitStageEvent(b("MediaUploadStageEvent").STAGE_SUCCEED,a.stage);return b("MediaUploadOperationAttemptOutcome").SUCCESS};c.$2=function(a,c,d){var e=d.error<1e3,f=d.error>9999;e||f?a.networkNotifier.notifyOnResponse(c,a.stage):a.networkNotifier.notifyOnTransportError(c,a.stage);a.acceptErrorResponse(d);c.emitStageEvent(b("MediaUploadStageEvent").STAGE_FAILED,a.stage);c=e&&d.error>=400&&d.error<500||f&&!d.transientError;return c?b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:b("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE};return a}();e.exports=a}),null);
__d("MediaUploadNetworkStatus",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({UNKNOWN:"Unknown",CONNECTED:"Connected",DISCONNECTED:"Disconnected",TIMEOUT:"TimedOut"});c=a;e.exports=c}),null);
__d("MediaUploadFBInternetProbe",["AsyncRequest","MediaUploadCancelablePromise","MediaUploadNetworkStatus","Promise","regeneratorRuntime","uuid"],(function(a,b,c,d,e,f){"use strict";var g="https://rupload.facebook.com/fb_video/ping-";a=function(){function a(a,c){this.$2=a,this.$1=c,this.$3=[""+g+b("uuid")()]}var c=a.prototype;c.$4=function(a){return new(b("MediaUploadCancelablePromise"))(function(c){var d=new(b("AsyncRequest"))().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(a).setReadOnly(!0).setOption("suppressEvaluation",!0).setHandler(function(a){a=a==null?void 0:(a=a.payload)==null?void 0:a.status;c(a===200?b("MediaUploadNetworkStatus").CONNECTED:b("MediaUploadNetworkStatus").DISCONNECTED)}).setTransportErrorHandler(function(){c(b("MediaUploadNetworkStatus").DISCONNECTED)}).setErrorHandler(function(){c(b("MediaUploadNetworkStatus").DISCONNECTED)});d.send()||c(b("MediaUploadNetworkStatus").DISCONNECTED);return{cancel:function(){d.abort()}}})};c.$5=function(){var a=this;return new(b("Promise"))(function(c){a.$1.delayedExecutor(a.$2.timeout,function(){return c(b("MediaUploadNetworkStatus").TIMEOUT)})})};c.probe=function(){var a=this,c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=this.$3.map(function(b){return a.$4(b)});d=b("Promise").race([this.$5()].concat(c.map(function(a){return a.promise})));f.next=4;return b("regeneratorRuntime").awrap(d);case 4:e=f.sent;c.forEach(function(a){return a.cancel()});return f.abrupt("return",e);case 7:case"end":return f.stop()}},null,this)};return a}();e.exports=a}),null);
__d("MediaUploadRetryableOperation",["MediaUploadCancelablePromise","MediaUploadOperationAttemptOutcome","MediaUploadOperationOutcome"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){var e=this;this.$4=null;this.$1=a;this.$2=c;this.$3=d;this.cancelablePromise=new(b("MediaUploadCancelablePromise"))(function(a){e.$5(a);return{cancel:function(){var c;(c=e.$4)==null?void 0:c.cancel();e.$4=null;a(b("MediaUploadOperationOutcome").CANCELED)}}})}a.createAsPromise=function(b,c,d){b=new a(b,c,d);return b.cancelablePromise};var c=a.prototype;c.$5=function(a){var c=this,d=this.$1();this.$4=d;this.$3.promiseTerminator(d.promise.then(function(b){c.$4=null,c.$6(a,b)},function(d){c.$4=null;c.$6(a,b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE);throw d}))};c.$6=function(a,c){switch(c){case b("MediaUploadOperationAttemptOutcome").CANCELED:a(b("MediaUploadOperationOutcome").CANCELED);break;case b("MediaUploadOperationAttemptOutcome").SUCCESS:a(b("MediaUploadOperationOutcome").SUCCESS);break;case b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:a(b("MediaUploadOperationOutcome").FAILED_NON_TRANSIENT);break;case b("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE:this.$7(a,!1);break;case b("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE_IMMEDIATE_RETRY:this.$7(a,!0);break}};c.$7=function(a,c){var d=this;this.$2.increaseRetryAttemptCounter();if(this.$2.exceedTotalDuration())a(b("MediaUploadOperationOutcome").FAILED_OUT_OF_TIME);else if(this.$2.exceedTotalRetries())a(b("MediaUploadOperationOutcome").FAILED_NO_MORE_RETRIES);else if(c)this.$5(a);else{c=this.$2.calculateBackoffDelay();this.$4=this.$3.delayedExecutor(c,function(){return d.$5(a)},function(){return a(b("MediaUploadOperationOutcome").CANCELED)})}};return a}();e.exports=a}),null);
__d("MediaUploadFBNetworkAssetStrategy",["MediaUploadPipeline","MediaUploadRetryableOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d){this.$1=a,this.startRequest=b,this.uploadServiceRequest=c,this.receiveRequest=d}var c=a.prototype;c.run=function(a){var c=this,d=a.asset.dataAsFile();if(d==null)throw this.$1.createThrowableError("Browser is not compatible with current version of the SDK");else{var e=new(b("MediaUploadPipeline"))(this.$1);e.addCancelableStep(function(){return b("MediaUploadRetryableOperation").createAsPromise(function(){return c.startRequest.send(a)},a.retryState,c.$1)});e.addCancelableStep(function(){return b("MediaUploadRetryableOperation").createAsPromise(function(){return c.uploadServiceRequest.send(a,d,c.startRequest.retriveResponse(a))},a.retryState,c.$1)});e.addCancelableStep(function(){return b("MediaUploadRetryableOperation").createAsPromise(function(){return c.receiveRequest.send(a,c.startRequest.retriveResponse(a),c.uploadServiceRequest.retriveResponse(a))},a.retryState,c.$1)});return e.run()}};c.cancel=function(){};return a}();e.exports=a}),null);
__d("MediaUploadFBNetworkProbe",["MediaUploadNetworkStatus","Network"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.probe=function(){return b("Network").isOnline()?b("MediaUploadNetworkStatus").CONNECTED:b("MediaUploadNetworkStatus").DISCONNECTED};return a}();e.exports=a}),null);
__d("MediaUploadFBReceiveRequest",["ActorURI","MediaUploadCancelablePromise","MediaUploadFBEndpointRequest","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent"],(function(a,b,c,d,e,f){"use strict";var g="MediaUploadFBReceiveRequest";a=function(){function a(a){this.$1=b("MediaUploadFBStage").RECEIVE_REQUEST,this.$2=a.entryPoint,this.$3=a.payloadHook,this.$4=a.customHeadersHook,this.$5=a.envParams,this.$6=new(b("MediaUploadFBEndpointRequest"))(),this.$7=a.networkNotifier}var c=a.prototype;c.send=function(a,c,d){var e=this;if(this.configuration==null)throw this.$5.createThrowableError("Missing configuration in the MediaUploadFBReceiveRequest");if((c==null?void 0:c.skip_upload)===!0){a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").SUCCESS});a.emitStageEvent(b("MediaUploadStageEvent").STAGE_SUCCEED,this.$1);return b("MediaUploadCancelablePromise").resolve(b("MediaUploadOperationAttemptOutcome").SUCCESS)}return this.$6.send({stage:this.$1,networkNotifier:this.$7,uri:a.request.attributes.actorID==null?this.configuration.baseURI:b("ActorURI").create(this.configuration.baseURI,a.request.attributes.actorID),createPayload:function(){return e.$8(a,c,d)},createCustomHeaders:function(){return e.$9(a)},acceptSuccessfulResponse:function(c){a.processing.rawData.set(g,c.payload),a.recordStageOutcome({stage:e.$1,outcome:b("MediaUploadFBStageOutcome").SUCCESS})},acceptErrorResponse:function(c){a.recordStageOutcome({stage:e.$1,outcome:b("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:c.error,displayError:{summary:c.errorSummary,description:c.errorDescription},errorAttributes:{silentError:c.silentError,transientError:c.transientError},networkRequestID:(c=c.payload)==null?void 0:c.__www_request_id__})}},a)};c.$9=function(a){var b=this.$4;if(b)return b({assetSnapshot:a.composeSnapshot(),sessionSnapshot:a.sessionContext.composeSnapshot()});else return null};c.$8=function(a,c,d){if(c==null){a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_START_CALL_RESPONSE"});return null}if(d==null){a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_UPLOAD_SERVICE_RESPONSE"});return null}var e=a.asset.dataAsFile();e={waterfall_id:a.sessionContext.sessionID,target_id:a.request.attributes.targetID,video_id:c.video_id,source:this.$2.sourceType,composer_entry_point_ref:this.$2.entryPointRef,supports_chunking:!0,supports_upload_service:!0,partition_start_offset:0,partition_end_offset:e==null?void 0:e.size,start_offset:0,end_offset:e==null?void 0:e.size,upload_speed:a.uploadSummary.computeSpeedBps(),fbuploader_video_file_chunk:d.everstoreHandle,has_file_been_replaced:a.request.attributes.hasFileBeenReplaced,composer_dialog_version:a.request.attributes.composerDialogVersion,composer_work_shared_draft_mode:a.request.attributes.workSharedDraftMode};d=this.$3;d!=null&&d({assetSnapshot:a.composeSnapshot(),sessionSnapshot:a.sessionContext.composeSnapshot(),startCallResponse:c,payload:e});return e};return a}();e.exports=a}),null);
__d("MediaUploadFBStartRequest",["ActorURI","MediaUploadFBEndpointRequest","MediaUploadFBStage","MediaUploadFBStageOutcome"],(function(a,b,c,d,e,f){"use strict";var g="MediaUploadFBStartRequest";a=function(){function a(a){this.$1=b("MediaUploadFBStage").START_REQUEST,this.$2=a.entryPoint,this.$3=a.payloadHook,this.$4=a.customHeadersHook,this.$5=a.envParams,this.$6=new(b("MediaUploadFBEndpointRequest"))(),this.$7=a.networkNotifier}var c=a.prototype;c.retriveResponse=function(a){return a.processing.rawData.getUnsafe(g)};c.send=function(a){var c=this;if(this.configuration==null)throw this.$5.createThrowableError("Missing configuration in the MediaUploadFBStartRequest");return this.$6.send({stage:this.$1,networkNotifier:this.$7,uri:a.request.attributes.actorID==null?this.configuration.baseURI:b("ActorURI").create(this.configuration.baseURI,a.request.attributes.actorID),createPayload:function(){return c.$8(a)},createCustomHeaders:function(){return c.$9(a)},acceptSuccessfulResponse:function(d){var e=d.payload;if(e.video_id!=null)a.processing.rawData.set(g,e),a.videoID=e.video_id,a.recordStageOutcome({stage:c.$1,outcome:b("MediaUploadFBStageOutcome").SUCCESS});else{a.recordStageOutcome({stage:c.$1,outcome:b("MediaUploadFBStageOutcome").INVALID_SERVER_RESPONSE,networkRequestID:(e=d.payload)==null?void 0:e.__www_request_id__})}},acceptErrorResponse:function(d){a.recordStageOutcome({stage:c.$1,outcome:b("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:d.error,displayError:{summary:d.errorSummary,description:d.errorDescription},errorAttributes:{silentError:d.silentError,transientError:d.transientError},networkRequestID:(d=d.payload)==null?void 0:d.__www_request_id__})}},a)};c.$9=function(a){var b=this.$4;if(b!=null)return b({assetSnapshot:a.composeSnapshot(),sessionSnapshot:a.sessionContext.composeSnapshot()});else return null};c.$8=function(a){var b,c=a.asset.dataAsFile();b={waterfall_id:a.sessionContext.sessionID,target_id:a.request.attributes.targetID,source:this.$2.sourceType,composer_entry_point_ref:this.$2.entryPointRef,supports_chunking:c!=null,supports_file_api:c!=null,file_size:c==null?0:c.size,file_extension:String(a.asset.data.extension),spherical:(b=a.metadata)==null?void 0:b.isSpherical,partition_start_offset:0,partition_end_offset:c==null?void 0:c.size,has_file_been_replaced:a.request.attributes.hasFileBeenReplaced,composer_dialog_version:a.request.attributes.composerDialogVersion,video_publisher_action_source:a.request.attributes.publisherActionSource,composer_work_shared_draft_mode:a.request.attributes.workSharedDraftMode};c=this.$3;c!=null&&c({assetSnapshot:a.composeSnapshot(),sessionSnapshot:a.sessionContext.composeSnapshot(),payload:b});return b};return a}();e.exports=a}),null);
__d("MediaUploadFBUploadServiceRequest",["AsyncResponse","MediaUploadCancelablePromise","MediaUploadFBStage","MediaUploadFBStageOutcome","MediaUploadOperationAttemptOutcome","MediaUploadStageEvent","ResumableUploadService","ResumableUploadServiceState.enum","md5"],(function(a,b,c,d,e,f){"use strict";var g="MediaUploadFBUploadServiceRequest";a=function(){function a(a){this.$1=b("MediaUploadFBStage").BYTES_UPLOAD,this.$2=a.envParams,this.$3=a.networkNotifier}var c=a.prototype;c.send=function(a,c,d){var e=this;return new(b("MediaUploadCancelablePromise"))(function(f){a.emitStageEvent(b("MediaUploadStageEvent").STAGE_STARTED,e.$1);var g=e.configuration;if(g==null)throw e.$2.createThrowableError("Missing configuration in the MediaUploadFBUploadServiceRequest");if(d==null){a.recordStageOutcome({stage:e.$1,outcome:b("MediaUploadFBStageOutcome").MISSING_MANDATORY_DATA,rawErrorCode:"MISSING_START_CALL_RESPONSE"});a.emitStageEvent(b("MediaUploadStageEvent").STAGE_FAILED,e.$1);f(b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE);return}if(d.skip_upload){a.uploadSummary.updateForUploadSkip(c.size);a.recordStageOutcome({stage:e.$1,outcome:b("MediaUploadFBStageOutcome").SUCCESS});a.emitStageEvent(b("MediaUploadStageEvent").STAGE_SUCCEED,e.$1);f(b("MediaUploadOperationAttemptOutcome").SUCCESS);return}a.uploadSummary.updateForUploadStart(c.size);a.recalculateProgressAndEmit();g=e.$4(a,c,g,d);var h=b("ResumableUploadService").create(g);a.processing.uploadServiceDomain=h.getServiceName();e.$5(a,h,f);h.resume(c.file);e.$3.notifyOnNewRequest(a,e.$1);return{cancel:function(){h.cancel()}}})};c.retriveResponse=function(a){return a.processing.rawData.getUnsafe(g)};c.$6=function(a,c,d){this.$3.notifyOnResponse(a,this.$1),typeof d==="string"?(a.processing.rawData.set(g,{everstoreHandle:d}),a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").SUCCESS}),a.emitStageEvent(b("MediaUploadStageEvent").STAGE_SUCCEED,this.$1),c(b("MediaUploadOperationAttemptOutcome").SUCCESS)):(a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").INVALID_SERVER_RESPONSE,rawErrorCode:"RECEIVED_HANDLE_IS_NOT_STRING"}),a.emitStageEvent(b("MediaUploadStageEvent").STAGE_FAILED,this.$1),c(b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE))};c.$7=function(a,c,d){d.error<1e3?this.$3.notifyOnResponse(a,this.$1):this.$3.notifyOnTransportError(a,this.$1);a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorCode:d.error,displayError:{summary:d.errorSummary,description:d.errorDescription},errorAttributes:{silentError:d.silentError,transientError:d.transientError}});a.emitStageEvent(b("MediaUploadStageEvent").STAGE_FAILED,this.$1);a=d.error>=400&&d.error<500;c(a?b("MediaUploadOperationAttemptOutcome").NON_TRANSIENT_FAILURE:b("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE)};c.$8=function(a,c,d){d instanceof b("AsyncResponse")?this.$7(a,c,d):(this.$3.notifyOnAbandon(a,this.$1),a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").REQUEST_ERROR,rawErrorObject:d}),a.emitStageEvent(b("MediaUploadStageEvent").STAGE_FAILED,this.$1),c(b("MediaUploadOperationAttemptOutcome").TRANSIENT_FAILURE))};c.$9=function(a,c){this.$3.notifyOnAbandon(a,this.$1),a.recordStageOutcome({stage:this.$1,outcome:b("MediaUploadFBStageOutcome").CANCEL}),a.emitStageEvent(b("MediaUploadStageEvent").STAGE_CANCELED,this.$1),c(b("MediaUploadOperationAttemptOutcome").CANCELED)};c.$10=function(a,c){this.$3.notifyOnProgress(a,this.$1),(c==null?void 0:c.loaded)!=null&&(a.uploadSummary.updateForProgress(c.loaded),a.emitStageEvent(b("MediaUploadStageEvent").STAGE_PROGRESS,this.$1))};c.$5=function(a,c,d){var e=this,f;c.addListener((f=b("ResumableUploadServiceState.enum")).SUCCESS,function(b){return e.$6(a,d,b)});c.addListener(f.TRANSPORT_FAILURE,function(b){return e.$7(a,d,b)});c.addListener(f.FAIL,function(b){return e.$8(a,d,b)});c.addListener(f.CANCEL,function(){return e.$9(a,d)});c.addListener(f.PROGRESS,function(b){return e.$10(a,b)})};c.$4=function(a,c,d,e){var f;c=c.file;f=[String(c.lastModified),c.name,c.type,String(c.size),(f=(f=a.processing.pseudoHash)==null?void 0:f.hashValue)!=null?f:[a.sessionContext.sessionID,a.assetID].join("-")].join("-");f=[b("md5")(f),String(e.start_offset),String(e.end_offset)].join("-");var g=d.tracing.enabled&&d.tracing.minFileSizeKB<c.size/1024?["video_upload_www",[a.assetID,String(a.retryState.getRetryAttempts())].join("_"),[String(a.sessionContext.sessionID),String(e.video_id)].join("_")].join(":"):null,h=d.defaultService,i=h.serviceName;h=h.serviceDomain;a.retryState.getRetryAttemptsSinceLastReset()<10&&d.targetedService!=null&&(i=d.targetedService.serviceName,h=d.targetedService.serviceDomain);return{consumer:"fb_video",accessToken:"",sessionKey:f,serviceName:i,serviceDomain:h,tracingHeaderValue:g,receiveParameters:{start_offset:String(e.start_offset),end_offset:String(e.end_offset),composer_session_id:a.sessionContext.sessionID,upload_session_id:String(e.upload_session_id),product_media_id:e.video_id,xpv_asset_id:e.xpv_asset_id,is_xpv_single_prod:e.is_xpv_single_prod,fb_region:e.fb_region,total_file_size:String(c.size),target_id:a.request.attributes.targetID,video_waterfall_id:a.sessionContext.sessionID}}};return a}();e.exports=a}),null);
__d("MediaUploadSingleAssetPublisher",["Promise","VideoUploadGraphQLPostRequestManager","VideoUploadPostRequestManager","VideoUploadRequestContext"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}a.publish=function(b){a.$1==null&&(a.$1=new a());return a.$1.publish(b)};var c=a.prototype;c.publish=function(a){var c=this;return new(b("Promise"))(function(b){var d=c.$2(a.sessionSnapshot,a.assetSnapshot,a.postData),e,f=c.$3(a.postRequestManagerParams);f.hasAPISupport(a.postData)&&(e=f);e==null&&(e=c.$4(a.postRequestManagerParams));c.$5(e,b);e.sendRequest(d)})};c.$4=function(a){return new(b("VideoUploadPostRequestManager"))(a==null?void 0:a.chunk_post_uri,a==null?void 0:a.post_max_transport_retries,a==null?void 0:a.post_transport_retry_interval_base,a==null?void 0:a.post_max_server_retries,a==null?void 0:a.post_server_retry_interval_base)};c.$3=function(a){var c;return new(b("VideoUploadGraphQLPostRequestManager"))((c=a==null?void 0:a.post_max_transport_retries)!=null?c:0,(c=a==null?void 0:a.post_transport_retry_interval_base)!=null?c:0,(c=a==null?void 0:a.post_max_server_retries)!=null?c:0,(c=a==null?void 0:a.post_server_retry_interval_base)!=null?c:0)};c.$5=function(a,b){a.subscribe("request-finished",function(a,c){a={event:a,payload:c};b({isSuccessful:!0,rawResponse:a})}),a.subscribe("request-failed",function(a,c){a={event:a,payload:c};var d=(c==null?void 0:c.error_code)==null||(c==null?void 0:c.error_code)==0?"PublishError":c==null?void 0:c.error_code;b({isSuccessful:!1,errorCode:d,rawErrorObject:c==null?void 0:c.error_object,rawResponse:a})})};c.$2=function(a,c,d){return new(b("VideoUploadRequestContext"))().setVideoID(c.videoID).setTargetID(c.request.attributes.targetID).setSource(a.entryPoint.sourceType).setWaterfallID(a.sessionID).setCreatorProduct(c.request.attributes.creatorProduct).setComposerEntryPointRef(a.entryPoint.entryPointRef).setComposerDialogVersion(c.request.attributes.composerDialogVersion).setHasFileBeenReplaced((a=c.request.attributes.hasFileBeenReplaced)!=null?a:!1).setSupportsChunking(!0).setMetadata(d)};return a}();e.exports=a}),null);
__d("MediaUploadClientResult",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ACCEPTED","SESSION_NOT_FOUND","ASSET_NOT_FOUND","ASSET_ALREADY_EXISTS","SESSION_ALREADY_CANCELED","SESSION_ALREADY_PUBLISHING","SESSION_ALREADY_PUBLISHED","SESSION_NOT_FAILED","INVALID_TYPE","UNSUPPORTED_BROWSER"]);c=a;e.exports=c}),null);
__d("MediaUploadClient",["MediaUploadClientResult"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$4=new Map(),this.$1=a.implementation,this.$2=a.sessionStrategy,this.$3=a.envParams,this.$1.subscribeToHooks(),this.$3.isSupported()||this.$3.reportRecoverableError("This browser does not support this version of the Media Upload SDK")}var c=a.prototype;c.cancelSession=function(a,c){if(!this.$3.isSupported())return b("MediaUploadClientResult").UNSUPPORTED_BROWSER;a=this.$4.get(a);return a==null?b("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.cancel(a,c)};c.cleanSession=function(a){return!this.$3.isSupported()?b("MediaUploadClientResult").UNSUPPORTED_BROWSER:this.$4["delete"](a)?b("MediaUploadClientResult").ACCEPTED:b("MediaUploadClientResult").SESSION_NOT_FOUND};c.retrySession=function(a){if(!this.$3.isSupported())return b("MediaUploadClientResult").UNSUPPORTED_BROWSER;a=this.$4.get(a);return a==null?b("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.retry(a)};c.$5=function(a){var b=this.$4.get(a);b==null&&(b=this.$1.createSessionContext(a),this.$4.set(a,b));return b};c.updateSessionExtras=function(a,c){if(!this.$3.isSupported())return b("MediaUploadClientResult").UNSUPPORTED_BROWSER;a=this.$5(a);return this.$2.updateSessionExtras(a,c,!1)};c.confirmSession=function(a,c,d){if(!this.$3.isSupported())return b("MediaUploadClientResult").UNSUPPORTED_BROWSER;a=this.$5(a);if(d!=null){d=this.$2.updateSessionExtras(a,d,!0);if(d!==b("MediaUploadClientResult").ACCEPTED)return d}d=this.$2.syncAssetUploads(a,c);return d!==b("MediaUploadClientResult").ACCEPTED?d:this.$2.confirm(a)};c.startUploads=function(a,c){if(!this.$3.isSupported()){var d={};c.forEach(function(a){return d[a.assetID]=b("MediaUploadClientResult").UNSUPPORTED_BROWSER});return d}a=this.$5(a);return this.$2.uploadAssets(a,c)};c.removeUpload=function(a,c){if(!this.$3.isSupported())return b("MediaUploadClientResult").UNSUPPORTED_BROWSER;a=this.$4.get(a);return a==null?b("MediaUploadClientResult").SESSION_NOT_FOUND:this.$2.removeAsset(a,c)};return a}();e.exports=a}),null);
__d("MediaUploadFBClient",["MediaUploadClient"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(b("MediaUploadClient"));e.exports=a}),null);
__d("MediaUploadAsset",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.mediaType=a.mediaType,this.data=a.data}var b=a.prototype;b.dataAsFile=function(){var a=this.data;if(a.mode==="File")return a;else return null};b.dataAsHTMLInput=function(){var a=this.data;if(a.mode==="HTMLInput")return a;else return null};return a}();e.exports=a}),null);
__d("MediaUploadMediaType",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["VIDEO"]);c=a;e.exports=c}),null);
__d("MediaUploadAssetFactory",["MediaUploadAsset","MediaUploadMediaType","MediaUploadTime"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a==null)return null;else{a=/\.([^.]+)$/.exec(a);if(a==null||a.length<2)return null;else return a[1]}}a=function(){function a(a){a=a.features;this.$1=a}var c=a.prototype;c.$2=function(a){return{mode:"File",file:a,lastModified:b("MediaUploadTime").millisecondsToTime(a.lastModified),name:a.name,size:a.size,mimeType:a.type,extension:g(a.name)}};c.$3=function(a){return{mode:"HTMLInput",inputElement:a,name:a.value,extension:g(a.value)}};c.createFromFile=function(a,c){c===void 0&&(c=b("MediaUploadMediaType").VIDEO);return new(b("MediaUploadAsset"))({mediaType:c,data:this.$2(a)})};c.createFromHTMLInput=function(a,c){var d;c===void 0&&(c=b("MediaUploadMediaType").VIDEO);if(this.$1.supportFileFromHTML&&((d=a.files)==null?void 0:d.length)>0){d=a.files[0];d=this.$2(d)}else d=this.$3(a);return new(b("MediaUploadAsset"))({mediaType:c,data:d})};return a}();e.exports=a}),null);
__d("MediaUploadSDK",["MediaUploadAssetFactory"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.currentTimeProvider=a.currentTimeProvider,this.randomNumberProvider=a.randomNumberProvider,this.randomStringProvider=a.randomStringProvider,this.retryPolicyProvider=a.retryPolicyProvider,this.promiseTerminator=a.promiseTerminator,this.delayedExecutor=a.delayedExecutor,this.reportRecoverableError=a.reportRecoverableError,this.createThrowableError=a.createThrowableError,this.features=a.featureDetector(),this.registerUnloadHook=a.registerUnloadHook,this.factories={assets:new(b("MediaUploadAssetFactory"))(this)}}var c=a.prototype;c.isSupported=function(){return this.features.supportFileManipulation&&this.features.supportFileFromHTML};return a}();e.exports=a}),null);
__d("mediaUploadFBRetryPolicyProvider",["MediaUploadTime"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g={backoff:{initial:(c=b("MediaUploadTime")).millisecondsToTime(400),jitter:c.millisecondsToTime(100),expBase:c.millisecondsToTime(100),expMultiplier:1.5,max:c.secondsToTime(8)},limits:{totalRetryCount:3e3,totalTime:c.hoursToTime(6)}};function a(){return g}}),null);
__d("MediaUploadFBSDK",["Banzai","FBLogger","MediaUploadSDK","MediaUploadTime","Random","SubscriptionsHandler","WaterfallIDGenerator","clearTimeout","fileSlice","getErrorSafe","mediaUploadFBRetryPolicyProvider","promiseDone","recoverableViolation","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g="media_upload";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,{currentTimeProvider:function(){return b("MediaUploadTime").millisecondsToTime(Date.now())},randomNumberProvider:function(a,c){return(c-a)*b("Random").random()+a},randomStringProvider:function(){return b("WaterfallIDGenerator").generate()},retryPolicyProvider:b("mediaUploadFBRetryPolicyProvider"),promiseTerminator:function(a){return b("promiseDone")(a)},delayedExecutor:function(a,c,d){var e=b("setTimeout")(c,b("MediaUploadTime").timeToMilliseconds(a));return{cancel:function(){d!=null&&d(),b("clearTimeout")(e)}}},reportRecoverableError:function(a,c){c!=null?b("FBLogger")(g).catching(b("getErrorSafe")(c)).mustfix(a):b("recoverableViolation")(a,g)},createThrowableError:function(a){throw b("unrecoverableViolation")(a,g)},featureDetector:function(){return{supportFileFromHTML:"FileList"in window,supportFileManipulation:"FileReader"in window&&"DataView"in window&&"FormData"in window&&typeof b("fileSlice")==="function"}},registerUnloadHook:function(a){var c=new(b("SubscriptionsHandler"))();a=b("Banzai").subscribe(b("Banzai").SHUTDOWN,a);a!=null?c.addSubscriptions():b("recoverableViolation")("Banzai did not return handle for unsubscribing from the unload hook; logging quality will be bad",g);return{cancel:function(){try{c.release()}catch(a){b("FBLogger")(g).catching(b("getErrorSafe")(a)).mustfix("Failed to unsubscribe from the unload hook")}}}}})||this}return c}(b("MediaUploadSDK"));c=new a();d=c;e.exports=d}),null);
__d("MediaUploadSurface",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=b,this.sdk=a}var b=a.prototype;b.isClientSupported=function(a){a=this.$1.get(a.key);return a!=null};b.getClient=function(a){var b=this.$1.get(a.key);if(b==null)throw this.sdk.createThrowableError("Client configuration was not provided for the entry point "+a.key);else return b()};return a}();e.exports=a}),null);
__d("MediaUploadFBSurface",["MediaUploadExtrasStorage","MediaUploadFBAssetRequest","MediaUploadSurface"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(b,c){return a.call(this,b,c)||this}var d=c.prototype;d.createAssetRequest=function(a,c,d,e){a=a(this.sdk.factories.assets);var f;e!=null&&(f=new(b("MediaUploadExtrasStorage"))(this.sdk),e(f));typeof d==="function"?e=d(a):e=d;return new(b("MediaUploadFBAssetRequest"))({asset:a,assetID:c,attributes:e,extras:f})};return c}(b("MediaUploadSurface"));e.exports=a}),null);
__d("MediaUploadAssetStrategy",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadOperationOutcome","MediaUploadPipeline","Promise"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a.implementation,this.$2=a.executor,this.$3=a.params}var c=a.prototype;c.removeAsset=function(a){a.updateStatusAndEmit(b("MediaUploadAssetStatus").REMOVED);(a=a.inFlightUpload)==null?void 0:a.cancel()};c.addAsset=function(a){a.sessionContext.assetsByID.set(a.assetID,a),a.emitAssetEvent(b("MediaUploadAssetEvent").ASSET_ADDED)};c.scheduleUpload=function(a){var c=this;a.updateStatusAndEmit(b("MediaUploadAssetStatus").SCHEDULED);return this.$2.schedule(function(){return c.$4(a)})};c.$4=function(a){var c=this;if(a.isRemoved())return b("Promise").resolve();a.updateStatusAndEmit(b("MediaUploadAssetStatus").PROCESSING);var d=new(b("MediaUploadPipeline"))(this.$3);d.addCancelableStep(function(){return c.$1.runClientLazyLoading(a)});d.addCancelableStep(function(){return c.$1.runLocalAssetStategy(a)});d.addCancelableStep(function(){a.updateStatusAndEmit(b("MediaUploadAssetStatus").UPLOADING);return c.$1.runNetworkAssetStategy(a)});d=d.run();a.inFlightUpload=d;return d.promise.then(function(b){return c.$5(a,b)})["catch"](function(d){c.$3.reportRecoverableError("Unexpected failure during asset pipeline execution",d),a.updateStatusAndEmit(b("MediaUploadAssetStatus").FAILED)})};c.$5=function(a,c){if(a.isRemoved())return;switch(c){case b("MediaUploadOperationOutcome").SUCCESS:a.updateStatusAndEmit(b("MediaUploadAssetStatus").COMPLETED);break;case b("MediaUploadOperationOutcome").CANCELED:a.updateStatusAndEmit(b("MediaUploadAssetStatus").REMOVED);break;default:a.updateStatusAndEmit(b("MediaUploadAssetStatus").FAILED)}};return a}();e.exports=a}),null);
__d("MediaUploadRetryState",["MediaUploadTime"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.retryPolicy=a,this.$3=0,this.$4=0,this.$1=b.currentTimeProvider,this.$2=b.randomNumberProvider,this.$5=this.$1()}var c=a.prototype;c.resetBackoff=function(){this.$3=0};c.getRetryAttempts=function(){return this.$4};c.getRetryAttemptsSinceLastReset=function(){return this.$3};c.calculateBackoffDelay=function(){var a=this.retryPolicy.backoff,c=b("MediaUploadTime").timeToMilliseconds(a.initial),d=a.expBase,e=a.expMultiplier;this.$3>0&&d!=null&&e!=null&&(c+=b("MediaUploadTime").timeToMilliseconds(d)*Math.pow(e,this.$3-1));a.max!=null&&(c=Math.min(c,b("MediaUploadTime").timeToMilliseconds(a.max)));d=a.jitter==null?0:b("MediaUploadTime").timeToMilliseconds(a.jitter);d>0&&(c+=this.$2(-.5*d,.5*d));return b("MediaUploadTime").millisecondsToTime(Math.round(c))};c.exceedTotalRetries=function(){var a;return((a=this.retryPolicy.limits)==null?void 0:a.totalRetryCount)!=null&&this.$4>this.retryPolicy.limits.totalRetryCount};c.exceedTotalDuration=function(){var a;return((a=this.retryPolicy.limits)==null?void 0:a.totalTime)!=null&&b("MediaUploadTime").compareTime((a=this.retryPolicy.limits)==null?void 0:a.totalTime,b("MediaUploadTime").subtractTime(this.$1(),this.$5))<=0};c.increaseRetryAttemptCounter=function(){this.$3++,this.$4++};return a}();e.exports=a}),null);
__d("MediaUploadCancelReason",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["USER_REQUEST","NAVIGATION_AWAY","UNLOAD_HOOK"]);c=a;e.exports=c}),null);
__d("MediaUploadSessionStrategy",["MediaUploadCancelReason","MediaUploadClientResult","MediaUploadSessionEvent","MediaUploadSessionStatus"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a.implementation,this.$2=a.assetStrategy,this.$3=a.params}var c=a.prototype;c.$4=function(a){if(a.isConfirmed()&&a.progress.publishingExtrasProvided){var c=a.getActiveAssets();for(var d=c,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(g.isFailed()){a.updateStatusAndEmit(b("MediaUploadSessionStatus").FAILED);return}}c.every(function(a){return a.isCompleted()})&&this.$5(a)}};c.$5=function(a){a.updateStatusAndEmit(b("MediaUploadSessionStatus").PUBLISHING);var c=[];for(var d=a.assetsByID.values(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g.isCompleted()&&c.push(g)}g=this.$1.publish(a,c).then(function(c){a.progress.publishingResponse=c.rawResponse,c.isSuccessful?(a.emitSessionEvent(b("MediaUploadSessionEvent").PUBLISH_SUCCEED),a.updateStatusAndEmit(b("MediaUploadSessionStatus").COMPLETED)):(a.updateLastError({rawErrorCode:c.errorCode,rawErrorObject:c.rawErrorObject}),a.emitSessionEvent(b("MediaUploadSessionEvent").PUBLISH_FAILED),a.updateStatusAndEmit(b("MediaUploadSessionStatus").FAILED),a.updateLastError())})["catch"](function(c){a.updateLastError({rawErrorObject:c}),a.emitSessionEvent(b("MediaUploadSessionEvent").PUBLISH_FAILED),a.updateStatusAndEmit(b("MediaUploadSessionStatus").FAILED),a.updateLastError()});this.$3.promiseTerminator(g)};c.$6=function(a,b){var c=this;this.$2.scheduleUpload(b)["finally"](function(){return c.$4(a)})};c.$7=function(a){if(a.isPublished())return b("MediaUploadClientResult").SESSION_ALREADY_PUBLISHED;else if(a.isPublishing())return b("MediaUploadClientResult").SESSION_ALREADY_PUBLISHING;else if(a.isCanceled())return b("MediaUploadClientResult").SESSION_ALREADY_CANCELED;else return b("MediaUploadClientResult").ACCEPTED};c.$8=function(a){var c=this;a.releaseOnFinish.push(this.$3.registerUnloadHook(function(){c.cancel(a,b("MediaUploadCancelReason").UNLOAD_HOOK)}));a.updateStatusAndEmit(b("MediaUploadSessionStatus").CONFIRMED)};c.cancel=function(a,c){var d=this.$7(a);if(d!==b("MediaUploadClientResult").ACCEPTED)return d;a.progress.cancelReason=c;a.updateStatusAndEmit(b("MediaUploadSessionStatus").CANCELED);for(var d=a.assetsByID.values(),c=Array.isArray(d),a=0,d=c?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(a>=d.length)break;e=d[a++]}else{a=d.next();if(a.done)break;e=a.value}e=e;this.$2.removeAsset(e)}return b("MediaUploadClientResult").ACCEPTED};c.removeAsset=function(a,c){var d=this.$7(a);if(d!==b("MediaUploadClientResult").ACCEPTED)return d;d=a.assetsByID.get(c);if(d==null)return b("MediaUploadClientResult").ASSET_NOT_FOUND;this.$2.removeAsset(d);this.$4(a);return b("MediaUploadClientResult").ACCEPTED};c.uploadAsset=function(a,c){var d=this.$7(a);if(d!==b("MediaUploadClientResult").ACCEPTED)return d;d=a.assetsByID.get(c.assetID);if(d!=null&&!d.isRemoved())return b("MediaUploadClientResult").ASSET_ALREADY_EXISTS;d=this.$1.createAssetContext(a,c);this.$2.addAsset(d);this.$6(a,d);return b("MediaUploadClientResult").ACCEPTED};c.syncAssetUploads=function(a,c){var d=this.$7(a);if(d!==b("MediaUploadClientResult").ACCEPTED)return d;d=new Set(c.map(function(a){return a.assetID}));var e=new Set(a.assetsByID.keys());for(var f in e)if(!d.has(f)){e=a.assetsByID.get(f);e!=null&&this.$2.removeAsset(e)}this.uploadAssets(a,c);return b("MediaUploadClientResult").ACCEPTED};c.uploadAssets=function(a,b){var c=this,d={};b.forEach(function(b){return d[b.assetID]=c.uploadAsset(a,b)});return d};c.updateSessionExtras=function(a,c,d){var e=this.$7(a);if(e!==b("MediaUploadClientResult").ACCEPTED)return e;c(a.extras);d&&(a.progress.publishingExtrasProvided=!0);return b("MediaUploadClientResult").ACCEPTED};c.retry=function(a){var c=this.$7(a);if(c!==b("MediaUploadClientResult").ACCEPTED)return c;else if(!a.isFailed())return b("MediaUploadClientResult").SESSION_NOT_FAILED;a.renewRetryID();this.$8(a);for(var c=a.assetsByID.values(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f.isSchedulable()&&this.$6(a,f)}this.$4(a);return b("MediaUploadClientResult").ACCEPTED};c.confirm=function(a){var c=this.$7(a);if(c!==b("MediaUploadClientResult").ACCEPTED)return c;else if(a.isFailed())return this.retry(a);else if(a.isConfirmed()){this.$4(a);return b("MediaUploadClientResult").ACCEPTED}this.$8(a);this.$4(a);return b("MediaUploadClientResult").ACCEPTED};return a}();e.exports=a}),null);
__d("MediaUploadClientContext",["MediaUploadAssetStrategy","MediaUploadRetryState","MediaUploadSessionStrategy"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.sdk=a.sdk,this.emitter=a.emitter,this.executor=a.executor,this.progressCalculator=a.progressCalculator,this.assetStrategy=new(b("MediaUploadAssetStrategy"))({implementation:this,executor:this.executor,params:this.sdk}),this.sessionStrategy=new(b("MediaUploadSessionStrategy"))({implementation:this,assetStrategy:this.assetStrategy,params:this.sdk})}var c=a.prototype;c.runLocalAssetStategy=function(a){throw this.sdk.createThrowableError("Not implemented")};c.runNetworkAssetStategy=function(a){throw this.sdk.createThrowableError("Not implemented")};c.runClientLazyLoading=function(a){throw this.sdk.createThrowableError("Not implemented")};c.createSessionContext=function(a){throw this.sdk.createThrowableError("Not implemented")};c.createAssetContext=function(a,b){throw this.sdk.createThrowableError("Not implemented")};c.publish=function(a,b){throw this.sdk.createThrowableError("Not implemented")};c.subscribeToHooks=function(){throw this.sdk.createThrowableError("Not implemented")};c.createRetryState=function(){return new(b("MediaUploadRetryState"))(this.sdk.retryPolicyProvider(),this.sdk)};return a}();e.exports=a}),null);
__d("MediaUploadExecutor",["Promise"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a===void 0&&(a=1),this.$1=[],this.$3=0,this.$2=a}var c=a.prototype;c.schedule=function(a){var c=this;return new(b("Promise"))(function(b){var d=function(){var c=a();c["finally"](b);return c};c.$1.push(d);c.$4()})};c.$4=function(){var a=this;if(this.$3>=this.$2)return;var b=this.$1.shift();b()["finally"](function(){a.$3--,a.$4()});this.$3++};return a}();e.exports=a}),null);
__d("MediaUploadFBDefaultServerConfigurationRetriever",["MediaUploadCancelablePromise","MediaUploadClientEvent","MediaUploadFBClientEventContext","MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql","MediaUploadOperationOutcome","MediaUploadTime","RelayFBEnvironment","RelayHooks","URI"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g!==void 0?g:g=b("MediaUploadFBDefaultServerConfigurationRetrieverQuery.graphql"),j={metadataValidation:{minSizeKB:1,maxSizeKB:10*1024*1024,minDuration:b("MediaUploadTime").secondsToTime(1),maxDuration:b("MediaUploadTime").hoursToTime(24),minWidth:100,minHeight:100,minAspectRatio:.5,maxAspectRatio:4,extensions:new Set(["3g2","3gp","3gpp","asf","avi","dat","divx","dv","f4v","flv","gif","m2ts","m4v","mkv","mod","mov","mp4","mpe","mpeg","mpeg4","mpg","mts","nsv","ogm","ogv","qt","rmvb","tmp","tod","ts","vob","webm","wmv"]),acceptDimensionsFromPlayer:!1},startRequest:{baseURI:new(h||(h=b("URI")))("https://vupload-edge.facebook.com/ajax/video/upload/requests/start/")},receiveRequest:{baseURI:new h("https://vupload-edge.facebook.com/ajax/video/upload/requests/receive/")},uploadService:{defaultService:{serviceName:"rupload",serviceDomain:"facebook.com"},targetedService:null,tracing:{enabled:!1,minFileSizeKB:102400}},networkMonitor:{networkProbe:{enabled:!0},internetProbe:{enabled:!1,timeout:b("MediaUploadTime").secondsToTime(2),backoffPolicy:{backoff:{initial:b("MediaUploadTime").secondsToTime(10),jitter:b("MediaUploadTime").secondsToTime(0),expBase:b("MediaUploadTime").secondsToTime(1),expMultiplier:2,max:b("MediaUploadTime").secondsToTime(60)},limits:{}}},stallDetector:{enabled:!1,timeout:b("MediaUploadTime").secondsToTime(30)}}};a=function(){function a(a){this.$5=!0,this.$1=a.entryPoint,this.$3=a.emitter,this.$2=a.setters,this.$4=a.envParams}var c=a.prototype;c.$6=function(){return b("RelayHooks").fetchQuery(b("RelayFBEnvironment"),i,{source_type:this.$1.sourceType})};c.run=function(a){var c=this,d=new(b("MediaUploadFBClientEventContext"))({entryPoint:this.$1,envParams:this.$4,context:a});if(this.$5){this.$3.emitClientEvent(b("MediaUploadClientEvent").CLIENT_CONFIG_REQUESTED,d);return new(b("MediaUploadCancelablePromise"))(function(a){try{var e=c.$6().subscribe({error:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(e){c.$4.reportRecoverableError("Error getting client configuration",e),c.$3.emitClientEvent(b("MediaUploadClientEvent").CLIENT_CONFIG_FAILED,d),c.$7(null),a(b("MediaUploadOperationOutcome").SUCCESS)}),next:function(e){c.$3.emitClientEvent(b("MediaUploadClientEvent").CLIENT_CONFIG_RECEIVED,d),c.$7(e),c.$5=!1,a(b("MediaUploadOperationOutcome").SUCCESS)}});return{cancel:function(){e.unsubscribe()}}}catch(e){c.$4.reportRecoverableError("Error requesting client configuration",e),c.$7(null),c.$3.emitClientEvent(b("MediaUploadClientEvent").CLIENT_CONFIG_FAILED,d),a(b("MediaUploadOperationOutcome").SUCCESS)}})}else{this.$3.emitClientEvent(b("MediaUploadClientEvent").CLIENT_CONFIG_CACHED,d);return b("MediaUploadCancelablePromise").resolve(b("MediaUploadOperationOutcome").SUCCESS)}};c.$8=function(a){var b,c;if((a==null?void 0:(b=a["default"])==null?void 0:b.service_name)==null||(a==null?void 0:(b=a["default"])==null?void 0:b.service_domain)==null)this.$4.reportRecoverableError("Invalid configuration for default endpoint of the Upload Service, falling back to default"),b=j.uploadService.defaultService;else{var d;b={serviceName:a==null?void 0:(d=a["default"])==null?void 0:d.service_name,serviceDomain:a==null?void 0:(d=a["default"])==null?void 0:d.service_domain}}if((a==null?void 0:(d=a.targeted)==null?void 0:d.service_name)!=null&&(a==null?void 0:(d=a.targeted)==null?void 0:d.service_domain)!=null){d={serviceName:a==null?void 0:(d=a.targeted)==null?void 0:d.service_name,serviceDomain:a==null?void 0:(d=a.targeted)==null?void 0:d.service_domain}}else(a==null?void 0:a.targeted)==null?d=null:(this.$4.reportRecoverableError("Invalid configuration for target endpoint of the Upload Service, falling back to default"),d=j.uploadService.targetedService);if((a==null?void 0:(c=a.tracing)==null?void 0:c.enabled)!=null&&(a==null?void 0:(c=a.tracing)==null?void 0:c.min_file_size_kb)!=null){a={enabled:a==null?void 0:(c=a.tracing)==null?void 0:c.enabled,minFileSizeKB:a==null?void 0:(c=a.tracing)==null?void 0:c.min_file_size_kb}}else this.$4.reportRecoverableError("Invalid configuration for tracing in the Upload Service, falling back to default"),a=j.uploadService.tracing;this.$2.uploadService({defaultService:b,targetedService:d,tracing:a})};c.$9=function(a){var c;if((a==null?void 0:a.min_size_kb)==null||(a==null?void 0:a.max_size_kb)==null||(a==null?void 0:a.min_width)==null||(a==null?void 0:a.min_height)==null||(a==null?void 0:a.min_duration_secs)==null||(a==null?void 0:a.max_duration_secs)==null||(a==null?void 0:a.min_aspect_ration)==null||(a==null?void 0:a.max_aspect_ration)==null||(a==null?void 0:a.allowed_extensions)==null||(a==null?void 0:a.accept_dimensions_from_player)==null)this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),c=babelHelpers["extends"]({sourceType:this.$1.sourceType},j.metadataValidation);else{var d=a==null?void 0:a.max_duration_secs;c={sourceType:this.$1.sourceType,minSizeKB:a==null?void 0:a.min_size_kb,maxSizeKB:a==null?void 0:a.max_size_kb,minWidth:a==null?void 0:a.min_width,minHeight:a==null?void 0:a.min_height,minAspectRatio:a==null?void 0:a.min_aspect_ration,maxAspectRatio:a==null?void 0:a.max_aspect_ration,extensions:new Set(a==null?void 0:a.allowed_extensions),acceptDimensionsFromPlayer:a==null?void 0:a.accept_dimensions_from_player,minDuration:b("MediaUploadTime").secondsToTime(a==null?void 0:a.min_duration_secs),maxDuration:b("MediaUploadTime").secondsToTime(d)}}this.$2.metadataValidation(c)};c.$10=function(a){return(a==null?void 0:a.backoff_initial_ms)==null?null:{backoff:{initial:b("MediaUploadTime").millisecondsToTime(a==null?void 0:a.backoff_initial_ms),jitter:(a==null?void 0:a.backoff_jitter_ms)==null?null:b("MediaUploadTime").millisecondsToTime(a==null?void 0:a.backoff_jitter_ms),expBase:(a==null?void 0:a.backoff_exp_base_ms)==null?null:b("MediaUploadTime").millisecondsToTime(a==null?void 0:a.backoff_exp_base_ms),expMultiplier:a==null?void 0:a.backoff_exp_multiplier,max:(a==null?void 0:a.backoff_max_ms)==null?null:b("MediaUploadTime").millisecondsToTime(a==null?void 0:a.backoff_max_ms)},limits:{totalRetryCount:a==null?void 0:a.limits_total_retry_count,totalTime:(a==null?void 0:a.limits_total_time_ms)==null?null:b("MediaUploadTime").millisecondsToTime(a==null?void 0:a.limits_total_time_ms)}}};c.$11=function(a){var c,d=this.$10(a==null?void 0:a.internet_probe_backoff);if((a==null?void 0:a.network_probe_enabled)==null||(a==null?void 0:a.internet_probe_enabled)==null||(a==null?void 0:a.internet_probe_timeout_ms)==null||d==null||(a==null?void 0:a.stall_detection_enabled)==null||(a==null?void 0:a.stall_detection_timeout_ms)==null)this.$4.reportRecoverableError("Invalid network monitor configuration, falling back to default"),c=j.networkMonitor;else{var e=a.network_probe_enabled,f=a.internet_probe_enabled,g=a.internet_probe_timeout_ms,h=a.stall_detection_enabled;a=a.stall_detection_timeout_ms;c={networkProbe:{enabled:e},internetProbe:{enabled:f,timeout:b("MediaUploadTime").millisecondsToTime(g),backoffPolicy:d},stallDetector:{enabled:h,timeout:b("MediaUploadTime").millisecondsToTime(a)}}}this.$2.networkMonitor(c)};c.$12=function(a){var c;(a==null?void 0:a.uri)==null?(this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),c=j.startRequest):c={baseURI:new(h||(h=b("URI")))(a==null?void 0:a.uri)};this.$2.startRequest(c)};c.$13=function(a){var c;(a==null?void 0:a.uri)==null?(this.$4.reportRecoverableError("Invalid metadata validation, falling back to default"),c=j.receiveRequest):c={baseURI:new(h||(h=b("URI")))(a==null?void 0:a.uri)};this.$2.receiveRequest(c)};c.$7=function(a){var b;this.$12(a==null?void 0:(b=a.media_upload_config)==null?void 0:b.network_start);this.$13(a==null?void 0:(b=a.media_upload_config)==null?void 0:b.network_receive);this.$8(a==null?void 0:(b=a.media_upload_config)==null?void 0:b.network_upload_service);this.$9(a==null?void 0:(b=a.media_upload_config)==null?void 0:b.video_metadata_validation);this.$11(a==null?void 0:(b=a.media_upload_config)==null?void 0:b.network_monitor)};return a}();e.exports=a}),null);
__d("MediaUploadLinearProgressCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=this.$4(),this.$3=this.$1.sessionWeights.assets+this.$1.sessionWeights.publishing}var b=a.prototype;b.$4=function(){var a=this.$1.assetWeights.uploadBytes;this.$1.assetWeights.singleOperations.forEach(function(b){return a+=b});return a};b.$5=function(a,b){a=Math.floor(a*100/this.$1.percentagePrecision)*this.$1.percentagePrecision;b=Math.abs(a-b)>=this.$1.percentagePrecision;return{percentageProgress:a,isDifferent:b}};b.calculateAssetProgress=function(a){var b=this.$1.assetWeights,c=0;if(a.isCompleted())c=1;else{for(var d=a.progress.completedStages.values(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g=b.singleOperations.get(g);g!=null&&(c+=g)}g=a.uploadSummary.computeUploadedPortion();g!=null&&(c+=b.uploadBytes*g);c/=this.$2}f=this.$5(c,a.progress.calculated.percentageComplete);a.progress.calculated.rawValue=c;a.progress.calculated.percentageComplete=f.percentageProgress;a.progress.calculated.rawValue=c;return f.isDifferent};b.calculateSessionProgress=function(a){var b=this.$1.sessionWeights,c=0;a.progress.publishingDone&&(c+=b.publishing);var d=a.getActiveAssets();if(d.length>0){var e=b.assets/d.length;a.getActiveAssets().forEach(function(a){c+=e*a.progress.calculated.rawValue})}else c+=b.assets;c/=this.$3;d=this.$5(c,a.progress.percentageComplete);a.progress.percentageComplete=d.percentageProgress;return d.isDifferent};return a}();e.exports=a}),null);
__d("MediaUploadNetworkMonitor",["MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadNetworkStatus","MediaUploadRetryState","Promise"],(function(a,b,c,d,e,f){"use strict";var g={probe:function(){return b("MediaUploadNetworkStatus").UNKNOWN}},h={probe:function(){return b("Promise").resolve(b("MediaUploadNetworkStatus").UNKNOWN)}};a=function(){function a(a,c){this.$1=a,this.$3=g,this.$2=h,this.$4=b("MediaUploadNetworkStatus").UNKNOWN,this.$5=new Map(),this.$6=null,this.$8=null,this.$9=c.emitClientEvent}var c=a.prototype;c.updateConfiguration=function(a){var c;this.$3=(c=a.networkProbe)!=null?c:g;this.$2=(c=a.internetProbe)!=null?c:h;this.$7=a.internetProbeBackoffPolicy==null?null:new(b("MediaUploadRetryState"))(a.internetProbeBackoffPolicy,this.$1);this.$8=a.stallDetectorTimeout;this.$10()};c.getNetworkStatus=function(){return this.$3.probe()};c.getInternetStatus=function(){return this.$4};c.$11=function(a,b){return a.sessionContext.sessionID+"/"+a.assetID+"/"+String(b)};c.$12=function(a,c,d){var e;this.$13(b("MediaUploadNetworkStatus").CONNECTED);(e=this.$7)==null?void 0:e.resetBackoff();(e=this.$6)==null?void 0:e.cancel();this.$6=null;e=this.$11(a,c);d&&this.$5.set(e,{assetContext:a});this.$10();this.$14(e)};c.$15=function(a,b){a=this.$11(a,b);b=this.$5.get(a);if(b!=null){var c;(c=b.stallDetector)==null?void 0:c.cancel();b.stallDetector=null}this.$5["delete"](a)};c.$14=function(a){var c=this.$8;if(c==null)return;var d=this.$5.get(a);if(d==null)return;(a=d.stallDetector)==null?void 0:a.cancel();d.stallDetector=this.$1.delayedExecutor(c,function(){d.assetContext.emitAssetEvent(b("MediaUploadAssetEvent").ASSET_STALL),d.stallDetector=null})};c.$10=function(){var a=this,b=this.$7;if(b==null)return;if(this.$5.size===0)return;if(this.$6!=null)return;this.$6=this.$1.delayedExecutor(b.calculateBackoffDelay(),function(){var b=a.$2.probe().then(function(b){return a.$13(b)})["finally"](function(){a.$6=null,a.$10()});a.$1.promiseTerminator(b)});b.increaseRetryAttemptCounter()};c.$13=function(a){if(this.$4===a)return;this.$4=a;switch(this.$4){case b("MediaUploadNetworkStatus").CONNECTED:this.$9(b("MediaUploadClientEvent").CLIENT_INTERNET_ONLINE);break;case b("MediaUploadNetworkStatus").DISCONNECTED:this.$9(b("MediaUploadClientEvent").CLIENT_INTERNET_OFFLINE);break;case b("MediaUploadNetworkStatus").TIMEOUT:this.$9(b("MediaUploadClientEvent").CLIENT_INTERNET_UNKNOWN);break;case b("MediaUploadNetworkStatus").UNKNOWN:}};c.notifyOnNewRequest=function(a,b){this.$12(a,b,!0)};c.notifyOnProgress=function(a,b){this.$12(a,b,!1)};c.notifyOnAbandon=function(a,b){this.$15(a,b)};c.notifyOnTransportError=function(a,b){this.$15(a,b)};c.notifyOnResponse=function(a,b){this.$15(a,b),this.$12(a,b,!1)};return a}();e.exports=a}),null);
__d("MediaUploadFBDefaultClientContext",["MediaUploadBanzaiLogger","MediaUploadClientContext","MediaUploadClientEvent","MediaUploadEventEmitterAdapter","MediaUploadExecutor","MediaUploadFBAssetContext","MediaUploadFBAssetRequest","MediaUploadFBClient","MediaUploadFBClientEventContext","MediaUploadFBDefaultServerConfigurationRetriever","MediaUploadFBFileHasher","MediaUploadFBInternetProbe","MediaUploadFBLocalAssetStrategy","MediaUploadFBMetadataParser","MediaUploadFBMetadataValidator","MediaUploadFBNetworkAssetStrategy","MediaUploadFBNetworkProbe","MediaUploadFBReceiveRequest","MediaUploadFBSessionContext","MediaUploadFBStage","MediaUploadFBStartRequest","MediaUploadFBUploadServiceRequest","MediaUploadLinearProgressCalculator","MediaUploadNetworkMonitor","cr:1856704","mediaUploadLogStackTrace"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e){var f,g=new(b("MediaUploadEventEmitterAdapter"))(c);f=a.call(this,{sdk:c,emitter:g.emitter,executor:new(b("MediaUploadExecutor"))(),progressCalculator:new(b("MediaUploadLinearProgressCalculator"))({assetWeights:{uploadBytes:.9,singleOperations:new Map([[b("MediaUploadFBStage").START_REQUEST,.05],[b("MediaUploadFBStage").RECEIVE_REQUEST,.05]])},sessionWeights:{publishing:.1,assets:.9},percentagePrecision:1})})||this;f.entryPoint=d;f.eventAdapter=g;f.configuration=e;f.networkMonitor=new(b("MediaUploadNetworkMonitor"))(f.sdk,{emitClientEvent:function(a){return g.emitter.emitClientEvent(a,new(b("MediaUploadFBClientEventContext"))({entryPoint:d,envParams:c}))}});f.localAssetStategy=f.$MediaUploadFBDefaultClientContext1();f.networkAssetStategy=f.$MediaUploadFBDefaultClientContext2();f.serverConfigurationRetriever=new(b("MediaUploadFBDefaultServerConfigurationRetriever"))({entryPoint:d,emitter:f.emitter,setters:{metadataValidation:function(a){f.localAssetStategy.metadataValidator.configuration=a},startRequest:function(a){f.networkAssetStategy.startRequest.configuration=a},receiveRequest:function(a){f.networkAssetStategy.receiveRequest.configuration=a},uploadService:function(a){f.networkAssetStategy.uploadServiceRequest.configuration=a},networkMonitor:function(a){f.networkMonitor.updateConfiguration({networkProbe:a.networkProbe.enabled?new(b("MediaUploadFBNetworkProbe"))():null,internetProbe:a.internetProbe.enabled?new(b("MediaUploadFBInternetProbe"))({timeout:a.internetProbe.timeout},f.sdk):null,internetProbeBackoffPolicy:a.internetProbe.backoffPolicy,stallDetectorTimeout:a.stallDetector.enabled?a.stallDetector.timeout:null})}},envParams:f.sdk});f.client=new(b("MediaUploadFBClient"))({implementation:babelHelpers.assertThisInitialized(f),sessionStrategy:f.sessionStrategy,envParams:f.sdk});f.emitter.emitClientEvent(b("MediaUploadClientEvent").CLIENT_CREATED,new(b("MediaUploadFBClientEventContext"))({entryPoint:d,envParams:f.sdk}));return f}var d=c.prototype;d.$MediaUploadFBDefaultClientContext1=function(){return new(b("MediaUploadFBLocalAssetStrategy"))({envParams:this.sdk,metadataParser:new(b("MediaUploadFBMetadataParser"))(),metadataValidator:new(b("MediaUploadFBMetadataValidator"))(this.sdk),fileHasher:new(b("MediaUploadFBFileHasher"))({pseudoHasher:b("cr:1856704")==null?void 0:new(b("cr:1856704"))({maxChunkSize:1024*1024,takeFirstBytes:100*1024,hashingAlgorithm:"sha256",outputEncoding:"base64"},this.sdk)})})};d.$MediaUploadFBDefaultClientContext2=function(){var a,c;a=new(b("MediaUploadFBStartRequest"))({entryPoint:this.entryPoint,payloadHook:(a=this.configuration.networkHooks)==null?void 0:a.startRequestPayload,customHeadersHook:(a=this.configuration.networkHooks)==null?void 0:a.startRequestCustomHeaders,envParams:this.sdk,networkNotifier:this.networkMonitor});var d=new(b("MediaUploadFBUploadServiceRequest"))({envParams:this.sdk,networkNotifier:this.networkMonitor});c=new(b("MediaUploadFBReceiveRequest"))({entryPoint:this.entryPoint,payloadHook:(c=this.configuration.networkHooks)==null?void 0:c.receiveRequestPayload,customHeadersHook:(c=this.configuration.networkHooks)==null?void 0:c.receiveRequestCustomHeaders,envParams:this.sdk,networkNotifier:this.networkMonitor});return new(b("MediaUploadFBNetworkAssetStrategy"))(this.sdk,a,d,c)};d.runClientLazyLoading=function(a){return this.serverConfigurationRetriever.run(b("MediaUploadFBAssetContext").castOrThrow(a,this.sdk))};d.runLocalAssetStategy=function(a){return this.localAssetStategy.run(b("MediaUploadFBAssetContext").castOrThrow(a,this.sdk))};d.runNetworkAssetStategy=function(a){return this.networkAssetStategy.run(b("MediaUploadFBAssetContext").castOrThrow(a,this.sdk))};d.createSessionContext=function(a){b("mediaUploadLogStackTrace")({waterfallID:a,sourceType:this.entryPoint.sourceType,composerEntryPointRef:this.entryPoint.entryPointRef,applicationState:"www_v2"});return new(b("MediaUploadFBSessionContext"))({sessionID:a,entryPoint:this.entryPoint,emitter:this.emitter,progressCalculator:this.progressCalculator,params:this.sdk})};d.createAssetContext=function(a,c){return new(b("MediaUploadFBAssetContext"))({sessionContext:b("MediaUploadFBSessionContext").castOrThrow(a,this.sdk),assetRequest:b("MediaUploadFBAssetRequest").castOrThrow(c,this.sdk),emitter:this.emitter,progressCalculator:this.progressCalculator,retryState:this.createRetryState(),params:this.sdk})};d.publish=function(a,c){var d=this;a=b("MediaUploadFBSessionContext").castOrThrow(a,this.sdk).composeSnapshot();c=c.map(function(a){return b("MediaUploadFBAssetContext").castOrThrow(a,d.sdk).composeSnapshot()});return this.configuration.eventHooks.publishCallback(a,c)};d.subscribeToHooks=function(){var a=this,c=new(b("MediaUploadBanzaiLogger"))(this.sdk,{injectNetworkStatus:this.networkMonitor,injectExtraSessionFields:function(){return{composer_dialog_version:a.configuration.composerDialogVersion}}});c.subscribe(this.eventAdapter.subscriber,this.entryPoint);this.configuration.eventHooks.eventSubscriber!=null&&this.configuration.eventHooks.eventSubscriber(this.eventAdapter.subscriber)};return c}(b("MediaUploadClientContext"));e.exports=a}),null);
__d("MediaUploadSurfaceDefinition",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=new Map(),this.$3=new Map()}var b=a.prototype;b.$4=function(a,b){var c=this;return function(){var d=c.$3.get(a.key);d==null&&(d=c.$1.client(a,b),c.$3.set(a.key,d));return d}};b.registerClientConfiguration=function(a){var b=this;a.entryPoints.forEach(function(c){b.$2.set(c.key,b.$4(c,a))});return this};b.createSurface=function(){return this.$1.surface(this.$2)};return a}();e.exports=a}),null);
__d("MediaUploadFBDefaultSurfaceDefinition",["MediaUploadFBDefaultClientContext","MediaUploadFBEntryPointID","MediaUploadFBSurface","MediaUploadSurfaceDefinition"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){return a.call(this,{client:function(a,d){a=new(b("MediaUploadFBDefaultClientContext"))(c,b("MediaUploadFBEntryPointID").castOrThrow(a,c),d);return a.client},surface:function(a){return new(b("MediaUploadFBSurface"))(c,a)}})||this}return c}(b("MediaUploadSurfaceDefinition"));e.exports=a}),null);
__d("MediaUploadVUShim",["MediaUploadAssetEvent","MediaUploadClientEvent","MediaUploadFBEntryPointID","MediaUploadFBSDK","MediaUploadFBStage","MediaUploadSessionEvent","MediaUploadStageEvent","MediaUploadVUShimSession","MediaUploadVUShimSurface","Promise","gkx"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var c=a.prototype;c.createSession=function(a){if(!b("MediaUploadFBSDK").isSupported())return null;var c=a.source,d=a.composer_entry_point_ref;if(c==null||d==null)return null;c=new(b("MediaUploadFBEntryPointID"))(c,d);if(!b("MediaUploadVUShimSurface").isClientSupported(c))return null;if(!b("gkx")("74"))return null;d=b("MediaUploadVUShimSurface").getClient(c);c=new(b("MediaUploadVUShimSession"))(a,d);this.$1.set(c.sessionID,c);return c};c.triggerPublish=function(a,c){var d=this.$1.get(a.sessionID);return d==null?b("Promise").resolve({isSuccessful:!1,errorCode:"MISSING_SESSION"}):d.triggerPublish(a,c)};c.setupEventSubscription=function(a){var c=this,d=function(){if(f){if(g>=e.length)return"break";h=e[g++]}else{g=e.next();if(g.done)return"break";h=g.value}var b=h;a.addClientEventListener(b,function(a){return c.emitClientEvents(b)})};for(var e=b("MediaUploadClientEvent").members(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h,i=d();if(i==="break")break}d=function(){if(k){if(l>=j.length)return"break";i=j[l++]}else{l=j.next();if(l.done)return"break";i=l.value}var b=i;a.addSessionEventListener(b,function(a){var d;return(d=c.$1.get(a.sessionID))==null?void 0:d.sessionUpdated(b,a)})};for(var j=b("MediaUploadSessionEvent").members(),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m=d();if(m==="break")break}d=function(){if(o){if(p>=n.length)return"break";m=n[p++]}else{p=n.next();if(p.done)return"break";m=p.value}var b=m;a.addAssetEventListener(b,function(a,d){var e;(e=c.$1.get(a.sessionID))==null?void 0:e.assetUpdated(b,a,d)})};for(var n=b("MediaUploadAssetEvent").members(),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q=d();if(q==="break")break}d=function(){if(s){if(t>=r.length)return"break";q=r[t++]}else{t=r.next();if(t.done)return"break";q=t.value}var d=q,e=function(){if(g){if(h>=f.length)return"break";i=f[h++]}else{h=f.next();if(h.done)return"break";i=h.value}var b=i;a.addStageEventListener(d,b,function(a,e){var f;(f=c.$1.get(a.sessionID))==null?void 0:f.stageUpdated(d,b,a,e)})};for(var f=b("MediaUploadFBStage").members(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i,j=e();if(j==="break")break}};for(var r=b("MediaUploadStageEvent").members(),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u=d();if(u==="break")break}};c.emitClientEvents=function(a){var c;if(a===b("MediaUploadClientEvent").CLIENT_INTERNET_ONLINE)c="online";else if(a===b("MediaUploadClientEvent").CLIENT_INTERNET_OFFLINE)c="offline";else return;for(var a=this.$1.values(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f.inform(c)}};return a}();c=new a();d=c;e.exports=d}),null);
__d("MediaUploadVUShimLogger",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.logEvent=function(a,b){};b.postOnShutdown=function(a){return{remove:function(){}}};b.getWaterfallID=function(){return this.$1};return a}();e.exports=a}),null);
__d("MediaUploadVUShimSession",["MediaUploadAssetEvent","MediaUploadAssetStatus","MediaUploadCancelReason","MediaUploadFBSDK","MediaUploadFBStage","MediaUploadSessionEvent","MediaUploadSessionStatus","MediaUploadSingleAssetPublisher","MediaUploadStageEvent","MediaUploadVUShimLogger","MediaUploadVUShimSurface","Promise","WaterfallIDGenerator","cr:909282","mixin"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.sessionID=b("WaterfallIDGenerator").generate();e.$MediaUploadVUShimSession1=c;e.$MediaUploadVUShimSession3=(c=c.waterfall_id)!=null?c:e.sessionID;e.$MediaUploadVUShimSession6=d;e.$MediaUploadVUShimSession5=new(b("MediaUploadVUShimLogger"))(e.$MediaUploadVUShimSession3);e.$MediaUploadVUShimSession10=!e.$MediaUploadVUShimSession1.background_upload;return e}var d=c.prototype;d.createTestLogger=function(){};d.getLogger=function(){return this.$MediaUploadVUShimSession5};d.start=function(a){var c=this;this.inform("set-waterfall-id",{waterfallID:this.$MediaUploadVUShimSession3});var d=b("MediaUploadVUShimSurface").createAssetRequest(function(c){var d=a.getFile(),e=a.getFileInput();if(d!=null)return c.createFromFile(d);else if(e!=null){d=c.createFromHTMLInput(e);if(d.dataAsFile()==null)throw b("MediaUploadFBSDK").createThrowableError("Cannot get File from the HTML input element");else return d}else throw b("MediaUploadFBSDK").createThrowableError("Invalid video upload file, it contains only null objects")},a.getStableAssetID(),function(a){var b;return{targetID:(b=c.$MediaUploadVUShimSession4)!=null?b:c.$MediaUploadVUShimSession1.target_id,composerSessionID:c.$MediaUploadVUShimSession2,actorID:c.$MediaUploadVUShimSession1.as_actor_id,composerDialogVersion:"V2",publisherActionSource:c.$MediaUploadVUShimSession1.video_publisher_action_source,creatorProduct:((b=a.dataAsFile())==null?void 0:b.extension)==="gif"?4:2}});this.$MediaUploadVUShimSession9=d;this.$MediaUploadVUShimSession6.startUploads(this.sessionID,[d]);this.$MediaUploadVUShimSession10&&this.$MediaUploadVUShimSession6.confirmSession(this.sessionID,[d],function(a){return a.set("dummyPublish",!0)})};d.setTargetID=function(a){this.$MediaUploadVUShimSession4=a};d.setComposerSessionID=function(a){this.$MediaUploadVUShimSession2=a};d.post=function(a){this.$MediaUploadVUShimSession10?b("MediaUploadFBSDK").reportRecoverableError("Video upload client configured for pessimistic upload and explicit publish calls are now allowed"):this.$MediaUploadVUShimSession9!=null&&this.$MediaUploadVUShimSession6.confirmSession(this.sessionID,[this.$MediaUploadVUShimSession9],function(b){return b.set("postData",a)})};d.cancel=function(a){this.$MediaUploadVUShimSession6.cancelSession(this.sessionID,b("MediaUploadCancelReason").USER_REQUEST)};d.abandon=function(a){this.$MediaUploadVUShimSession6.cancelSession(this.sessionID,b("MediaUploadCancelReason").USER_REQUEST)};d.isPostInProgress=function(){var a;return((a=this.$MediaUploadVUShimSession7)==null?void 0:a.status)===b("MediaUploadSessionStatus").PUBLISHING};d.isInProgress=function(){var a;return((a=this.$MediaUploadVUShimSession8)==null?void 0:a.status)===b("MediaUploadAssetStatus").PROCESSING||((a=this.$MediaUploadVUShimSession8)==null?void 0:a.status)===b("MediaUploadAssetStatus").UPLOADING};d.getHasUploadFinished=function(){var a;return((a=this.$MediaUploadVUShimSession8)==null?void 0:a.status)===b("MediaUploadAssetStatus").COMPLETED};d.getVideoID=function(){var a;return(a=this.$MediaUploadVUShimSession8)==null?void 0:a.videoID};d.getUploadTime=function(){var a,b;a=(a=this.$MediaUploadVUShimSession8)==null?void 0:(a=a.uploadSummary)==null?void 0:a.startedAtMs;b=(b=this.$MediaUploadVUShimSession8)==null?void 0:(b=b.uploadSummary)==null?void 0:b.finishedAtMs;return a!=null&&b!=null?b-a:null};d.getExPartitionNumber=function(a){return 0};d.getIsSphericalVideo=function(){var a;return(a=(a=this.$MediaUploadVUShimSession8)==null?void 0:(a=a.metadata)==null?void 0:a.isSpherical)!=null?a:!1};d.startFlow=function(){this.$MediaUploadVUShimSession10?b("MediaUploadFBSDK").reportRecoverableError("Video upload client configured for pessimistic upload and explicit publish calls are now allowed"):this.$MediaUploadVUShimSession9!=null&&this.$MediaUploadVUShimSession6.confirmSession(this.sessionID,[this.$MediaUploadVUShimSession9])};d.sessionUpdated=function(a,c){this.$MediaUploadVUShimSession7=c;var d=c.extras.getUnsafe("postData");if(d==null)return;c=c.publishingResponse;switch(a){case b("MediaUploadSessionEvent").PUBLISH_STARTED:this.inform("post-started",d);break;case b("MediaUploadSessionEvent").PUBLISH_SUCCEED:this.inform("post-finished",Object.assign({},(a=c==null?void 0:c.payload)!=null?a:{},d));break;case b("MediaUploadSessionEvent").PUBLISH_FAILED:this.inform("post-failed",(a=c==null?void 0:c.payload)!=null?a:{});break;default:}};d.assetUpdated=function(a,c,d){var e;this.$MediaUploadVUShimSession7=c;this.$MediaUploadVUShimSession8=d;var f,g;c=(c=(c=d.asset.dataAsFile())==null?void 0:c.size)!=null?c:0;e=(e=(e=d.uploadSummary)==null?void 0:e.skippedUpload)!=null?e:!1;switch(a){case b("MediaUploadAssetEvent").ASSET_ADDED:f="upload-requested";break;case b("MediaUploadAssetEvent").ASSET_STARTED:f="upload-started";break;case b("MediaUploadAssetEvent").ASSET_REMOVED:f="upload-canceled";break;case b("MediaUploadAssetEvent").ASSET_PROGRESS:f="upload-progressed";g={start_offset:0,end_offset:c,file_size:c,sent_bytes:e?c:(a=(a=d.uploadSummary)==null?void 0:a.uploadedBytes)!=null?a:0,video_id:d.videoID,upload_domain:d.uploadServiceDomain,skip_upload:e,transport_retries:d.retries.totalRetryAttempts};break;case b("MediaUploadAssetEvent").ASSET_SUCCEED:f="upload-finished";g={start_offset:0,end_offset:c,video_id:d.videoID,is_spherical_video:(e=d==null?void 0:(a=d.metadata)==null?void 0:a.isSpherical)!=null?e:!1};break;case b("MediaUploadAssetEvent").ASSET_FAILED:f="upload-failed";g={error_code:(c=d.lastAction)==null?void 0:c.rawErrorCode,error_summary:(a=d.lastAction)==null?void 0:(e=a.displayError)==null?void 0:e.summary,error_description:(c=d.lastAction)==null?void 0:(a=c.displayError)==null?void 0:a.description,error_is_transient:(e=d.lastAction)==null?void 0:(c=e.errorAttributes)==null?void 0:c.transientError,upload_domain:d.uploadServiceDomain,www_request_id:(a=d.lastAction)==null?void 0:a.networkRequestID};break;default:}f!=null&&this.inform(f,g)};d.stageUpdated=function(a,c,d,e){this.$MediaUploadVUShimSession7=d;this.$MediaUploadVUShimSession8=e;if(a===b("MediaUploadStageEvent").STAGE_SUCCEED&&c===b("MediaUploadFBStage").METADATA_EXTRACTION){if(e.metadata!=null){d=e.metadata;a=d.durationMs==null?void 0:d.durationMs/1e3;e={format:{duration:a,isSpherical:(c=d.isSpherical)!=null?c:!1},metadata:{},streams:{numAudioTracks:1,primaryVideo:{type:"video",width:d.width,height:d.height,duration:a},primaryAudio:{type:"audio",duration:a}}}}else e=null;this.inform("metadata-parsed",e)}};d.triggerPublish=function(a,c){var d;this.$MediaUploadVUShimSession7=a;this.$MediaUploadVUShimSession8=c[0];d=(d=a.extras.getBoolean("dummyPublish"))!=null?d:!1;var e=a.extras.getUnsafe("postData");if(d)return b("Promise").resolve({isSuccessful:!0});else if(e==null)return b("Promise").resolve({isSuccessful:!1,errorCode:"MISSING_POST_DATA"});else return b("MediaUploadSingleAssetPublisher").publish({sessionSnapshot:a,assetSnapshot:c[0],postData:e,postRequestManagerParams:this.$MediaUploadVUShimSession1})};return c}(b("mixin")(b("cr:909282")));e.exports=a}),null);
__d("MediaUploadVUShimSurface",["MediaUploadFBDefaultSurfaceDefinition","MediaUploadFBEntryPointID","MediaUploadFBSDK","MediaUploadVUShim"],(function(a,b,c,d,e,f){"use strict";a=new(b("MediaUploadFBDefaultSurfaceDefinition"))(b("MediaUploadFBSDK"));a.registerClientConfiguration({entryPoints:[new(c=b("MediaUploadFBEntryPointID"))("composer","pages_feed"),new c("composer","pages_feed_video_composer"),new c("newsfeed_composer","feed"),new c("composer","timeline")],eventHooks:{publishCallback:function(a,c){return b("MediaUploadVUShim").triggerPublish(a,c)},eventSubscriber:function(a){b("MediaUploadVUShim").setupEventSubscription(a)}}});d=a.createSurface();f=d;e.exports=f}),null);